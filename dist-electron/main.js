"use strict";var mf=Object.defineProperty;var gf=(r,h,c)=>h in r?mf(r,h,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[h]=c;var Te=(r,h,c)=>gf(r,typeof h!="symbol"?h+"":h,c);const Qe=require("node:path"),be=require("electron"),Ie=require("path"),vr=require("child_process"),_t=require("os"),Ze=require("fs"),Gr=require("util"),Wr=require("events"),Nu=require("http"),yf=require("https"),vf=require("node:fs/promises"),Er=require("crypto"),Fu=require("tty"),wr=require("stream"),jt=require("url"),Ef=require("string_decoder"),wf=require("constants"),xu=require("assert"),Lu=require("zlib");var ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _f(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xt={exports:{}},rn={exports:{}},na;function $u(){return na||(na=1,function(r){let h={};try{h=require("electron")}catch{}h.ipcRenderer&&c(h),r.exports=c;function c({contextBridge:d,ipcRenderer:f}){if(!f)return;f.on("__ELECTRON_LOG_IPC__",(e,i)=>{window.postMessage({cmd:"message",...i})}),f.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch(e=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${e.message}`)));const n={sendToMain(e){try{f.send("__ELECTRON_LOG__",e)}catch(i){console.error("electronLog.sendToMain ",i,"data:",e),f.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:i==null?void 0:i.message,stack:i==null?void 0:i.stack},errorName:"sendToMain"})}},log(...e){n.sendToMain({data:e,level:"info"})}};for(const e of["error","warn","info","verbose","debug","silly"])n[e]=(...i)=>n.sendToMain({data:i,level:e});if(d&&process.contextIsolated)try{d.exposeInMainWorld("__electronLog",n)}catch{}typeof window=="object"?window.__electronLog=n:__electronLog=n}}(rn)),rn.exports}var nn={exports:{}},on,ia;function Sf(){if(ia)return on;ia=1,on=r;function r(h){return Object.defineProperties(c,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof c.labelPadding){case"boolean":return c.labelPadding?c.maxLabelLength:0;case"number":return c.labelPadding;default:return 0}}}});function c(d){c.maxLabelLength=Math.max(c.maxLabelLength,d.length);const f={};for(const n of h.levels)f[n]=(...e)=>h.logData(e,{level:n,scope:d});return f.log=f.info,f}}return on}var an,oa;function Af(){if(oa)return an;oa=1;class r{constructor({processMessage:c}){this.processMessage=c,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(c){this.buffer.push(c)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach(c=>this.processMessage(c)),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}return an=r,an}var sn,aa;function Uu(){if(aa)return sn;aa=1;const r=Sf(),h=Af(),d=class d{constructor({allowUnknownLevel:n=!1,dependencies:e={},errorHandler:i,eventLogger:t,initializeFn:s,isDev:o=!1,levels:u=["error","warn","info","verbose","debug","silly"],logId:a,transportFactories:p={},variables:g}={}){Te(this,"dependencies",{});Te(this,"errorHandler",null);Te(this,"eventLogger",null);Te(this,"functions",{});Te(this,"hooks",[]);Te(this,"isDev",!1);Te(this,"levels",null);Te(this,"logId",null);Te(this,"scope",null);Te(this,"transports",{});Te(this,"variables",{});this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=n,this.buffering=new h(this),this.dependencies=e,this.initializeFn=s,this.isDev=o,this.levels=u,this.logId=a,this.scope=r(this),this.transportFactories=p,this.variables=g||{};for(const y of this.levels)this.addLevel(y,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=i,i==null||i.setOptions({...e,logFn:this.error}),this.eventLogger=t,t==null||t.setOptions({...e,logger:this});for(const[y,m]of Object.entries(p))this.transports[y]=m(this,e);d.instances[a]=this}static getInstance({logId:n}){return this.instances[n]||this.instances.default}addLevel(n,e=this.levels.length){e!==!1&&this.levels.splice(e,0,n),this[n]=(...i)=>this.logData(i,{level:n}),this.functions[n]=this[n]}catchErrors(n){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(n)}create(n){return typeof n=="string"&&(n={logId:n}),new d({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...n})}compareLevels(n,e,i=this.levels){const t=i.indexOf(n),s=i.indexOf(e);return s===-1||t===-1?!0:s<=t}initialize(n={}){this.initializeFn({logger:this,...this.dependencies,...n})}logData(n,e={}){this.buffering.enabled?this.buffering.addMessage({data:n,date:new Date,...e}):this.processMessage({data:n,...e})}processMessage(n,{transports:e=this.transports}={}){if(n.cmd==="errorHandler"){this.errorHandler.handle(n.error,{errorName:n.errorName,processType:"renderer",showDialog:!!n.showDialog});return}let i=n.level;this.allowUnknownLevel||(i=this.levels.includes(n.level)?n.level:"info");const t={date:new Date,logId:this.logId,...n,level:i,variables:{...this.variables,...n.variables}};for(const[s,o]of this.transportEntries(e))if(!(typeof o!="function"||o.level===!1)&&this.compareLevels(o.level,n.level))try{const u=this.hooks.reduce((a,p)=>a&&p(a,o,s),t);u&&o({...u,data:[...u.data]})}catch(u){this.processInternalErrorFn(u)}}processInternalErrorFn(n){}transportEntries(n=this.transports){return(Array.isArray(n)?n:Object.entries(n)).map(i=>{switch(typeof i){case"string":return this.transports[i]?[i,this.transports[i]]:null;case"function":return[i.name,i];default:return Array.isArray(i)?i:null}}).filter(Boolean)}};Te(d,"instances",{});let c=d;return sn=c,sn}var ln,sa;function Tf(){if(sa)return ln;sa=1;const r=console.error;class h{constructor({logFn:d=null}={}){Te(this,"logFn",null);Te(this,"onError",null);Te(this,"showDialog",!1);Te(this,"preventDefault",!0);this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=d}handle(d,{logFn:f=this.logFn,errorName:n="",onError:e=this.onError,showDialog:i=this.showDialog}={}){try{(e==null?void 0:e({error:d,errorName:n,processType:"renderer"}))!==!1&&f({error:d,errorName:n,showDialog:i})}catch{r(d)}}setOptions({logFn:d,onError:f,preventDefault:n,showDialog:e}){typeof d=="function"&&(this.logFn=d),typeof f=="function"&&(this.onError=f),typeof n=="boolean"&&(this.preventDefault=n),typeof e=="boolean"&&(this.showDialog=e)}startCatching({onError:d,showDialog:f}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:d,showDialog:f}),window.addEventListener("error",n=>{var e;this.preventDefault&&((e=n.preventDefault)==null||e.call(n)),this.handleError(n.error||n)}),window.addEventListener("unhandledrejection",n=>{var e;this.preventDefault&&((e=n.preventDefault)==null||e.call(n)),this.handleRejection(n.reason||n)}))}handleError(d){this.handle(d,{errorName:"Unhandled"})}handleRejection(d){const f=d instanceof Error?d:new Error(JSON.stringify(d));this.handle(f,{errorName:"Unhandled rejection"})}}return ln=h,ln}var un,la;function Ft(){if(la)return un;la=1,un={transform:r};function r({logger:h,message:c,transport:d,initialData:f=(c==null?void 0:c.data)||[],transforms:n=d==null?void 0:d.transforms}){return n.reduce((e,i)=>typeof i=="function"?i({data:e,logger:h,message:c,transport:d}):e,f)}return un}var cn,ua;function bf(){if(ua)return cn;ua=1;const{transform:r}=Ft();cn=c;const h={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function c(f){return Object.assign(n,{format:"{h}:{i}:{s}.{ms}{scope} â€º {text}",transforms:[d],writeFn({message:{level:e,data:i}}){const t=h[e]||h.info;setTimeout(()=>t(...i))}});function n(e){n.writeFn({message:{...e,data:r({logger:f,message:e,transport:n})}})}}function d({data:f=[],logger:n={},message:e={},transport:i={}}){if(typeof i.format=="function")return i.format({data:f,level:(e==null?void 0:e.level)||"info",logger:n,message:e,transport:i});if(typeof i.format!="string")return f;f.unshift(i.format),typeof f[1]=="string"&&f[1].match(/%[1cdfiOos]/)&&(f=[`${f[0]} ${f[1]}`,...f.slice(2)]);const t=e.date||new Date;return f[0]=f[0].replace(/\{(\w+)}/g,(s,o)=>{var u,a;switch(o){case"level":return e.level;case"logId":return e.logId;case"scope":{const p=e.scope||((u=n.scope)==null?void 0:u.defaultLabel);return p?` (${p})`:""}case"text":return"";case"y":return t.getFullYear().toString(10);case"m":return(t.getMonth()+1).toString(10).padStart(2,"0");case"d":return t.getDate().toString(10).padStart(2,"0");case"h":return t.getHours().toString(10).padStart(2,"0");case"i":return t.getMinutes().toString(10).padStart(2,"0");case"s":return t.getSeconds().toString(10).padStart(2,"0");case"ms":return t.getMilliseconds().toString(10).padStart(3,"0");case"iso":return t.toISOString();default:return((a=e.variables)==null?void 0:a[o])||s}}).trim(),f}return cn}var fn,ca;function Rf(){if(ca)return fn;ca=1;const{transform:r}=Ft();fn=c;const h=new Set([Promise,WeakMap,WeakSet]);function c(n){return Object.assign(e,{depth:5,transforms:[f]});function e(i){if(!window.__electronLog){n.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});return}try{const t=r({initialData:i,logger:n,message:i,transport:e});__electronLog.sendToMain(t)}catch(t){n.transports.console({data:["electronLog.transports.ipc",t,"data:",i.data],level:"error"})}}}function d(n){return Object(n)!==n}function f({data:n,depth:e,seen:i=new WeakSet,transport:t={}}={}){const s=e||t.depth||5;return i.has(n)?"[Circular]":s<1?d(n)?n:Array.isArray(n)?"[Array]":`[${typeof n}]`:["function","symbol"].includes(typeof n)?n.toString():d(n)?n:h.has(n.constructor)?`[${n.constructor.name}]`:Array.isArray(n)?n.map(o=>f({data:o,depth:s-1,seen:i})):n instanceof Date?n.toISOString():n instanceof Error?n.stack:n instanceof Map?new Map(Array.from(n).map(([o,u])=>[f({data:o,depth:s-1,seen:i}),f({data:u,depth:s-1,seen:i})])):n instanceof Set?new Set(Array.from(n).map(o=>f({data:o,depth:s-1,seen:i}))):(i.add(n),Object.fromEntries(Object.entries(n).map(([o,u])=>[o,f({data:u,depth:s-1,seen:i})])))}return fn}var fa;function Cf(){return fa||(fa=1,function(r){const h=Uu(),c=Tf(),d=bf(),f=Rf();r.exports=n(),r.exports.Logger=h,r.exports.default=r.exports;function n(){const e=new h({allowUnknownLevel:!0,errorHandler:new c,initializeFn:()=>{},logId:"default",transportFactories:{console:d,ipc:f},variables:{processType:"renderer"}});return e.errorHandler.setOptions({logFn({error:i,errorName:t,showDialog:s}){e.transports.console({data:[t,i].filter(Boolean),level:"error"}),e.transports.ipc({cmd:"errorHandler",error:{cause:i==null?void 0:i.cause,code:i==null?void 0:i.code,name:i==null?void 0:i.name,message:i==null?void 0:i.message,stack:i==null?void 0:i.stack},errorName:t,logId:e.logId,showDialog:s})}}),typeof window=="object"&&window.addEventListener("message",i=>{const{cmd:t,logId:s,...o}=i.data||{},u=h.getInstance({logId:s});t==="message"&&u.processMessage(o,{transports:["console"]})}),new Proxy(e,{get(i,t){return typeof i[t]<"u"?i[t]:(...s)=>e.logData(s,{level:t})}})}}(nn)),nn.exports}var dn,da;function Of(){if(da)return dn;da=1;const r=Ze,h=Ie;dn={findAndReadPackageJson:c,tryReadJsonAt:d};function c(){return d(e())||d(n())||d(process.resourcesPath,"app.asar")||d(process.resourcesPath,"app")||d(process.cwd())||{name:void 0,version:void 0}}function d(...i){if(i[0])try{const t=h.join(...i),s=f("package.json",t);if(!s)return;const o=JSON.parse(r.readFileSync(s,"utf8")),u=(o==null?void 0:o.productName)||(o==null?void 0:o.name);return!u||u.toLowerCase()==="electron"?void 0:u?{name:u,version:o==null?void 0:o.version}:void 0}catch{return}}function f(i,t){let s=t;for(;;){const o=h.parse(s),u=o.root,a=o.dir;if(r.existsSync(h.join(s,i)))return h.resolve(h.join(s,i));if(s===u)return null;s=a}}function n(){const i=process.argv.filter(s=>s.indexOf("--user-data-dir=")===0);return i.length===0||typeof i[0]!="string"?null:i[0].replace("--user-data-dir=","")}function e(){var i;try{return(i=require.main)==null?void 0:i.filename}catch{return}}return dn}var hn,ha;function qu(){if(ha)return hn;ha=1;const r=vr,h=_t,c=Ie,d=Of();class f{constructor(){Te(this,"appName");Te(this,"appPackageJson");Te(this,"platform",process.platform)}getAppLogPath(e=this.getAppName()){return this.platform==="darwin"?c.join(this.getSystemPathHome(),"Library/Logs",e):c.join(this.getAppUserDataPath(e),"logs")}getAppName(){var i;const e=this.appName||((i=this.getAppPackageJson())==null?void 0:i.name);if(!e)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return e}getAppPackageJson(){return typeof this.appPackageJson!="object"&&(this.appPackageJson=d.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(e=this.getAppName()){return e?c.join(this.getSystemPathAppData(),e):void 0}getAppVersion(){var e;return(e=this.getAppPackageJson())==null?void 0:e.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const e=Number(h.release().split(".")[0]);return e<=19?`10.${e-4}`:e-9}getOsVersion(){let e=h.type().replace("_"," "),i=h.release();return e==="Darwin"&&(e="macOS",i=this.getMacOsVersion()),`${e} ${i}`}getPathVariables(){const e=this.getAppName(),i=this.getAppVersion(),t=this;return{appData:this.getSystemPathAppData(),appName:e,appVersion:i,get electronDefaultDir(){return t.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(e),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(e)}}getSystemPathAppData(){const e=this.getSystemPathHome();switch(this.platform){case"darwin":return c.join(e,"Library/Application Support");case"win32":return process.env.APPDATA||c.join(e,"AppData/Roaming");default:return process.env.XDG_CONFIG_HOME||c.join(e,".config")}}getSystemPathHome(){var e;return((e=h.homedir)==null?void 0:e.call(h))||process.env.HOME}getSystemPathTemp(){return h.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return process.env.NODE_ENV==="development"||process.env.ELECTRON_IS_DEV==="1"}isElectron(){return!!process.versions.electron}onAppEvent(e,i){}onAppReady(e){e()}onEveryWebContentsEvent(e,i){}onIpc(e,i){}onIpcInvoke(e,i){}openUrl(e,i=console.error){const s={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";r.exec(`${s} ${e}`,{},o=>{o&&i(o)})}setAppName(e){this.appName=e}setPlatform(e){this.platform=e}setPreloadFileForSessions({filePath:e,includeFutureSession:i=!0,getSessions:t=()=>[]}){}sendIpc(e,i){}showErrorBox(e,i){}}return hn=f,hn}var pn,pa;function If(){if(pa)return pn;pa=1;const r=Ie,h=qu();class c extends h{constructor({electron:n}={}){super();Te(this,"electron");this.electron=n}getAppName(){var e,i;let n;try{n=this.appName||((e=this.electron.app)==null?void 0:e.name)||((i=this.electron.app)==null?void 0:i.getName())}catch{}return n||super.getAppName()}getAppUserDataPath(n){return this.getPath("userData")||super.getAppUserDataPath(n)}getAppVersion(){var e;let n;try{n=(e=this.electron.app)==null?void 0:e.getVersion()}catch{}return n||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(n){var e;try{return(e=this.electron.app)==null?void 0:e.getPath(n)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){var n;return((n=this.electron.app)==null?void 0:n.isPackaged)!==void 0?!this.electron.app.isPackaged:typeof process.execPath=="string"?r.basename(process.execPath).toLowerCase().startsWith("electron"):super.isDev()}onAppEvent(n,e){var i;return(i=this.electron.app)==null||i.on(n,e),()=>{var t;(t=this.electron.app)==null||t.off(n,e)}}onAppReady(n){var e,i,t;(e=this.electron.app)!=null&&e.isReady()?n():(i=this.electron.app)!=null&&i.once?(t=this.electron.app)==null||t.once("ready",n):n()}onEveryWebContentsEvent(n,e){var t,s,o;return(s=(t=this.electron.webContents)==null?void 0:t.getAllWebContents())==null||s.forEach(u=>{u.on(n,e)}),(o=this.electron.app)==null||o.on("web-contents-created",i),()=>{var u,a;(u=this.electron.webContents)==null||u.getAllWebContents().forEach(p=>{p.off(n,e)}),(a=this.electron.app)==null||a.off("web-contents-created",i)};function i(u,a){a.on(n,e)}}onIpc(n,e){var i;(i=this.electron.ipcMain)==null||i.on(n,e)}onIpcInvoke(n,e){var i,t;(t=(i=this.electron.ipcMain)==null?void 0:i.handle)==null||t.call(i,n,e)}openUrl(n,e=console.error){var i;(i=this.electron.shell)==null||i.openExternal(n).catch(e)}setPreloadFileForSessions({filePath:n,includeFutureSession:e=!0,getSessions:i=()=>{var t;return[(t=this.electron.session)==null?void 0:t.defaultSession]}}){for(const s of i().filter(Boolean))t(s);e&&this.onAppEvent("session-created",s=>{t(s)});function t(s){typeof s.registerPreloadScript=="function"?s.registerPreloadScript({filePath:n,id:"electron-log-preload",type:"frame"}):s.setPreloads([...s.getPreloads(),n])}}sendIpc(n,e){var i,t;(t=(i=this.electron.BrowserWindow)==null?void 0:i.getAllWindows())==null||t.forEach(s=>{var o,u;((o=s.webContents)==null?void 0:o.isDestroyed())===!1&&((u=s.webContents)==null?void 0:u.isCrashed())===!1&&s.webContents.send(n,e)})}showErrorBox(n,e){var i;(i=this.electron.dialog)==null||i.showErrorBox(n,e)}}return pn=c,pn}var mn,ma;function Pf(){if(ma)return mn;ma=1;const r=Ze,h=_t,c=Ie,d=$u();mn={initialize({externalApi:e,getSessions:i,includeFutureSession:t,logger:s,preload:o=!0,spyRendererConsole:u=!1}){e.onAppReady(()=>{try{o&&f({externalApi:e,getSessions:i,includeFutureSession:t,preloadOption:o}),u&&n({externalApi:e,logger:s})}catch(a){s.warn(a)}})}};function f({externalApi:e,getSessions:i,includeFutureSession:t,preloadOption:s}){let o=typeof s=="string"?s:void 0;try{o=c.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!o||!r.existsSync(o)){o=c.join(e.getAppUserDataPath()||h.tmpdir(),"electron-log-preload.js");const u=`
      try {
        (${d.toString()})(require('electron'));
      } catch(e) {
        console.error(e);
      }
    `;r.writeFileSync(o,u,"utf8")}e.setPreloadFileForSessions({filePath:o,includeFutureSession:t,getSessions:i})}function n({externalApi:e,logger:i}){const t=["debug","info","warn","error"];e.onEveryWebContentsEvent("console-message",(s,o,u)=>{i.processMessage({data:[u],level:t[o],variables:{processType:"renderer"}})})}return mn}var gn,ga;function Df(){if(ga)return gn;ga=1;class r{constructor({externalApi:d,logFn:f=void 0,onError:n=void 0,showDialog:e=void 0}={}){Te(this,"externalApi");Te(this,"isActive",!1);Te(this,"logFn");Te(this,"onError");Te(this,"showDialog",!0);this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:d,logFn:f,onError:n,showDialog:e}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(d,{logFn:f=this.logFn,onError:n=this.onError,processType:e="browser",showDialog:i=this.showDialog,errorName:t=""}={}){var s;d=h(d);try{if(typeof n=="function"){const o=((s=this.externalApi)==null?void 0:s.getVersions())||{},u=this.createIssue;if(n({createIssue:u,error:d,errorName:t,processType:e,versions:o})===!1)return}t?f(t,d):f(d),i&&!t.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${e} process`,d.stack)}catch{console.error(d)}}setOptions({externalApi:d,logFn:f,onError:n,showDialog:e}){typeof d=="object"&&(this.externalApi=d),typeof f=="function"&&(this.logFn=f),typeof n=="function"&&(this.onError=n),typeof e=="boolean"&&(this.showDialog=e)}startCatching({onError:d,showDialog:f}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:d,showDialog:f}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(d,f){var n;(n=this.externalApi)==null||n.openUrl(`${d}?${new URLSearchParams(f).toString()}`)}handleError(d){this.handle(d,{errorName:"Unhandled"})}handleRejection(d){const f=d instanceof Error?d:new Error(JSON.stringify(d));this.handle(f,{errorName:"Unhandled rejection"})}}function h(c){if(c instanceof Error)return c;if(c&&typeof c=="object"){if(c.message)return Object.assign(new Error(c.message),c);try{return new Error(JSON.stringify(c))}catch(d){return new Error(`Couldn't normalize error ${String(c)}: ${d}`)}}return new Error(`Can't normalize error ${String(c)}`)}return gn=r,gn}var yn,ya;function Nf(){if(ya)return yn;ya=1;class r{constructor(c={}){Te(this,"disposers",[]);Te(this,"format","{eventSource}#{eventName}:");Te(this,"formatters",{app:{"certificate-error":({args:c})=>this.arrayToObject(c.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:c})=>c.length===1?c[0]:c,"render-process-gone":({args:[c,d]})=>d&&typeof d=="object"?{...d,...this.getWebContentsDetails(c)}:[]},webContents:{"console-message":({args:[c,d,f,n]})=>{if(!(c<3))return{message:d,source:`${n}:${f}`}},"did-fail-load":({args:c})=>this.arrayToObject(c,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:c})=>this.arrayToObject(c,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:c})=>this.arrayToObject(c,["name","version"]),"preload-error":({args:c})=>this.arrayToObject(c,["preloadPath","error"])}});Te(this,"events",{app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}});Te(this,"externalApi");Te(this,"level","error");Te(this,"scope","");this.setOptions(c)}setOptions({events:c,externalApi:d,level:f,logger:n,format:e,formatters:i,scope:t}){typeof c=="object"&&(this.events=c),typeof d=="object"&&(this.externalApi=d),typeof f=="string"&&(this.level=f),typeof n=="object"&&(this.logger=n),(typeof e=="string"||typeof e=="function")&&(this.format=e),typeof i=="object"&&(this.formatters=i),typeof t=="string"&&(this.scope=t)}startLogging(c={}){this.setOptions(c),this.disposeListeners();for(const d of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(d,(...f)=>{this.handleEvent({eventSource:"app",eventName:d,handlerArgs:f})}));for(const d of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(d,(...f)=>{this.handleEvent({eventSource:"webContents",eventName:d,handlerArgs:f})}))}stopLogging(){this.disposeListeners()}arrayToObject(c,d){const f={};return d.forEach((n,e)=>{f[n]=c[e]}),c.length>d.length&&(f.unknownArgs=c.slice(d.length)),f}disposeListeners(){this.disposers.forEach(c=>c()),this.disposers=[]}formatEventLog({eventName:c,eventSource:d,handlerArgs:f}){var u;const[n,...e]=f;if(typeof this.format=="function")return this.format({args:e,event:n,eventName:c,eventSource:d});const i=(u=this.formatters[d])==null?void 0:u[c];let t=e;if(typeof i=="function"&&(t=i({args:e,event:n,eventName:c,eventSource:d})),!t)return;const s={};return Array.isArray(t)?s.args=t:typeof t=="object"&&Object.assign(s,t),d==="webContents"&&Object.assign(s,this.getWebContentsDetails(n==null?void 0:n.sender)),[this.format.replace("{eventSource}",d==="app"?"App":"WebContents").replace("{eventName}",c),s]}getEventNames(c){return!c||typeof c!="object"?[]:Object.entries(c).filter(([d,f])=>f).map(([d])=>d)}getWebContentsDetails(c){if(!(c!=null&&c.loadURL))return{};try{return{webContents:{id:c.id,url:c.getURL()}}}catch{return{}}}handleEvent({eventName:c,eventSource:d,handlerArgs:f}){var e;const n=this.formatEventLog({eventName:c,eventSource:d,handlerArgs:f});if(n){const i=this.scope?this.logger.scope(this.scope):this.logger;(e=i==null?void 0:i[this.level])==null||e.call(i,...n)}}}return yn=r,yn}var vn,va;function ku(){if(va)return vn;va=1;const{transform:r}=Ft();vn={concatFirstStringElements:h,formatScope:d,formatText:n,formatVariables:f,timeZoneFromOffset:c,format({message:e,logger:i,transport:t,data:s=e==null?void 0:e.data}){switch(typeof t.format){case"string":return r({message:e,logger:i,transforms:[f,d,n],transport:t,initialData:[t.format,...s]});case"function":return t.format({data:s,level:(e==null?void 0:e.level)||"info",logger:i,message:e,transport:t});default:return s}}};function h({data:e}){return typeof e[0]!="string"||typeof e[1]!="string"||e[0].match(/%[1cdfiOos]/)?e:[`${e[0]} ${e[1]}`,...e.slice(2)]}function c(e){const i=Math.abs(e),t=e>0?"-":"+",s=Math.floor(i/60).toString().padStart(2,"0"),o=(i%60).toString().padStart(2,"0");return`${t}${s}:${o}`}function d({data:e,logger:i,message:t}){const{defaultLabel:s,labelLength:o}=(i==null?void 0:i.scope)||{},u=e[0];let a=t.scope;a||(a=s);let p;return a===""?p=o>0?"".padEnd(o+3):"":typeof a=="string"?p=` (${a})`.padEnd(o+3):p="",e[0]=u.replace("{scope}",p),e}function f({data:e,message:i}){let t=e[0];if(typeof t!="string")return e;t=t.replace("{level}]",`${i.level}]`.padEnd(6," "));const s=i.date||new Date;return e[0]=t.replace(/\{(\w+)}/g,(o,u)=>{var a;switch(u){case"level":return i.level||"info";case"logId":return i.logId;case"y":return s.getFullYear().toString(10);case"m":return(s.getMonth()+1).toString(10).padStart(2,"0");case"d":return s.getDate().toString(10).padStart(2,"0");case"h":return s.getHours().toString(10).padStart(2,"0");case"i":return s.getMinutes().toString(10).padStart(2,"0");case"s":return s.getSeconds().toString(10).padStart(2,"0");case"ms":return s.getMilliseconds().toString(10).padStart(3,"0");case"z":return c(s.getTimezoneOffset());case"iso":return s.toISOString();default:return((a=i.variables)==null?void 0:a[u])||o}}).trim(),e}function n({data:e}){const i=e[0];if(typeof i!="string")return e;if(i.lastIndexOf("{text}")===i.length-6)return e[0]=i.replace(/\s?{text}/,""),e[0]===""&&e.shift(),e;const s=i.split("{text}");let o=[];return s[0]!==""&&o.push(s[0]),o=o.concat(e.slice(1)),s[1]!==""&&o.push(s[1]),o}return vn}var En={exports:{}},Ea;function Vr(){return Ea||(Ea=1,function(r){const h=Gr;r.exports={serialize:d,maxDepth({data:f,transport:n,depth:e=(n==null?void 0:n.depth)??6}){if(!f)return f;if(e<1)return Array.isArray(f)?"[array]":typeof f=="object"&&f?"[object]":f;if(Array.isArray(f))return f.map(t=>r.exports.maxDepth({data:t,depth:e-1}));if(typeof f!="object"||f&&typeof f.toISOString=="function")return f;if(f===null)return null;if(f instanceof Error)return f;const i={};for(const t in f)Object.prototype.hasOwnProperty.call(f,t)&&(i[t]=r.exports.maxDepth({data:f[t],depth:e-1}));return i},toJSON({data:f}){return JSON.parse(JSON.stringify(f,c()))},toString({data:f,transport:n}){const e=(n==null?void 0:n.inspectOptions)||{},i=f.map(t=>{if(t!==void 0)try{const s=JSON.stringify(t,c(),"  ");return s===void 0?void 0:JSON.parse(s)}catch{return t}});return h.formatWithOptions(e,...i)}};function c(f={}){const n=new WeakSet;return function(e,i){if(typeof i=="object"&&i!==null){if(n.has(i))return;n.add(i)}return d(e,i,f)}}function d(f,n,e={}){const i=(e==null?void 0:e.serializeMapAndSet)!==!1;return n instanceof Error?n.stack:n&&(typeof n=="function"?`[function] ${n.toString()}`:n instanceof Date?n.toISOString():i&&n instanceof Map&&Object.fromEntries?Object.fromEntries(n):i&&n instanceof Set&&Array.from?Array.from(n):n)}}(En)),En.exports}var wn,wa;function Do(){if(wa)return wn;wa=1,wn={transformStyles:d,applyAnsiStyles({data:f}){return d(f,h,c)},removeStyles({data:f}){return d(f,()=>"")}};const r={unset:"\x1B[0m",black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"};function h(f){const n=f.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return r[n]||""}function c(f){return f+r.unset}function d(f,n,e){const i={};return f.reduce((t,s,o,u)=>{if(i[o])return t;if(typeof s=="string"){let a=o,p=!1;s=s.replace(/%[1cdfiOos]/g,g=>{if(a+=1,g!=="%c")return g;const y=u[a];return typeof y=="string"?(i[a]=!0,p=!0,n(y,s)):g}),p&&e&&(s=e(s))}return t.push(s),t},[])}return wn}var _n,_a;function Ff(){if(_a)return _n;_a=1;const{concatFirstStringElements:r,format:h}=ku(),{maxDepth:c,toJSON:d}=Vr(),{applyAnsiStyles:f,removeStyles:n}=Do(),{transform:e}=Ft(),i={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};_n=o;const s=`%c{h}:{i}:{s}.{ms}{scope}%c ${process.platform==="win32"?">":"â€º"} {text}`;Object.assign(o,{DEFAULT_FORMAT:s});function o(y){return Object.assign(m,{format:s,level:"silly",transforms:[u,h,p,r,c,d],useStyles:process.env.FORCE_STYLES,writeFn({message:_}){(i[_.level]||i.info)(..._.data)}});function m(_){const R=e({logger:y,message:_,transport:m});m.writeFn({message:{..._,data:R}})}}function u({data:y,message:m,transport:_}){return _.format!==s?y:[`color:${g(m.level)}`,"color:unset",...y]}function a(y,m){if(typeof y=="boolean")return y;const R=m==="error"||m==="warn"?process.stderr:process.stdout;return R&&R.isTTY}function p(y){const{message:m,transport:_}=y;return(a(_.useStyles,m.level)?f:n)(y)}function g(y){const m={error:"red",warn:"yellow",info:"cyan",default:"unset"};return m[y]||m.default}return _n}var Sn,Sa;function Mu(){if(Sa)return Sn;Sa=1;const r=Wr,h=Ze,c=_t;class d extends r{constructor({path:i,writeOptions:t={encoding:"utf8",flag:"a",mode:438},writeAsync:s=!1}){super();Te(this,"asyncWriteQueue",[]);Te(this,"bytesWritten",0);Te(this,"hasActiveAsyncWriting",!1);Te(this,"path",null);Te(this,"initialSize");Te(this,"writeOptions",null);Te(this,"writeAsync",!1);this.path=i,this.writeOptions=t,this.writeAsync=s}get size(){return this.getSize()}clear(){try{return h.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(i){return i.code==="ENOENT"?!0:(this.emit("error",i,this),!1)}}crop(i){try{const t=f(this.path,i||4096);this.clear(),this.writeLine(`[log cropped]${c.EOL}${t}`)}catch(t){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${t.message}`),this)}}getSize(){if(this.initialSize===void 0)try{const i=h.statSync(this.path);this.initialSize=i.size}catch{this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(i){this.bytesWritten+=Buffer.byteLength(i,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const i=this;if(this.hasActiveAsyncWriting||this.asyncWriteQueue.length===0)return;const t=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,h.writeFile(this.path,t,this.writeOptions,s=>{i.hasActiveAsyncWriting=!1,s?i.emit("error",new Error(`Couldn't write to ${i.path}. ${s.message}`),this):i.increaseBytesWrittenCounter(t),i.nextAsyncWrite()})}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(i){if(i+=c.EOL,this.writeAsync){this.asyncWriteQueue.push(i),this.nextAsyncWrite();return}try{h.writeFileSync(this.path,i,this.writeOptions),this.increaseBytesWrittenCounter(i)}catch(t){this.emit("error",new Error(`Couldn't write to ${this.path}. ${t.message}`),this)}}}Sn=d;function f(n,e){const i=Buffer.alloc(e),t=h.statSync(n),s=Math.min(t.size,e),o=Math.max(0,t.size-e),u=h.openSync(n,"r"),a=h.readSync(u,i,0,s,o);return h.closeSync(u),i.toString("utf8",0,a)}return Sn}var An,Aa;function xf(){if(Aa)return An;Aa=1;const r=Mu();class h extends r{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}return An=h,An}var Tn,Ta;function Lf(){if(Ta)return Tn;Ta=1;const r=Wr,h=Ze,c=Ie,d=Mu(),f=xf();class n extends r{constructor(){super();Te(this,"store",{});this.emitError=this.emitError.bind(this)}provide({filePath:t,writeOptions:s={},writeAsync:o=!1}){let u;try{if(t=c.resolve(t),this.store[t])return this.store[t];u=this.createFile({filePath:t,writeOptions:s,writeAsync:o})}catch(a){u=new f({path:t}),this.emitError(a,u)}return u.on("error",this.emitError),this.store[t]=u,u}createFile({filePath:t,writeOptions:s,writeAsync:o}){return this.testFileWriting({filePath:t,writeOptions:s}),new d({path:t,writeOptions:s,writeAsync:o})}emitError(t,s){this.emit("error",t,s)}testFileWriting({filePath:t,writeOptions:s}){h.mkdirSync(c.dirname(t),{recursive:!0}),h.writeFileSync(t,"",{flag:"a",mode:s.mode})}}return Tn=n,Tn}var bn,ba;function $f(){if(ba)return bn;ba=1;const r=Ze,h=_t,c=Ie,d=Lf(),{transform:f}=Ft(),{removeStyles:n}=Do(),{format:e,concatFirstStringElements:i}=ku(),{toString:t}=Vr();bn=o;const s=new d;function o(a,{registry:p=s,externalApi:g}={}){let y;return p.listenerCount("error")<1&&p.on("error",(U,b)=>{R(`Can't write to ${b}`,U)}),Object.assign(m,{fileName:u(a.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:O,inspectOptions:{depth:5},level:"silly",maxSize:1024**2,readAllLogs:I,sync:!0,transforms:[n,e,i,t],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(U){const b=U.toString(),S=c.parse(b);try{r.renameSync(b,c.join(S.dir,`${S.name}.old${S.ext}`))}catch(T){R("Could not rotate log",T);const E=Math.round(m.maxSize/4);U.crop(Math.min(E,256*1024))}},resolvePathFn(U){return c.join(U.libraryDefaultDir,U.fileName)},setAppName(U){a.dependencies.externalApi.setAppName(U)}});function m(U){const b=O(U);m.maxSize>0&&b.size>m.maxSize&&(m.archiveLogFn(b),b.reset());const T=f({logger:a,message:U,transport:m});b.writeLine(T)}function _(){y||(y=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(g.getPathVariables()),fileName:{get(){return m.fileName},enumerable:!0}}),typeof m.archiveLog=="function"&&(m.archiveLogFn=m.archiveLog,R("archiveLog is deprecated. Use archiveLogFn instead")),typeof m.resolvePath=="function"&&(m.resolvePathFn=m.resolvePath,R("resolvePath is deprecated. Use resolvePathFn instead")))}function R(U,b=null,S="error"){const T=[`electron-log.transports.file: ${U}`];b&&T.push(b),a.transports.console({data:T,date:new Date,level:S})}function O(U){_();const b=m.resolvePathFn(y,U);return p.provide({filePath:b,writeAsync:!m.sync,writeOptions:m.writeOptions})}function I({fileFilter:U=b=>b.endsWith(".log")}={}){_();const b=c.dirname(m.resolvePathFn(y));return r.existsSync(b)?r.readdirSync(b).map(S=>c.join(b,S)).filter(U).map(S=>{try{return{path:S,lines:r.readFileSync(S,"utf8").split(h.EOL)}}catch{return null}}).filter(Boolean):[]}}function u(a=process.type){switch(a){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}return bn}var Rn,Ra;function Uf(){if(Ra)return Rn;Ra=1;const{maxDepth:r,toJSON:h}=Vr(),{transform:c}=Ft();Rn=d;function d(f,{externalApi:n}){return Object.assign(e,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:f.isDev?"silly":!1,transforms:[h,r]}),n!=null&&n.isElectron()?e:void 0;function e(i){var t;((t=i==null?void 0:i.variables)==null?void 0:t.processType)!=="renderer"&&(n==null||n.sendIpc(e.eventId,{...i,data:c({logger:f,message:i,transport:e})}))}}return Rn}var Cn,Ca;function qf(){if(Ca)return Cn;Ca=1;const r=Nu,h=yf,{transform:c}=Ft(),{removeStyles:d}=Do(),{toJSON:f,maxDepth:n}=Vr();Cn=e;function e(i){return Object.assign(t,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[d,f,n],makeBodyFn({message:s}){return JSON.stringify({client:t.client,data:s.data,date:s.date.getTime(),level:s.level,scope:s.scope,variables:s.variables})},processErrorFn({error:s}){i.processMessage({data:[`electron-log: can't POST ${t.url}`,s],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:s,requestOptions:o,body:u}){const p=(s.startsWith("https:")?h:r).request(s,{method:"POST",...o,headers:{"Content-Type":"application/json","Content-Length":u.length,...o.headers}});return p.write(u),p.end(),p}});function t(s){if(!t.url)return;const o=t.makeBodyFn({logger:i,message:{...s,data:c({logger:i,message:s,transport:t})},transport:t}),u=t.sendRequestFn({serverUrl:t.url,requestOptions:t.requestOptions,body:Buffer.from(o,"utf8")});u.on("error",a=>t.processErrorFn({error:a,logger:i,message:s,request:u,transport:t}))}}return Cn}var On,Oa;function Bu(){if(Oa)return On;Oa=1;const r=Uu(),h=Df(),c=Nf(),d=Ff(),f=$f(),n=Uf(),e=qf();On=i;function i({dependencies:t,initializeFn:s}){var u;const o=new r({dependencies:t,errorHandler:new h,eventLogger:new c,initializeFn:s,isDev:(u=t.externalApi)==null?void 0:u.isDev(),logId:"default",transportFactories:{console:d,file:f,ipc:n,remote:e},variables:{processType:"main"}});return o.default=o,o.Logger=r,o.processInternalErrorFn=a=>{o.transports.console.writeFn({message:{data:["Unhandled electron-log error",a],level:"error"}})},o}return On}var In,Ia;function kf(){if(Ia)return In;Ia=1;const r=be,h=If(),{initialize:c}=Pf(),d=Bu(),f=new h({electron:r}),n=d({dependencies:{externalApi:f},initializeFn:c});In=n,f.onIpc("__ELECTRON_LOG__",(i,t)=>{t.scope&&n.Logger.getInstance(t).scope(t.scope);const s=new Date(t.date);e({...t,date:s.getTime()?s:new Date})}),f.onIpcInvoke("__ELECTRON_LOG__",(i,{cmd:t="",logId:s})=>{switch(t){case"getOptions":return{levels:n.Logger.getInstance({logId:s}).levels,logId:s};default:return e({data:[`Unknown cmd '${t}'`],level:"error"}),{}}});function e(i){var t;(t=n.Logger.getInstance(i))==null||t.processMessage(i)}return In}var Pn,Pa;function Mf(){if(Pa)return Pn;Pa=1;const r=qu(),h=Bu(),c=new r;return Pn=h({dependencies:{externalApi:c}}),Pn}var Da;function Bf(){if(Da)return Xt.exports;Da=1;const r=typeof process>"u"||process.type==="renderer"||process.type==="worker",h=typeof process=="object"&&process.type==="browser";return r?($u(),Xt.exports=Cf()):h?Xt.exports=kf():Xt.exports=Mf(),Xt.exports}var jf=Bf();const we=_f(jf),Na=-6,ju=async(r,h)=>{try{const c=await vf.stat(r);if(c.isFile())return r;if(c.isDirectory())return ju(Qe.join(r,`${h}.html`))}catch{}};function Hf(r){if(r={isCorsEnabled:!0,scheme:"app",hostname:"-",file:"index",...r},!r.directory)throw new Error("The `directory` option is required");r.directory=Qe.resolve(be.app.getAppPath(),r.directory);const h=async(c,d)=>{const f=Qe.join(r.directory,`${r.file}.html`),n=Qe.join(r.directory,decodeURIComponent(new URL(c.url).pathname)),e=Qe.relative(r.directory,n);if(!(!e.startsWith("..")&&!Qe.isAbsolute(e))){d({error:Na});return}const t=await ju(n,r.file),s=Qe.extname(n);if(!t&&s&&s!==".html"&&s!==".asar"){d({error:Na});return}d({path:t||f})};return be.protocol.registerSchemesAsPrivileged([{scheme:r.scheme,privileges:{standard:!0,secure:!0,allowServiceWorkers:!0,supportFetchAPI:!0,corsEnabled:r.isCorsEnabled}}]),be.app.on("ready",()=>{(r.partition?be.session.fromPartition(r.partition):be.session.defaultSession).protocol.registerFileProtocol(r.scheme,h)}),async(c,d)=>{const f=d?"?"+new URLSearchParams(d).toString():"";await c.loadURL(`${r.scheme}://${r.hostname}${f}`)}}var Dn={},Nn={},It={},Fa;function No(){if(Fa)return It;Fa=1,Object.defineProperty(It,"__esModule",{value:!0}),It.CancellationError=It.CancellationToken=void 0;const r=Wr;let h=class extends r.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(f){this.removeParentCancelHandler(),this._parent=f,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(f){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,f!=null&&(this.parent=f)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(f){this.cancelled?f():this.once("cancel",f)}createPromise(f){if(this.cancelled)return Promise.reject(new c);const n=()=>{if(e!=null)try{this.removeListener("cancel",e),e=null}catch{}};let e=null;return new Promise((i,t)=>{let s=null;if(e=()=>{try{s!=null&&(s(),s=null)}finally{t(new c)}},this.cancelled){e();return}this.onCancel(e),f(i,t,o=>{s=o})}).then(i=>(n(),i)).catch(i=>{throw n(),i})}removeParentCancelHandler(){const f=this._parent;f!=null&&this.parentCancelHandler!=null&&(f.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};It.CancellationToken=h;class c extends Error{constructor(){super("cancelled")}}return It.CancellationError=c,It}var Ve={},Dr={exports:{}},Nr={exports:{}},Fn,xa;function Gf(){if(xa)return Fn;xa=1;var r=1e3,h=r*60,c=h*60,d=c*24,f=d*7,n=d*365.25;Fn=function(o,u){u=u||{};var a=typeof o;if(a==="string"&&o.length>0)return e(o);if(a==="number"&&isFinite(o))return u.long?t(o):i(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function e(o){if(o=String(o),!(o.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(u){var a=parseFloat(u[1]),p=(u[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return a*n;case"weeks":case"week":case"w":return a*f;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"hrs":case"hr":case"h":return a*c;case"minutes":case"minute":case"mins":case"min":case"m":return a*h;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function i(o){var u=Math.abs(o);return u>=d?Math.round(o/d)+"d":u>=c?Math.round(o/c)+"h":u>=h?Math.round(o/h)+"m":u>=r?Math.round(o/r)+"s":o+"ms"}function t(o){var u=Math.abs(o);return u>=d?s(o,u,d,"day"):u>=c?s(o,u,c,"hour"):u>=h?s(o,u,h,"minute"):u>=r?s(o,u,r,"second"):o+" ms"}function s(o,u,a,p){var g=u>=a*1.5;return Math.round(o/a)+" "+p+(g?"s":"")}return Fn}var xn,La;function Hu(){if(La)return xn;La=1;function r(h){d.debug=d,d.default=d,d.coerce=s,d.disable=i,d.enable=n,d.enabled=t,d.humanize=Gf(),d.destroy=o,Object.keys(h).forEach(u=>{d[u]=h[u]}),d.names=[],d.skips=[],d.formatters={};function c(u){let a=0;for(let p=0;p<u.length;p++)a=(a<<5)-a+u.charCodeAt(p),a|=0;return d.colors[Math.abs(a)%d.colors.length]}d.selectColor=c;function d(u){let a,p=null,g,y;function m(..._){if(!m.enabled)return;const R=m,O=Number(new Date),I=O-(a||O);R.diff=I,R.prev=a,R.curr=O,a=O,_[0]=d.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let U=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(S,T)=>{if(S==="%%")return"%";U++;const E=d.formatters[T];if(typeof E=="function"){const M=_[U];S=E.call(R,M),_.splice(U,1),U--}return S}),d.formatArgs.call(R,_),(R.log||d.log).apply(R,_)}return m.namespace=u,m.useColors=d.useColors(),m.color=d.selectColor(u),m.extend=f,m.destroy=d.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(g!==d.namespaces&&(g=d.namespaces,y=d.enabled(u)),y),set:_=>{p=_}}),typeof d.init=="function"&&d.init(m),m}function f(u,a){const p=d(this.namespace+(typeof a>"u"?":":a)+u);return p.log=this.log,p}function n(u){d.save(u),d.namespaces=u,d.names=[],d.skips=[];const a=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(const p of a)p[0]==="-"?d.skips.push(p.slice(1)):d.names.push(p)}function e(u,a){let p=0,g=0,y=-1,m=0;for(;p<u.length;)if(g<a.length&&(a[g]===u[p]||a[g]==="*"))a[g]==="*"?(y=g,m=p,g++):(p++,g++);else if(y!==-1)g=y+1,m++,p=m;else return!1;for(;g<a.length&&a[g]==="*";)g++;return g===a.length}function i(){const u=[...d.names,...d.skips.map(a=>"-"+a)].join(",");return d.enable(""),u}function t(u){for(const a of d.skips)if(e(u,a))return!1;for(const a of d.names)if(e(u,a))return!0;return!1}function s(u){return u instanceof Error?u.stack||u.message:u}function o(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return d.enable(d.load()),d}return xn=r,xn}var $a;function Wf(){return $a||($a=1,function(r,h){h.formatArgs=d,h.save=f,h.load=n,h.useColors=c,h.storage=e(),h.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),h.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function c(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function d(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;t.splice(1,0,s,"color: inherit");let o=0,u=0;t[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&(o++,a==="%c"&&(u=o))}),t.splice(u,0,s)}h.log=console.debug||console.log||(()=>{});function f(t){try{t?h.storage.setItem("debug",t):h.storage.removeItem("debug")}catch{}}function n(){let t;try{t=h.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function e(){try{return localStorage}catch{}}r.exports=Hu()(h);const{formatters:i}=r.exports;i.j=function(t){try{return JSON.stringify(t)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}}(Nr,Nr.exports)),Nr.exports}var Fr={exports:{}},Ln,Ua;function Vf(){return Ua||(Ua=1,Ln=(r,h=process.argv)=>{const c=r.startsWith("-")?"":r.length===1?"-":"--",d=h.indexOf(c+r),f=h.indexOf("--");return d!==-1&&(f===-1||d<f)}),Ln}var $n,qa;function zf(){if(qa)return $n;qa=1;const r=_t,h=Fu,c=Vf(),{env:d}=process;let f;c("no-color")||c("no-colors")||c("color=false")||c("color=never")?f=0:(c("color")||c("colors")||c("color=true")||c("color=always"))&&(f=1),"FORCE_COLOR"in d&&(d.FORCE_COLOR==="true"?f=1:d.FORCE_COLOR==="false"?f=0:f=d.FORCE_COLOR.length===0?1:Math.min(parseInt(d.FORCE_COLOR,10),3));function n(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function e(t,s){if(f===0)return 0;if(c("color=16m")||c("color=full")||c("color=truecolor"))return 3;if(c("color=256"))return 2;if(t&&!s&&f===void 0)return 0;const o=f||0;if(d.TERM==="dumb")return o;if(process.platform==="win32"){const u=r.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in d)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(u=>u in d)||d.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in d)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(d.TEAMCITY_VERSION)?1:0;if(d.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in d){const u=parseInt((d.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(d.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(d.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(d.TERM)||"COLORTERM"in d?1:o}function i(t){const s=e(t,t&&t.isTTY);return n(s)}return $n={supportsColor:i,stdout:n(e(!0,h.isatty(1))),stderr:n(e(!0,h.isatty(2)))},$n}var ka;function Yf(){return ka||(ka=1,function(r,h){const c=Fu,d=Gr;h.init=o,h.log=i,h.formatArgs=n,h.save=t,h.load=s,h.useColors=f,h.destroy=d.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),h.colors=[6,2,3,4,5,1];try{const a=zf();a&&(a.stderr||a).level>=2&&(h.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}h.inspectOpts=Object.keys(process.env).filter(a=>/^debug_/i.test(a)).reduce((a,p)=>{const g=p.substring(6).toLowerCase().replace(/_([a-z])/g,(m,_)=>_.toUpperCase());let y=process.env[p];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),a[g]=y,a},{});function f(){return"colors"in h.inspectOpts?!!h.inspectOpts.colors:c.isatty(process.stderr.fd)}function n(a){const{namespace:p,useColors:g}=this;if(g){const y=this.color,m="\x1B[3"+(y<8?y:"8;5;"+y),_=`  ${m};1m${p} \x1B[0m`;a[0]=_+a[0].split(`
`).join(`
`+_),a.push(m+"m+"+r.exports.humanize(this.diff)+"\x1B[0m")}else a[0]=e()+p+" "+a[0]}function e(){return h.inspectOpts.hideDate?"":new Date().toISOString()+" "}function i(...a){return process.stderr.write(d.formatWithOptions(h.inspectOpts,...a)+`
`)}function t(a){a?process.env.DEBUG=a:delete process.env.DEBUG}function s(){return process.env.DEBUG}function o(a){a.inspectOpts={};const p=Object.keys(h.inspectOpts);for(let g=0;g<p.length;g++)a.inspectOpts[p[g]]=h.inspectOpts[p[g]]}r.exports=Hu()(h);const{formatters:u}=r.exports;u.o=function(a){return this.inspectOpts.colors=this.useColors,d.inspect(a,this.inspectOpts).split(`
`).map(p=>p.trim()).join(" ")},u.O=function(a){return this.inspectOpts.colors=this.useColors,d.inspect(a,this.inspectOpts)}}(Fr,Fr.exports)),Fr.exports}var Ma;function Xf(){return Ma||(Ma=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Dr.exports=Wf():Dr.exports=Yf()),Dr.exports}var xr={},Ba;function zr(){if(Ba)return xr;Ba=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.newError=r;function r(h,c){const d=new Error(h);return d.code=c,d}return xr}var Jt={},ja;function Gu(){if(ja)return Jt;ja=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.ProgressCallbackTransform=void 0;const r=wr;let h=class extends r.Transform{constructor(d,f,n){super(),this.total=d,this.cancellationToken=f,this.onProgress=n,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(d,f,n){if(this.cancellationToken.cancelled){n(new Error("cancelled"),null);return}this.transferred+=d.length,this.delta+=d.length;const e=Date.now();e>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=e+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((e-this.start)/1e3))}),this.delta=0),n(null,d)}_flush(d){if(this.cancellationToken.cancelled){d(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,d(null)}};return Jt.ProgressCallbackTransform=h,Jt}var Ha;function Jf(){if(Ha)return Ve;Ha=1,Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.DigestTransform=Ve.HttpExecutor=Ve.HttpError=void 0,Ve.createHttpError=s,Ve.parseJson=a,Ve.configureRequestOptionsFromUrl=g,Ve.configureRequestUrl=y,Ve.safeGetHeader=R,Ve.configureRequestOptions=I,Ve.safeStringifyJson=U;const r=Er,h=Xf(),c=Ze,d=wr,f=jt,n=No(),e=zr(),i=Gu(),t=(0,h.default)("electron-builder");function s(b,S=null){return new u(b.statusCode||-1,`${b.statusCode} ${b.statusMessage}`+(S==null?"":`
`+JSON.stringify(S,null,"  "))+`
Headers: `+U(b.headers),S)}const o=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class u extends Error{constructor(S,T=`HTTP error: ${o.get(S)||S}`,E=null){super(T),this.statusCode=S,this.description=E,this.name="HttpError",this.code=`HTTP_ERROR_${S}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Ve.HttpError=u;function a(b){return b.then(S=>S==null||S.length===0?null:JSON.parse(S))}class p{constructor(){this.maxRedirects=10}request(S,T=new n.CancellationToken,E){I(S);const M=E==null?void 0:JSON.stringify(E),$=M?Buffer.from(M):void 0;if($!=null){t(M);const{headers:L,...k}=S;S={method:"post",headers:{"Content-Type":"application/json","Content-Length":$.length,...L},...k}}return this.doApiRequest(S,T,L=>L.end($))}doApiRequest(S,T,E,M=0){return t.enabled&&t(`Request: ${U(S)}`),T.createPromise(($,L,k)=>{const D=this.createRequest(S,P=>{try{this.handleResponse(P,S,T,$,L,M,E)}catch(F){L(F)}});this.addErrorAndTimeoutHandlers(D,L,S.timeout),this.addRedirectHandlers(D,S,L,M,P=>{this.doApiRequest(P,T,E,M).then($).catch(L)}),E(D,L),k(()=>D.abort())})}addRedirectHandlers(S,T,E,M,$){}addErrorAndTimeoutHandlers(S,T,E=60*1e3){this.addTimeOutHandler(S,T,E),S.on("error",T),S.on("aborted",()=>{T(new Error("Request has been aborted by the server"))})}handleResponse(S,T,E,M,$,L,k){var D;if(t.enabled&&t(`Response: ${S.statusCode} ${S.statusMessage}, request options: ${U(T)}`),S.statusCode===404){$(s(S,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(S.statusCode===204){M();return}const P=(D=S.statusCode)!==null&&D!==void 0?D:0,F=P>=300&&P<400,q=R(S,"location");if(F&&q!=null){if(L>this.maxRedirects){$(this.createMaxRedirectError());return}this.doApiRequest(p.prepareRedirectUrlOptions(q,T),E,k,L).then(M).catch($);return}S.setEncoding("utf8");let K="";S.on("error",$),S.on("data",W=>K+=W),S.on("end",()=>{try{if(S.statusCode!=null&&S.statusCode>=400){const W=R(S,"content-type"),ne=W!=null&&(Array.isArray(W)?W.find(ce=>ce.includes("json"))!=null:W.includes("json"));$(s(S,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

          Data:
          ${ne?JSON.stringify(JSON.parse(K)):K}
          `))}else M(K.length===0?null:K)}catch(W){$(W)}})}async downloadToBuffer(S,T){return await T.cancellationToken.createPromise((E,M,$)=>{const L=[],k={headers:T.headers||void 0,redirect:"manual"};y(S,k),I(k),this.doDownload(k,{destination:null,options:T,onCancel:$,callback:D=>{D==null?E(Buffer.concat(L)):M(D)},responseHandler:(D,P)=>{let F=0;D.on("data",q=>{if(F+=q.length,F>524288e3){P(new Error("Maximum allowed size is 500 MB"));return}L.push(q)}),D.on("end",()=>{P(null)})}},0)})}doDownload(S,T,E){const M=this.createRequest(S,$=>{if($.statusCode>=400){T.callback(new Error(`Cannot download "${S.protocol||"https:"}//${S.hostname}${S.path}", status ${$.statusCode}: ${$.statusMessage}`));return}$.on("error",T.callback);const L=R($,"location");if(L!=null){E<this.maxRedirects?this.doDownload(p.prepareRedirectUrlOptions(L,S),T,E++):T.callback(this.createMaxRedirectError());return}T.responseHandler==null?O(T,$):T.responseHandler($,T.callback)});this.addErrorAndTimeoutHandlers(M,T.callback,S.timeout),this.addRedirectHandlers(M,S,T.callback,E,$=>{this.doDownload($,T,E++)}),M.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(S,T,E){S.on("socket",M=>{M.setTimeout(E,()=>{S.abort(),T(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(S,T){const E=g(S,{...T}),M=E.headers;if(M!=null&&M.authorization){const $=new f.URL(S);($.hostname.endsWith(".amazonaws.com")||$.searchParams.has("X-Amz-Credential"))&&delete M.authorization}return E}static retryOnServerError(S,T=3){for(let E=0;;E++)try{return S()}catch(M){if(E<T&&(M instanceof u&&M.isServerError()||M.code==="EPIPE"))continue;throw M}}}Ve.HttpExecutor=p;function g(b,S){const T=I(S);return y(new f.URL(b),T),T}function y(b,S){S.protocol=b.protocol,S.hostname=b.hostname,b.port?S.port=b.port:S.port&&delete S.port,S.path=b.pathname+b.search}class m extends d.Transform{get actual(){return this._actual}constructor(S,T="sha512",E="base64"){super(),this.expected=S,this.algorithm=T,this.encoding=E,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,r.createHash)(T)}_transform(S,T,E){this.digester.update(S),E(null,S)}_flush(S){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(T){S(T);return}S(null)}validate(){if(this._actual==null)throw(0,e.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,e.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Ve.DigestTransform=m;function _(b,S,T){return b!=null&&S!=null&&b!==S?(T(new Error(`checksum mismatch: expected ${S} but got ${b} (X-Checksum-Sha2 header)`)),!1):!0}function R(b,S){const T=b.headers[S];return T==null?null:Array.isArray(T)?T.length===0?null:T[T.length-1]:T}function O(b,S){if(!_(R(S,"X-Checksum-Sha2"),b.options.sha2,b.callback))return;const T=[];if(b.options.onProgress!=null){const L=R(S,"content-length");L!=null&&T.push(new i.ProgressCallbackTransform(parseInt(L,10),b.options.cancellationToken,b.options.onProgress))}const E=b.options.sha512;E!=null?T.push(new m(E,"sha512",E.length===128&&!E.includes("+")&&!E.includes("Z")&&!E.includes("=")?"hex":"base64")):b.options.sha2!=null&&T.push(new m(b.options.sha2,"sha256","hex"));const M=(0,c.createWriteStream)(b.destination);T.push(M);let $=S;for(const L of T)L.on("error",k=>{M.close(),b.options.cancellationToken.cancelled||b.callback(k)}),$=$.pipe(L);M.on("finish",()=>{M.close(b.callback)})}function I(b,S,T){T!=null&&(b.method=T),b.headers={...b.headers};const E=b.headers;return S!=null&&(E.authorization=S.startsWith("Basic")||S.startsWith("Bearer")?S:`token ${S}`),E["User-Agent"]==null&&(E["User-Agent"]="electron-builder"),(T==null||T==="GET"||E["Cache-Control"]==null)&&(E["Cache-Control"]="no-cache"),b.protocol==null&&process.versions.electron!=null&&(b.protocol="https:"),b}function U(b,S){return JSON.stringify(b,(T,E)=>T.endsWith("Authorization")||T.endsWith("authorization")||T.endsWith("Password")||T.endsWith("PASSWORD")||T.endsWith("Token")||T.includes("password")||T.includes("token")||S!=null&&S.has(T)?"<stripped sensitive data>":E,2)}return Ve}var Kt={},Ga;function Kf(){if(Ga)return Kt;Ga=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.githubUrl=r,Kt.getS3LikeProviderBaseUrl=h;function r(n,e="github.com"){return`${n.protocol||"https"}://${n.host||e}`}function h(n){const e=n.provider;if(e==="s3")return c(n);if(e==="spaces")return f(n);throw new Error(`Not supported provider: ${e}`)}function c(n){let e;if(n.accelerate==!0)e=`https://${n.bucket}.s3-accelerate.amazonaws.com`;else if(n.endpoint!=null)e=`${n.endpoint}/${n.bucket}`;else if(n.bucket.includes(".")){if(n.region==null)throw new Error(`Bucket name "${n.bucket}" includes a dot, but S3 region is missing`);n.region==="us-east-1"?e=`https://s3.amazonaws.com/${n.bucket}`:e=`https://s3-${n.region}.amazonaws.com/${n.bucket}`}else n.region==="cn-north-1"?e=`https://${n.bucket}.s3.${n.region}.amazonaws.com.cn`:e=`https://${n.bucket}.s3.amazonaws.com`;return d(e,n.path)}function d(n,e){return e!=null&&e.length>0&&(e.startsWith("/")||(n+="/"),n+=e),n}function f(n){if(n.name==null)throw new Error("name is missing");if(n.region==null)throw new Error("region is missing");return d(`https://${n.name}.${n.region}.digitaloceanspaces.com`,n.path)}return Kt}var Lr={},Wa;function Qf(){if(Wa)return Lr;Wa=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.parseDn=r;function r(h){let c=!1,d=null,f="",n=0;h=h.trim();const e=new Map;for(let i=0;i<=h.length;i++){if(i===h.length){d!==null&&e.set(d,f);break}const t=h[i];if(c){if(t==='"'){c=!1;continue}}else{if(t==='"'){c=!0;continue}if(t==="\\"){i++;const s=parseInt(h.slice(i,i+2),16);Number.isNaN(s)?f+=h[i]:(i++,f+=String.fromCharCode(s));continue}if(d===null&&t==="="){d=f,f="";continue}if(t===","||t===";"||t==="+"){d!==null&&e.set(d,f),d=null,f="";continue}}if(t===" "&&!c){if(f.length===0)continue;if(i>n){let s=i;for(;h[s]===" ";)s++;n=s}if(n>=h.length||h[n]===","||h[n]===";"||d===null&&h[n]==="="||d!==null&&h[n]==="+"){i=n-1;continue}}f+=t}return e}return Lr}var Pt={},Va;function Zf(){if(Va)return Pt;Va=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.nil=Pt.UUID=void 0;const r=Er,h=zr(),c="options.name must be either a string or a Buffer",d=(0,r.randomBytes)(16);d[0]=d[0]|1;const f={},n=[];for(let u=0;u<256;u++){const a=(u+256).toString(16).substr(1);f[a]=u,n[u]=a}class e{constructor(a){this.ascii=null,this.binary=null;const p=e.check(a);if(!p)throw new Error("not a UUID");this.version=p.version,p.format==="ascii"?this.ascii=a:this.binary=a}static v5(a,p){return s(a,"sha1",80,p)}toString(){return this.ascii==null&&(this.ascii=o(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(a,p=0){if(typeof a=="string")return a=a.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(a)?a==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(f[a[14]+a[15]]&240)>>4,variant:i((f[a[19]+a[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(a)){if(a.length<p+16)return!1;let g=0;for(;g<16&&a[p+g]===0;g++);return g===16?{version:void 0,variant:"nil",format:"binary"}:{version:(a[p+6]&240)>>4,variant:i((a[p+8]&224)>>5),format:"binary"}}throw(0,h.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(a){const p=Buffer.allocUnsafe(16);let g=0;for(let y=0;y<16;y++)p[y]=f[a[g++]+a[g++]],(y===3||y===5||y===7||y===9)&&(g+=1);return p}}Pt.UUID=e,e.OID=e.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function i(u){switch(u){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var t;(function(u){u[u.ASCII=0]="ASCII",u[u.BINARY=1]="BINARY",u[u.OBJECT=2]="OBJECT"})(t||(t={}));function s(u,a,p,g,y=t.ASCII){const m=(0,r.createHash)(a);if(typeof u!="string"&&!Buffer.isBuffer(u))throw(0,h.newError)(c,"ERR_INVALID_UUID_NAME");m.update(g),m.update(u);const R=m.digest();let O;switch(y){case t.BINARY:R[6]=R[6]&15|p,R[8]=R[8]&63|128,O=R;break;case t.OBJECT:R[6]=R[6]&15|p,R[8]=R[8]&63|128,O=new e(R);break;default:O=n[R[0]]+n[R[1]]+n[R[2]]+n[R[3]]+"-"+n[R[4]]+n[R[5]]+"-"+n[R[6]&15|p]+n[R[7]]+"-"+n[R[8]&63|128]+n[R[9]]+"-"+n[R[10]]+n[R[11]]+n[R[12]]+n[R[13]]+n[R[14]]+n[R[15]];break}return O}function o(u){return n[u[0]]+n[u[1]]+n[u[2]]+n[u[3]]+"-"+n[u[4]]+n[u[5]]+"-"+n[u[6]]+n[u[7]]+"-"+n[u[8]]+n[u[9]]+"-"+n[u[10]]+n[u[11]]+n[u[12]]+n[u[13]]+n[u[14]]+n[u[15]]}return Pt.nil=new e("00000000-0000-0000-0000-000000000000"),Pt}var qt={},Un={},za;function ed(){return za||(za=1,function(r){(function(h){h.parser=function(A,v){return new d(A,v)},h.SAXParser=d,h.SAXStream=o,h.createStream=s,h.MAX_BUFFER_LENGTH=64*1024;var c=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];h.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function d(A,v){if(!(this instanceof d))return new d(A,v);var j=this;n(j),j.q=j.c="",j.bufferCheckPosition=h.MAX_BUFFER_LENGTH,j.opt=v||{},j.opt.lowercase=j.opt.lowercase||j.opt.lowercasetags,j.looseCase=j.opt.lowercase?"toLowerCase":"toUpperCase",j.tags=[],j.closed=j.closedRoot=j.sawRoot=!1,j.tag=j.error=null,j.strict=!!A,j.noscript=!!(A||j.opt.noscript),j.state=E.BEGIN,j.strictEntities=j.opt.strictEntities,j.ENTITIES=j.strictEntities?Object.create(h.XML_ENTITIES):Object.create(h.ENTITIES),j.attribList=[],j.opt.xmlns&&(j.ns=Object.create(y)),j.opt.unquotedAttributeValues===void 0&&(j.opt.unquotedAttributeValues=!A),j.trackPosition=j.opt.position!==!1,j.trackPosition&&(j.position=j.line=j.column=0),$(j,"onready")}Object.create||(Object.create=function(A){function v(){}v.prototype=A;var j=new v;return j}),Object.keys||(Object.keys=function(A){var v=[];for(var j in A)A.hasOwnProperty(j)&&v.push(j);return v});function f(A){for(var v=Math.max(h.MAX_BUFFER_LENGTH,10),j=0,N=0,le=c.length;N<le;N++){var me=A[c[N]].length;if(me>v)switch(c[N]){case"textNode":k(A);break;case"cdata":L(A,"oncdata",A.cdata),A.cdata="";break;case"script":L(A,"onscript",A.script),A.script="";break;default:P(A,"Max buffer length exceeded: "+c[N])}j=Math.max(j,me)}var pe=h.MAX_BUFFER_LENGTH-j;A.bufferCheckPosition=pe+A.position}function n(A){for(var v=0,j=c.length;v<j;v++)A[c[v]]=""}function e(A){k(A),A.cdata!==""&&(L(A,"oncdata",A.cdata),A.cdata=""),A.script!==""&&(L(A,"onscript",A.script),A.script="")}d.prototype={end:function(){F(this)},write:ve,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){e(this)}};var i;try{i=require("stream").Stream}catch{i=function(){}}i||(i=function(){});var t=h.EVENTS.filter(function(A){return A!=="error"&&A!=="end"});function s(A,v){return new o(A,v)}function o(A,v){if(!(this instanceof o))return new o(A,v);i.apply(this),this._parser=new d(A,v),this.writable=!0,this.readable=!0;var j=this;this._parser.onend=function(){j.emit("end")},this._parser.onerror=function(N){j.emit("error",N),j._parser.error=null},this._decoder=null,t.forEach(function(N){Object.defineProperty(j,"on"+N,{get:function(){return j._parser["on"+N]},set:function(le){if(!le)return j.removeAllListeners(N),j._parser["on"+N]=le,le;j.on(N,le)},enumerable:!0,configurable:!1})})}o.prototype=Object.create(i.prototype,{constructor:{value:o}}),o.prototype.write=function(A){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(A)){if(!this._decoder){var v=Ef.StringDecoder;this._decoder=new v("utf8")}A=this._decoder.write(A)}return this._parser.write(A.toString()),this.emit("data",A),!0},o.prototype.end=function(A){return A&&A.length&&this.write(A),this._parser.end(),!0},o.prototype.on=function(A,v){var j=this;return!j._parser["on"+A]&&t.indexOf(A)!==-1&&(j._parser["on"+A]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,A),j.emit.apply(j,N)}),i.prototype.on.call(j,A,v)};var u="[CDATA[",a="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",y={xml:p,xmlns:g},m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,R=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(A){return A===" "||A===`
`||A==="\r"||A==="	"}function U(A){return A==='"'||A==="'"}function b(A){return A===">"||I(A)}function S(A,v){return A.test(v)}function T(A,v){return!S(A,v)}var E=0;h.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},h.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},h.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(h.ENTITIES).forEach(function(A){var v=h.ENTITIES[A],j=typeof v=="number"?String.fromCharCode(v):v;h.ENTITIES[A]=j});for(var M in h.STATE)h.STATE[h.STATE[M]]=M;E=h.STATE;function $(A,v,j){A[v]&&A[v](j)}function L(A,v,j){A.textNode&&k(A),$(A,v,j)}function k(A){A.textNode=D(A.opt,A.textNode),A.textNode&&$(A,"ontext",A.textNode),A.textNode=""}function D(A,v){return A.trim&&(v=v.trim()),A.normalize&&(v=v.replace(/\s+/g," ")),v}function P(A,v){return k(A),A.trackPosition&&(v+=`
Line: `+A.line+`
Column: `+A.column+`
Char: `+A.c),v=new Error(v),A.error=v,$(A,"onerror",v),A}function F(A){return A.sawRoot&&!A.closedRoot&&q(A,"Unclosed root tag"),A.state!==E.BEGIN&&A.state!==E.BEGIN_WHITESPACE&&A.state!==E.TEXT&&P(A,"Unexpected end"),k(A),A.c="",A.closed=!0,$(A,"onend"),d.call(A,A.strict,A.opt),A}function q(A,v){if(typeof A!="object"||!(A instanceof d))throw new Error("bad call to strictFail");A.strict&&P(A,v)}function K(A){A.strict||(A.tagName=A.tagName[A.looseCase]());var v=A.tags[A.tags.length-1]||A,j=A.tag={name:A.tagName,attributes:{}};A.opt.xmlns&&(j.ns=v.ns),A.attribList.length=0,L(A,"onopentagstart",j)}function W(A,v){var j=A.indexOf(":"),N=j<0?["",A]:A.split(":"),le=N[0],me=N[1];return v&&A==="xmlns"&&(le="xmlns",me=""),{prefix:le,local:me}}function ne(A){if(A.strict||(A.attribName=A.attribName[A.looseCase]()),A.attribList.indexOf(A.attribName)!==-1||A.tag.attributes.hasOwnProperty(A.attribName)){A.attribName=A.attribValue="";return}if(A.opt.xmlns){var v=W(A.attribName,!0),j=v.prefix,N=v.local;if(j==="xmlns")if(N==="xml"&&A.attribValue!==p)q(A,"xml: prefix must be bound to "+p+`
Actual: `+A.attribValue);else if(N==="xmlns"&&A.attribValue!==g)q(A,"xmlns: prefix must be bound to "+g+`
Actual: `+A.attribValue);else{var le=A.tag,me=A.tags[A.tags.length-1]||A;le.ns===me.ns&&(le.ns=Object.create(me.ns)),le.ns[N]=A.attribValue}A.attribList.push([A.attribName,A.attribValue])}else A.tag.attributes[A.attribName]=A.attribValue,L(A,"onattribute",{name:A.attribName,value:A.attribValue});A.attribName=A.attribValue=""}function ce(A,v){if(A.opt.xmlns){var j=A.tag,N=W(A.tagName);j.prefix=N.prefix,j.local=N.local,j.uri=j.ns[N.prefix]||"",j.prefix&&!j.uri&&(q(A,"Unbound namespace prefix: "+JSON.stringify(A.tagName)),j.uri=N.prefix);var le=A.tags[A.tags.length-1]||A;j.ns&&le.ns!==j.ns&&Object.keys(j.ns).forEach(function(B){L(A,"onopennamespace",{prefix:B,uri:j.ns[B]})});for(var me=0,pe=A.attribList.length;me<pe;me++){var Se=A.attribList[me],Ee=Se[0],Ue=Se[1],Pe=W(Ee,!0),Ge=Pe.prefix,At=Pe.local,ft=Ge===""?"":j.ns[Ge]||"",l={name:Ee,value:Ue,prefix:Ge,local:At,uri:ft};Ge&&Ge!=="xmlns"&&!ft&&(q(A,"Unbound namespace prefix: "+JSON.stringify(Ge)),l.uri=Ge),A.tag.attributes[Ee]=l,L(A,"onattribute",l)}A.attribList.length=0}A.tag.isSelfClosing=!!v,A.sawRoot=!0,A.tags.push(A.tag),L(A,"onopentag",A.tag),v||(!A.noscript&&A.tagName.toLowerCase()==="script"?A.state=E.SCRIPT:A.state=E.TEXT,A.tag=null,A.tagName=""),A.attribName=A.attribValue="",A.attribList.length=0}function ue(A){if(!A.tagName){q(A,"Weird empty close tag."),A.textNode+="</>",A.state=E.TEXT;return}if(A.script){if(A.tagName!=="script"){A.script+="</"+A.tagName+">",A.tagName="",A.state=E.SCRIPT;return}L(A,"onscript",A.script),A.script=""}var v=A.tags.length,j=A.tagName;A.strict||(j=j[A.looseCase]());for(var N=j;v--;){var le=A.tags[v];if(le.name!==N)q(A,"Unexpected close tag");else break}if(v<0){q(A,"Unmatched closing tag: "+A.tagName),A.textNode+="</"+A.tagName+">",A.state=E.TEXT;return}A.tagName=j;for(var me=A.tags.length;me-- >v;){var pe=A.tag=A.tags.pop();A.tagName=A.tag.name,L(A,"onclosetag",A.tagName);var Se={};for(var Ee in pe.ns)Se[Ee]=pe.ns[Ee];var Ue=A.tags[A.tags.length-1]||A;A.opt.xmlns&&pe.ns!==Ue.ns&&Object.keys(pe.ns).forEach(function(Pe){var Ge=pe.ns[Pe];L(A,"onclosenamespace",{prefix:Pe,uri:Ge})})}v===0&&(A.closedRoot=!0),A.tagName=A.attribValue=A.attribName="",A.attribList.length=0,A.state=E.TEXT}function ie(A){var v=A.entity,j=v.toLowerCase(),N,le="";return A.ENTITIES[v]?A.ENTITIES[v]:A.ENTITIES[j]?A.ENTITIES[j]:(v=j,v.charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),N=parseInt(v,16),le=N.toString(16)):(v=v.slice(1),N=parseInt(v,10),le=N.toString(10))),v=v.replace(/^0+/,""),isNaN(N)||le.toLowerCase()!==v?(q(A,"Invalid character entity"),"&"+A.entity+";"):String.fromCodePoint(N))}function Re(A,v){v==="<"?(A.state=E.OPEN_WAKA,A.startTagPosition=A.position):I(v)||(q(A,"Non-whitespace before first tag."),A.textNode=v,A.state=E.TEXT)}function J(A,v){var j="";return v<A.length&&(j=A.charAt(v)),j}function ve(A){var v=this;if(this.error)throw this.error;if(v.closed)return P(v,"Cannot write after close. Assign an onready handler.");if(A===null)return F(v);typeof A=="object"&&(A=A.toString());for(var j=0,N="";N=J(A,j++),v.c=N,!!N;)switch(v.trackPosition&&(v.position++,N===`
`?(v.line++,v.column=0):v.column++),v.state){case E.BEGIN:if(v.state=E.BEGIN_WHITESPACE,N==="\uFEFF")continue;Re(v,N);continue;case E.BEGIN_WHITESPACE:Re(v,N);continue;case E.TEXT:if(v.sawRoot&&!v.closedRoot){for(var le=j-1;N&&N!=="<"&&N!=="&";)N=J(A,j++),N&&v.trackPosition&&(v.position++,N===`
`?(v.line++,v.column=0):v.column++);v.textNode+=A.substring(le,j-1)}N==="<"&&!(v.sawRoot&&v.closedRoot&&!v.strict)?(v.state=E.OPEN_WAKA,v.startTagPosition=v.position):(!I(N)&&(!v.sawRoot||v.closedRoot)&&q(v,"Text data outside of root node."),N==="&"?v.state=E.TEXT_ENTITY:v.textNode+=N);continue;case E.SCRIPT:N==="<"?v.state=E.SCRIPT_ENDING:v.script+=N;continue;case E.SCRIPT_ENDING:N==="/"?v.state=E.CLOSE_TAG:(v.script+="<"+N,v.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(N==="!")v.state=E.SGML_DECL,v.sgmlDecl="";else if(!I(N))if(S(m,N))v.state=E.OPEN_TAG,v.tagName=N;else if(N==="/")v.state=E.CLOSE_TAG,v.tagName="";else if(N==="?")v.state=E.PROC_INST,v.procInstName=v.procInstBody="";else{if(q(v,"Unencoded <"),v.startTagPosition+1<v.position){var me=v.position-v.startTagPosition;N=new Array(me).join(" ")+N}v.textNode+="<"+N,v.state=E.TEXT}continue;case E.SGML_DECL:if(v.sgmlDecl+N==="--"){v.state=E.COMMENT,v.comment="",v.sgmlDecl="";continue}v.doctype&&v.doctype!==!0&&v.sgmlDecl?(v.state=E.DOCTYPE_DTD,v.doctype+="<!"+v.sgmlDecl+N,v.sgmlDecl=""):(v.sgmlDecl+N).toUpperCase()===u?(L(v,"onopencdata"),v.state=E.CDATA,v.sgmlDecl="",v.cdata=""):(v.sgmlDecl+N).toUpperCase()===a?(v.state=E.DOCTYPE,(v.doctype||v.sawRoot)&&q(v,"Inappropriately located doctype declaration"),v.doctype="",v.sgmlDecl=""):N===">"?(L(v,"onsgmldeclaration",v.sgmlDecl),v.sgmlDecl="",v.state=E.TEXT):(U(N)&&(v.state=E.SGML_DECL_QUOTED),v.sgmlDecl+=N);continue;case E.SGML_DECL_QUOTED:N===v.q&&(v.state=E.SGML_DECL,v.q=""),v.sgmlDecl+=N;continue;case E.DOCTYPE:N===">"?(v.state=E.TEXT,L(v,"ondoctype",v.doctype),v.doctype=!0):(v.doctype+=N,N==="["?v.state=E.DOCTYPE_DTD:U(N)&&(v.state=E.DOCTYPE_QUOTED,v.q=N));continue;case E.DOCTYPE_QUOTED:v.doctype+=N,N===v.q&&(v.q="",v.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:N==="]"?(v.doctype+=N,v.state=E.DOCTYPE):N==="<"?(v.state=E.OPEN_WAKA,v.startTagPosition=v.position):U(N)?(v.doctype+=N,v.state=E.DOCTYPE_DTD_QUOTED,v.q=N):v.doctype+=N;continue;case E.DOCTYPE_DTD_QUOTED:v.doctype+=N,N===v.q&&(v.state=E.DOCTYPE_DTD,v.q="");continue;case E.COMMENT:N==="-"?v.state=E.COMMENT_ENDING:v.comment+=N;continue;case E.COMMENT_ENDING:N==="-"?(v.state=E.COMMENT_ENDED,v.comment=D(v.opt,v.comment),v.comment&&L(v,"oncomment",v.comment),v.comment=""):(v.comment+="-"+N,v.state=E.COMMENT);continue;case E.COMMENT_ENDED:N!==">"?(q(v,"Malformed comment"),v.comment+="--"+N,v.state=E.COMMENT):v.doctype&&v.doctype!==!0?v.state=E.DOCTYPE_DTD:v.state=E.TEXT;continue;case E.CDATA:N==="]"?v.state=E.CDATA_ENDING:v.cdata+=N;continue;case E.CDATA_ENDING:N==="]"?v.state=E.CDATA_ENDING_2:(v.cdata+="]"+N,v.state=E.CDATA);continue;case E.CDATA_ENDING_2:N===">"?(v.cdata&&L(v,"oncdata",v.cdata),L(v,"onclosecdata"),v.cdata="",v.state=E.TEXT):N==="]"?v.cdata+="]":(v.cdata+="]]"+N,v.state=E.CDATA);continue;case E.PROC_INST:N==="?"?v.state=E.PROC_INST_ENDING:I(N)?v.state=E.PROC_INST_BODY:v.procInstName+=N;continue;case E.PROC_INST_BODY:if(!v.procInstBody&&I(N))continue;N==="?"?v.state=E.PROC_INST_ENDING:v.procInstBody+=N;continue;case E.PROC_INST_ENDING:N===">"?(L(v,"onprocessinginstruction",{name:v.procInstName,body:v.procInstBody}),v.procInstName=v.procInstBody="",v.state=E.TEXT):(v.procInstBody+="?"+N,v.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:S(_,N)?v.tagName+=N:(K(v),N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:(I(N)||q(v,"Invalid character in tag name"),v.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:N===">"?(ce(v,!0),ue(v)):(q(v,"Forward-slash in opening tag not followed by >"),v.state=E.ATTRIB);continue;case E.ATTRIB:if(I(N))continue;N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:S(m,N)?(v.attribName=N,v.attribValue="",v.state=E.ATTRIB_NAME):q(v,"Invalid attribute name");continue;case E.ATTRIB_NAME:N==="="?v.state=E.ATTRIB_VALUE:N===">"?(q(v,"Attribute without value"),v.attribValue=v.attribName,ne(v),ce(v)):I(N)?v.state=E.ATTRIB_NAME_SAW_WHITE:S(_,N)?v.attribName+=N:q(v,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(N==="=")v.state=E.ATTRIB_VALUE;else{if(I(N))continue;q(v,"Attribute without value"),v.tag.attributes[v.attribName]="",v.attribValue="",L(v,"onattribute",{name:v.attribName,value:""}),v.attribName="",N===">"?ce(v):S(m,N)?(v.attribName=N,v.state=E.ATTRIB_NAME):(q(v,"Invalid attribute name"),v.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(I(N))continue;U(N)?(v.q=N,v.state=E.ATTRIB_VALUE_QUOTED):(v.opt.unquotedAttributeValues||P(v,"Unquoted attribute value"),v.state=E.ATTRIB_VALUE_UNQUOTED,v.attribValue=N);continue;case E.ATTRIB_VALUE_QUOTED:if(N!==v.q){N==="&"?v.state=E.ATTRIB_VALUE_ENTITY_Q:v.attribValue+=N;continue}ne(v),v.q="",v.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:I(N)?v.state=E.ATTRIB:N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:S(m,N)?(q(v,"No whitespace between attributes"),v.attribName=N,v.attribValue="",v.state=E.ATTRIB_NAME):q(v,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!b(N)){N==="&"?v.state=E.ATTRIB_VALUE_ENTITY_U:v.attribValue+=N;continue}ne(v),N===">"?ce(v):v.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(v.tagName)N===">"?ue(v):S(_,N)?v.tagName+=N:v.script?(v.script+="</"+v.tagName,v.tagName="",v.state=E.SCRIPT):(I(N)||q(v,"Invalid tagname in closing tag"),v.state=E.CLOSE_TAG_SAW_WHITE);else{if(I(N))continue;T(m,N)?v.script?(v.script+="</"+N,v.state=E.SCRIPT):q(v,"Invalid tagname in closing tag."):v.tagName=N}continue;case E.CLOSE_TAG_SAW_WHITE:if(I(N))continue;N===">"?ue(v):q(v,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var pe,Se;switch(v.state){case E.TEXT_ENTITY:pe=E.TEXT,Se="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:pe=E.ATTRIB_VALUE_QUOTED,Se="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:pe=E.ATTRIB_VALUE_UNQUOTED,Se="attribValue";break}if(N===";"){var Ee=ie(v);v.opt.unparsedEntities&&!Object.values(h.XML_ENTITIES).includes(Ee)?(v.entity="",v.state=pe,v.write(Ee)):(v[Se]+=Ee,v.entity="",v.state=pe)}else S(v.entity.length?O:R,N)?v.entity+=N:(q(v,"Invalid character in entity name"),v[Se]+="&"+v.entity+N,v.entity="",v.state=pe);continue;default:throw new Error(v,"Unknown state: "+v.state)}return v.position>=v.bufferCheckPosition&&f(v),v}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var A=String.fromCharCode,v=Math.floor,j=function(){var N=16384,le=[],me,pe,Se=-1,Ee=arguments.length;if(!Ee)return"";for(var Ue="";++Se<Ee;){var Pe=Number(arguments[Se]);if(!isFinite(Pe)||Pe<0||Pe>1114111||v(Pe)!==Pe)throw RangeError("Invalid code point: "+Pe);Pe<=65535?le.push(Pe):(Pe-=65536,me=(Pe>>10)+55296,pe=Pe%1024+56320,le.push(me,pe)),(Se+1===Ee||le.length>N)&&(Ue+=A.apply(null,le),le.length=0)}return Ue};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:j,configurable:!0,writable:!0}):String.fromCodePoint=j}()})(r)}(Un)),Un}var Ya;function td(){if(Ya)return qt;Ya=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.XElement=void 0,qt.parseXml=e;const r=ed(),h=zr();class c{constructor(t){if(this.name=t,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!t)throw(0,h.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!f(t))throw(0,h.newError)(`Invalid element name: ${t}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(t){const s=this.attributes===null?null:this.attributes[t];if(s==null)throw(0,h.newError)(`No attribute "${t}"`,"ERR_XML_MISSED_ATTRIBUTE");return s}removeAttribute(t){this.attributes!==null&&delete this.attributes[t]}element(t,s=!1,o=null){const u=this.elementOrNull(t,s);if(u===null)throw(0,h.newError)(o||`No element "${t}"`,"ERR_XML_MISSED_ELEMENT");return u}elementOrNull(t,s=!1){if(this.elements===null)return null;for(const o of this.elements)if(n(o,t,s))return o;return null}getElements(t,s=!1){return this.elements===null?[]:this.elements.filter(o=>n(o,t,s))}elementValueOrEmpty(t,s=!1){const o=this.elementOrNull(t,s);return o===null?"":o.value}}qt.XElement=c;const d=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function f(i){return d.test(i)}function n(i,t,s){const o=i.name;return o===t||s===!0&&o.length===t.length&&o.toLowerCase()===t.toLowerCase()}function e(i){let t=null;const s=r.parser(!0,{}),o=[];return s.onopentag=u=>{const a=new c(u.name);if(a.attributes=u.attributes,t===null)t=a;else{const p=o[o.length-1];p.elements==null&&(p.elements=[]),p.elements.push(a)}o.push(a)},s.onclosetag=()=>{o.pop()},s.ontext=u=>{o.length>0&&(o[o.length-1].value=u)},s.oncdata=u=>{const a=o[o.length-1];a.value=u,a.isCData=!0},s.onerror=u=>{throw u},s.write(i),t}return qt}var Qt={},Xa;function rd(){if(Xa)return Qt;Xa=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.MemoLazy=void 0;let r=class{constructor(d,f){this.selector=d,this.creator=f,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const d=this.selector();if(this._value!==void 0&&h(this.selected,d))return this._value;this.selected=d;const f=this.creator(d);return this.value=f,f}set value(d){this._value=d}};Qt.MemoLazy=r;function h(c,d){if(typeof c=="object"&&c!==null&&(typeof d=="object"&&d!==null)){const e=Object.keys(c),i=Object.keys(d);return e.length===i.length&&e.every(t=>h(c[t],d[t]))}return c===d}return Qt}var $r={},Ja;function nd(){if(Ja)return $r;Ja=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.retry=h;const r=No();async function h(c,d,f,n=0,e=0,i){var t;const s=new r.CancellationToken;try{return await c()}catch(o){if((!((t=i==null?void 0:i(o))!==null&&t!==void 0)||t)&&d>0&&!s.cancelled)return await new Promise(u=>setTimeout(u,f+n*e)),await h(c,d-1,f,n,e+1,i);throw o}}return $r}var Ka;function He(){return Ka||(Ka=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.CURRENT_APP_PACKAGE_FILE_NAME=r.CURRENT_APP_INSTALLER_FILE_NAME=r.retry=r.MemoLazy=r.newError=r.XElement=r.parseXml=r.ProgressCallbackTransform=r.UUID=r.parseDn=r.githubUrl=r.getS3LikeProviderBaseUrl=r.configureRequestUrl=r.parseJson=r.safeStringifyJson=r.configureRequestOptionsFromUrl=r.configureRequestOptions=r.safeGetHeader=r.DigestTransform=r.HttpExecutor=r.createHttpError=r.HttpError=r.CancellationError=r.CancellationToken=void 0,r.asArray=u;var h=No();Object.defineProperty(r,"CancellationToken",{enumerable:!0,get:function(){return h.CancellationToken}}),Object.defineProperty(r,"CancellationError",{enumerable:!0,get:function(){return h.CancellationError}});var c=Jf();Object.defineProperty(r,"HttpError",{enumerable:!0,get:function(){return c.HttpError}}),Object.defineProperty(r,"createHttpError",{enumerable:!0,get:function(){return c.createHttpError}}),Object.defineProperty(r,"HttpExecutor",{enumerable:!0,get:function(){return c.HttpExecutor}}),Object.defineProperty(r,"DigestTransform",{enumerable:!0,get:function(){return c.DigestTransform}}),Object.defineProperty(r,"safeGetHeader",{enumerable:!0,get:function(){return c.safeGetHeader}}),Object.defineProperty(r,"configureRequestOptions",{enumerable:!0,get:function(){return c.configureRequestOptions}}),Object.defineProperty(r,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return c.configureRequestOptionsFromUrl}}),Object.defineProperty(r,"safeStringifyJson",{enumerable:!0,get:function(){return c.safeStringifyJson}}),Object.defineProperty(r,"parseJson",{enumerable:!0,get:function(){return c.parseJson}}),Object.defineProperty(r,"configureRequestUrl",{enumerable:!0,get:function(){return c.configureRequestUrl}});var d=Kf();Object.defineProperty(r,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return d.getS3LikeProviderBaseUrl}}),Object.defineProperty(r,"githubUrl",{enumerable:!0,get:function(){return d.githubUrl}});var f=Qf();Object.defineProperty(r,"parseDn",{enumerable:!0,get:function(){return f.parseDn}});var n=Zf();Object.defineProperty(r,"UUID",{enumerable:!0,get:function(){return n.UUID}});var e=Gu();Object.defineProperty(r,"ProgressCallbackTransform",{enumerable:!0,get:function(){return e.ProgressCallbackTransform}});var i=td();Object.defineProperty(r,"parseXml",{enumerable:!0,get:function(){return i.parseXml}}),Object.defineProperty(r,"XElement",{enumerable:!0,get:function(){return i.XElement}});var t=zr();Object.defineProperty(r,"newError",{enumerable:!0,get:function(){return t.newError}});var s=rd();Object.defineProperty(r,"MemoLazy",{enumerable:!0,get:function(){return s.MemoLazy}});var o=nd();Object.defineProperty(r,"retry",{enumerable:!0,get:function(){return o.retry}}),r.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",r.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function u(a){return a==null?[]:Array.isArray(a)?a:[a]}}(Nn)),Nn}var qn={},Ur={},Qa;function et(){return Qa||(Qa=1,Ur.fromCallback=function(r){return Object.defineProperty(function(...h){if(typeof h[h.length-1]=="function")r.apply(this,h);else return new Promise((c,d)=>{h.push((f,n)=>f!=null?d(f):c(n)),r.apply(this,h)})},"name",{value:r.name})},Ur.fromPromise=function(r){return Object.defineProperty(function(...h){const c=h[h.length-1];if(typeof c!="function")return r.apply(this,h);h.pop(),r.apply(this,h).then(d=>c(null,d),c)},"name",{value:r.name})}),Ur}var kn,Za;function id(){if(Za)return kn;Za=1;var r=wf,h=process.cwd,c=null,d=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return c||(c=h.call(process)),c};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var f=process.chdir;process.chdir=function(e){c=null,f.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,f)}kn=n;function n(e){r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&i(e),e.lutimes||t(e),e.chown=u(e.chown),e.fchown=u(e.fchown),e.lchown=u(e.lchown),e.chmod=s(e.chmod),e.fchmod=s(e.fchmod),e.lchmod=s(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=o(e.chmodSync),e.fchmodSync=o(e.fchmodSync),e.lchmodSync=o(e.lchmodSync),e.stat=p(e.stat),e.fstat=p(e.fstat),e.lstat=p(e.lstat),e.statSync=g(e.statSync),e.fstatSync=g(e.fstatSync),e.lstatSync=g(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(m,_,R){R&&process.nextTick(R)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(m,_,R,O){O&&process.nextTick(O)},e.lchownSync=function(){}),d==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(m){function _(R,O,I){var U=Date.now(),b=0;m(R,O,function S(T){if(T&&(T.code==="EACCES"||T.code==="EPERM"||T.code==="EBUSY")&&Date.now()-U<6e4){setTimeout(function(){e.stat(O,function(E,M){E&&E.code==="ENOENT"?m(R,O,S):I(T)})},b),b<100&&(b+=10);return}I&&I(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(_,m),_}(e.rename)),e.read=typeof e.read!="function"?e.read:function(m){function _(R,O,I,U,b,S){var T;if(S&&typeof S=="function"){var E=0;T=function(M,$,L){if(M&&M.code==="EAGAIN"&&E<10)return E++,m.call(e,R,O,I,U,b,T);S.apply(this,arguments)}}return m.call(e,R,O,I,U,b,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(_,m),_}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(m){return function(_,R,O,I,U){for(var b=0;;)try{return m.call(e,_,R,O,I,U)}catch(S){if(S.code==="EAGAIN"&&b<10){b++;continue}throw S}}}(e.readSync);function i(m){m.lchmod=function(_,R,O){m.open(_,r.O_WRONLY|r.O_SYMLINK,R,function(I,U){if(I){O&&O(I);return}m.fchmod(U,R,function(b){m.close(U,function(S){O&&O(b||S)})})})},m.lchmodSync=function(_,R){var O=m.openSync(_,r.O_WRONLY|r.O_SYMLINK,R),I=!0,U;try{U=m.fchmodSync(O,R),I=!1}finally{if(I)try{m.closeSync(O)}catch{}else m.closeSync(O)}return U}}function t(m){r.hasOwnProperty("O_SYMLINK")&&m.futimes?(m.lutimes=function(_,R,O,I){m.open(_,r.O_SYMLINK,function(U,b){if(U){I&&I(U);return}m.futimes(b,R,O,function(S){m.close(b,function(T){I&&I(S||T)})})})},m.lutimesSync=function(_,R,O){var I=m.openSync(_,r.O_SYMLINK),U,b=!0;try{U=m.futimesSync(I,R,O),b=!1}finally{if(b)try{m.closeSync(I)}catch{}else m.closeSync(I)}return U}):m.futimes&&(m.lutimes=function(_,R,O,I){I&&process.nextTick(I)},m.lutimesSync=function(){})}function s(m){return m&&function(_,R,O){return m.call(e,_,R,function(I){y(I)&&(I=null),O&&O.apply(this,arguments)})}}function o(m){return m&&function(_,R){try{return m.call(e,_,R)}catch(O){if(!y(O))throw O}}}function u(m){return m&&function(_,R,O,I){return m.call(e,_,R,O,function(U){y(U)&&(U=null),I&&I.apply(this,arguments)})}}function a(m){return m&&function(_,R,O){try{return m.call(e,_,R,O)}catch(I){if(!y(I))throw I}}}function p(m){return m&&function(_,R,O){typeof R=="function"&&(O=R,R=null);function I(U,b){b&&(b.uid<0&&(b.uid+=4294967296),b.gid<0&&(b.gid+=4294967296)),O&&O.apply(this,arguments)}return R?m.call(e,_,R,I):m.call(e,_,I)}}function g(m){return m&&function(_,R){var O=R?m.call(e,_,R):m.call(e,_);return O&&(O.uid<0&&(O.uid+=4294967296),O.gid<0&&(O.gid+=4294967296)),O}}function y(m){if(!m||m.code==="ENOSYS")return!0;var _=!process.getuid||process.getuid()!==0;return!!(_&&(m.code==="EINVAL"||m.code==="EPERM"))}}return kn}var Mn,es;function od(){if(es)return Mn;es=1;var r=wr.Stream;Mn=h;function h(c){return{ReadStream:d,WriteStream:f};function d(n,e){if(!(this instanceof d))return new d(n,e);r.call(this);var i=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,e=e||{};for(var t=Object.keys(e),s=0,o=t.length;s<o;s++){var u=t[s];this[u]=e[u]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){i._read()});return}c.open(this.path,this.flags,this.mode,function(a,p){if(a){i.emit("error",a),i.readable=!1;return}i.fd=p,i.emit("open",p),i._read()})}function f(n,e){if(!(this instanceof f))return new f(n,e);r.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,e=e||{};for(var i=Object.keys(e),t=0,s=i.length;t<s;t++){var o=i[t];this[o]=e[o]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=c.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return Mn}var Bn,ts;function ad(){if(ts)return Bn;ts=1,Bn=h;var r=Object.getPrototypeOf||function(c){return c.__proto__};function h(c){if(c===null||typeof c!="object")return c;if(c instanceof Object)var d={__proto__:r(c)};else var d=Object.create(null);return Object.getOwnPropertyNames(c).forEach(function(f){Object.defineProperty(d,f,Object.getOwnPropertyDescriptor(c,f))}),d}return Bn}var qr,rs;function Je(){if(rs)return qr;rs=1;var r=Ze,h=id(),c=od(),d=ad(),f=Gr,n,e;typeof Symbol=="function"&&typeof Symbol.for=="function"?(n=Symbol.for("graceful-fs.queue"),e=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",e="___graceful-fs.previous");function i(){}function t(m,_){Object.defineProperty(m,n,{get:function(){return _}})}var s=i;if(f.debuglog?s=f.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(s=function(){var m=f.format.apply(f,arguments);m="GFS4: "+m.split(/\n/).join(`
GFS4: `),console.error(m)}),!r[n]){var o=ot[n]||[];t(r,o),r.close=function(m){function _(R,O){return m.call(r,R,function(I){I||g(),typeof O=="function"&&O.apply(this,arguments)})}return Object.defineProperty(_,e,{value:m}),_}(r.close),r.closeSync=function(m){function _(R){m.apply(r,arguments),g()}return Object.defineProperty(_,e,{value:m}),_}(r.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){s(r[n]),xu.equal(r[n].length,0)})}ot[n]||t(ot,r[n]),qr=u(d(r)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!r.__patched&&(qr=u(r),r.__patched=!0);function u(m){h(m),m.gracefulify=u,m.createReadStream=ce,m.createWriteStream=ue;var _=m.readFile;m.readFile=R;function R(J,ve,A){return typeof ve=="function"&&(A=ve,ve=null),v(J,ve,A);function v(j,N,le,me){return _(j,N,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?a([v,[j,N,le],pe,me||Date.now(),Date.now()]):typeof le=="function"&&le.apply(this,arguments)})}}var O=m.writeFile;m.writeFile=I;function I(J,ve,A,v){return typeof A=="function"&&(v=A,A=null),j(J,ve,A,v);function j(N,le,me,pe,Se){return O(N,le,me,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?a([j,[N,le,me,pe],Ee,Se||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var U=m.appendFile;U&&(m.appendFile=b);function b(J,ve,A,v){return typeof A=="function"&&(v=A,A=null),j(J,ve,A,v);function j(N,le,me,pe,Se){return U(N,le,me,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?a([j,[N,le,me,pe],Ee,Se||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var S=m.copyFile;S&&(m.copyFile=T);function T(J,ve,A,v){return typeof A=="function"&&(v=A,A=0),j(J,ve,A,v);function j(N,le,me,pe,Se){return S(N,le,me,function(Ee){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?a([j,[N,le,me,pe],Ee,Se||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var E=m.readdir;m.readdir=$;var M=/^v[0-5]\./;function $(J,ve,A){typeof ve=="function"&&(A=ve,ve=null);var v=M.test(process.version)?function(le,me,pe,Se){return E(le,j(le,me,pe,Se))}:function(le,me,pe,Se){return E(le,me,j(le,me,pe,Se))};return v(J,ve,A);function j(N,le,me,pe){return function(Se,Ee){Se&&(Se.code==="EMFILE"||Se.code==="ENFILE")?a([v,[N,le,me],Se,pe||Date.now(),Date.now()]):(Ee&&Ee.sort&&Ee.sort(),typeof me=="function"&&me.call(this,Se,Ee))}}}if(process.version.substr(0,4)==="v0.8"){var L=c(m);q=L.ReadStream,W=L.WriteStream}var k=m.ReadStream;k&&(q.prototype=Object.create(k.prototype),q.prototype.open=K);var D=m.WriteStream;D&&(W.prototype=Object.create(D.prototype),W.prototype.open=ne),Object.defineProperty(m,"ReadStream",{get:function(){return q},set:function(J){q=J},enumerable:!0,configurable:!0}),Object.defineProperty(m,"WriteStream",{get:function(){return W},set:function(J){W=J},enumerable:!0,configurable:!0});var P=q;Object.defineProperty(m,"FileReadStream",{get:function(){return P},set:function(J){P=J},enumerable:!0,configurable:!0});var F=W;Object.defineProperty(m,"FileWriteStream",{get:function(){return F},set:function(J){F=J},enumerable:!0,configurable:!0});function q(J,ve){return this instanceof q?(k.apply(this,arguments),this):q.apply(Object.create(q.prototype),arguments)}function K(){var J=this;Re(J.path,J.flags,J.mode,function(ve,A){ve?(J.autoClose&&J.destroy(),J.emit("error",ve)):(J.fd=A,J.emit("open",A),J.read())})}function W(J,ve){return this instanceof W?(D.apply(this,arguments),this):W.apply(Object.create(W.prototype),arguments)}function ne(){var J=this;Re(J.path,J.flags,J.mode,function(ve,A){ve?(J.destroy(),J.emit("error",ve)):(J.fd=A,J.emit("open",A))})}function ce(J,ve){return new m.ReadStream(J,ve)}function ue(J,ve){return new m.WriteStream(J,ve)}var ie=m.open;m.open=Re;function Re(J,ve,A,v){return typeof A=="function"&&(v=A,A=null),j(J,ve,A,v);function j(N,le,me,pe,Se){return ie(N,le,me,function(Ee,Ue){Ee&&(Ee.code==="EMFILE"||Ee.code==="ENFILE")?a([j,[N,le,me,pe],Ee,Se||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return m}function a(m){s("ENQUEUE",m[0].name,m[1]),r[n].push(m),y()}var p;function g(){for(var m=Date.now(),_=0;_<r[n].length;++_)r[n][_].length>2&&(r[n][_][3]=m,r[n][_][4]=m);y()}function y(){if(clearTimeout(p),p=void 0,r[n].length!==0){var m=r[n].shift(),_=m[0],R=m[1],O=m[2],I=m[3],U=m[4];if(I===void 0)s("RETRY",_.name,R),_.apply(null,R);else if(Date.now()-I>=6e4){s("TIMEOUT",_.name,R);var b=R.pop();typeof b=="function"&&b.call(null,O)}else{var S=Date.now()-U,T=Math.max(U-I,1),E=Math.min(T*1.2,100);S>=E?(s("RETRY",_.name,R),_.apply(null,R.concat([I]))):r[n].push(m)}p===void 0&&(p=setTimeout(y,0))}}return qr}var ns;function Ht(){return ns||(ns=1,function(r){const h=et().fromCallback,c=Je(),d=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(f=>typeof c[f]=="function");Object.assign(r,c),d.forEach(f=>{r[f]=h(c[f])}),r.exists=function(f,n){return typeof n=="function"?c.exists(f,n):new Promise(e=>c.exists(f,e))},r.read=function(f,n,e,i,t,s){return typeof s=="function"?c.read(f,n,e,i,t,s):new Promise((o,u)=>{c.read(f,n,e,i,t,(a,p,g)=>{if(a)return u(a);o({bytesRead:p,buffer:g})})})},r.write=function(f,n,...e){return typeof e[e.length-1]=="function"?c.write(f,n,...e):new Promise((i,t)=>{c.write(f,n,...e,(s,o,u)=>{if(s)return t(s);i({bytesWritten:o,buffer:u})})})},typeof c.writev=="function"&&(r.writev=function(f,n,...e){return typeof e[e.length-1]=="function"?c.writev(f,n,...e):new Promise((i,t)=>{c.writev(f,n,...e,(s,o,u)=>{if(s)return t(s);i({bytesWritten:o,buffers:u})})})}),typeof c.realpath.native=="function"?r.realpath.native=h(c.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(qn)),qn}var kr={},jn={},is;function sd(){if(is)return jn;is=1;const r=Ie;return jn.checkPath=function(c){if(process.platform==="win32"&&/[<>:"|?*]/.test(c.replace(r.parse(c).root,""))){const f=new Error(`Path contains invalid characters: ${c}`);throw f.code="EINVAL",f}},jn}var os;function ld(){if(os)return kr;os=1;const r=Ht(),{checkPath:h}=sd(),c=d=>{const f={mode:511};return typeof d=="number"?d:{...f,...d}.mode};return kr.makeDir=async(d,f)=>(h(d),r.mkdir(d,{mode:c(f),recursive:!0})),kr.makeDirSync=(d,f)=>(h(d),r.mkdirSync(d,{mode:c(f),recursive:!0})),kr}var Hn,as;function ct(){if(as)return Hn;as=1;const r=et().fromPromise,{makeDir:h,makeDirSync:c}=ld(),d=r(h);return Hn={mkdirs:d,mkdirsSync:c,mkdirp:d,mkdirpSync:c,ensureDir:d,ensureDirSync:c},Hn}var Gn,ss;function xt(){if(ss)return Gn;ss=1;const r=et().fromPromise,h=Ht();function c(d){return h.access(d).then(()=>!0).catch(()=>!1)}return Gn={pathExists:r(c),pathExistsSync:h.existsSync},Gn}var Wn,ls;function Wu(){if(ls)return Wn;ls=1;const r=Je();function h(d,f,n,e){r.open(d,"r+",(i,t)=>{if(i)return e(i);r.futimes(t,f,n,s=>{r.close(t,o=>{e&&e(s||o)})})})}function c(d,f,n){const e=r.openSync(d,"r+");return r.futimesSync(e,f,n),r.closeSync(e)}return Wn={utimesMillis:h,utimesMillisSync:c},Wn}var Vn,us;function Gt(){if(us)return Vn;us=1;const r=Ht(),h=Ie,c=Gr;function d(a,p,g){const y=g.dereference?m=>r.stat(m,{bigint:!0}):m=>r.lstat(m,{bigint:!0});return Promise.all([y(a),y(p).catch(m=>{if(m.code==="ENOENT")return null;throw m})]).then(([m,_])=>({srcStat:m,destStat:_}))}function f(a,p,g){let y;const m=g.dereference?R=>r.statSync(R,{bigint:!0}):R=>r.lstatSync(R,{bigint:!0}),_=m(a);try{y=m(p)}catch(R){if(R.code==="ENOENT")return{srcStat:_,destStat:null};throw R}return{srcStat:_,destStat:y}}function n(a,p,g,y,m){c.callbackify(d)(a,p,y,(_,R)=>{if(_)return m(_);const{srcStat:O,destStat:I}=R;if(I){if(s(O,I)){const U=h.basename(a),b=h.basename(p);return g==="move"&&U!==b&&U.toLowerCase()===b.toLowerCase()?m(null,{srcStat:O,destStat:I,isChangingCase:!0}):m(new Error("Source and destination must not be the same."))}if(O.isDirectory()&&!I.isDirectory())return m(new Error(`Cannot overwrite non-directory '${p}' with directory '${a}'.`));if(!O.isDirectory()&&I.isDirectory())return m(new Error(`Cannot overwrite directory '${p}' with non-directory '${a}'.`))}return O.isDirectory()&&o(a,p)?m(new Error(u(a,p,g))):m(null,{srcStat:O,destStat:I})})}function e(a,p,g,y){const{srcStat:m,destStat:_}=f(a,p,y);if(_){if(s(m,_)){const R=h.basename(a),O=h.basename(p);if(g==="move"&&R!==O&&R.toLowerCase()===O.toLowerCase())return{srcStat:m,destStat:_,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(m.isDirectory()&&!_.isDirectory())throw new Error(`Cannot overwrite non-directory '${p}' with directory '${a}'.`);if(!m.isDirectory()&&_.isDirectory())throw new Error(`Cannot overwrite directory '${p}' with non-directory '${a}'.`)}if(m.isDirectory()&&o(a,p))throw new Error(u(a,p,g));return{srcStat:m,destStat:_}}function i(a,p,g,y,m){const _=h.resolve(h.dirname(a)),R=h.resolve(h.dirname(g));if(R===_||R===h.parse(R).root)return m();r.stat(R,{bigint:!0},(O,I)=>O?O.code==="ENOENT"?m():m(O):s(p,I)?m(new Error(u(a,g,y))):i(a,p,R,y,m))}function t(a,p,g,y){const m=h.resolve(h.dirname(a)),_=h.resolve(h.dirname(g));if(_===m||_===h.parse(_).root)return;let R;try{R=r.statSync(_,{bigint:!0})}catch(O){if(O.code==="ENOENT")return;throw O}if(s(p,R))throw new Error(u(a,g,y));return t(a,p,_,y)}function s(a,p){return p.ino&&p.dev&&p.ino===a.ino&&p.dev===a.dev}function o(a,p){const g=h.resolve(a).split(h.sep).filter(m=>m),y=h.resolve(p).split(h.sep).filter(m=>m);return g.reduce((m,_,R)=>m&&y[R]===_,!0)}function u(a,p,g){return`Cannot ${g} '${a}' to a subdirectory of itself, '${p}'.`}return Vn={checkPaths:n,checkPathsSync:e,checkParentPaths:i,checkParentPathsSync:t,isSrcSubdir:o,areIdentical:s},Vn}var zn,cs;function ud(){if(cs)return zn;cs=1;const r=Je(),h=Ie,c=ct().mkdirs,d=xt().pathExists,f=Wu().utimesMillis,n=Gt();function e($,L,k,D){typeof k=="function"&&!D?(D=k,k={}):typeof k=="function"&&(k={filter:k}),D=D||function(){},k=k||{},k.clobber="clobber"in k?!!k.clobber:!0,k.overwrite="overwrite"in k?!!k.overwrite:k.clobber,k.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),n.checkPaths($,L,"copy",k,(P,F)=>{if(P)return D(P);const{srcStat:q,destStat:K}=F;n.checkParentPaths($,q,L,"copy",W=>W?D(W):k.filter?t(i,K,$,L,k,D):i(K,$,L,k,D))})}function i($,L,k,D,P){const F=h.dirname(k);d(F,(q,K)=>{if(q)return P(q);if(K)return o($,L,k,D,P);c(F,W=>W?P(W):o($,L,k,D,P))})}function t($,L,k,D,P,F){Promise.resolve(P.filter(k,D)).then(q=>q?$(L,k,D,P,F):F(),q=>F(q))}function s($,L,k,D,P){return D.filter?t(o,$,L,k,D,P):o($,L,k,D,P)}function o($,L,k,D,P){(D.dereference?r.stat:r.lstat)(L,(q,K)=>q?P(q):K.isDirectory()?I(K,$,L,k,D,P):K.isFile()||K.isCharacterDevice()||K.isBlockDevice()?u(K,$,L,k,D,P):K.isSymbolicLink()?E($,L,k,D,P):K.isSocket()?P(new Error(`Cannot copy a socket file: ${L}`)):K.isFIFO()?P(new Error(`Cannot copy a FIFO pipe: ${L}`)):P(new Error(`Unknown file: ${L}`)))}function u($,L,k,D,P,F){return L?a($,k,D,P,F):p($,k,D,P,F)}function a($,L,k,D,P){if(D.overwrite)r.unlink(k,F=>F?P(F):p($,L,k,D,P));else return D.errorOnExist?P(new Error(`'${k}' already exists`)):P()}function p($,L,k,D,P){r.copyFile(L,k,F=>F?P(F):D.preserveTimestamps?g($.mode,L,k,P):R(k,$.mode,P))}function g($,L,k,D){return y($)?m(k,$,P=>P?D(P):_($,L,k,D)):_($,L,k,D)}function y($){return($&128)===0}function m($,L,k){return R($,L|128,k)}function _($,L,k,D){O(L,k,P=>P?D(P):R(k,$,D))}function R($,L,k){return r.chmod($,L,k)}function O($,L,k){r.stat($,(D,P)=>D?k(D):f(L,P.atime,P.mtime,k))}function I($,L,k,D,P,F){return L?b(k,D,P,F):U($.mode,k,D,P,F)}function U($,L,k,D,P){r.mkdir(k,F=>{if(F)return P(F);b(L,k,D,q=>q?P(q):R(k,$,P))})}function b($,L,k,D){r.readdir($,(P,F)=>P?D(P):S(F,$,L,k,D))}function S($,L,k,D,P){const F=$.pop();return F?T($,F,L,k,D,P):P()}function T($,L,k,D,P,F){const q=h.join(k,L),K=h.join(D,L);n.checkPaths(q,K,"copy",P,(W,ne)=>{if(W)return F(W);const{destStat:ce}=ne;s(ce,q,K,P,ue=>ue?F(ue):S($,k,D,P,F))})}function E($,L,k,D,P){r.readlink(L,(F,q)=>{if(F)return P(F);if(D.dereference&&(q=h.resolve(process.cwd(),q)),$)r.readlink(k,(K,W)=>K?K.code==="EINVAL"||K.code==="UNKNOWN"?r.symlink(q,k,P):P(K):(D.dereference&&(W=h.resolve(process.cwd(),W)),n.isSrcSubdir(q,W)?P(new Error(`Cannot copy '${q}' to a subdirectory of itself, '${W}'.`)):$.isDirectory()&&n.isSrcSubdir(W,q)?P(new Error(`Cannot overwrite '${W}' with '${q}'.`)):M(q,k,P)));else return r.symlink(q,k,P)})}function M($,L,k){r.unlink(L,D=>D?k(D):r.symlink($,L,k))}return zn=e,zn}var Yn,fs;function cd(){if(fs)return Yn;fs=1;const r=Je(),h=Ie,c=ct().mkdirsSync,d=Wu().utimesMillisSync,f=Gt();function n(S,T,E){typeof E=="function"&&(E={filter:E}),E=E||{},E.clobber="clobber"in E?!!E.clobber:!0,E.overwrite="overwrite"in E?!!E.overwrite:E.clobber,E.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:M,destStat:$}=f.checkPathsSync(S,T,"copy",E);return f.checkParentPathsSync(S,M,T,"copy"),e($,S,T,E)}function e(S,T,E,M){if(M.filter&&!M.filter(T,E))return;const $=h.dirname(E);return r.existsSync($)||c($),t(S,T,E,M)}function i(S,T,E,M){if(!(M.filter&&!M.filter(T,E)))return t(S,T,E,M)}function t(S,T,E,M){const L=(M.dereference?r.statSync:r.lstatSync)(T);if(L.isDirectory())return _(L,S,T,E,M);if(L.isFile()||L.isCharacterDevice()||L.isBlockDevice())return s(L,S,T,E,M);if(L.isSymbolicLink())return U(S,T,E,M);throw L.isSocket()?new Error(`Cannot copy a socket file: ${T}`):L.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${T}`):new Error(`Unknown file: ${T}`)}function s(S,T,E,M,$){return T?o(S,E,M,$):u(S,E,M,$)}function o(S,T,E,M){if(M.overwrite)return r.unlinkSync(E),u(S,T,E,M);if(M.errorOnExist)throw new Error(`'${E}' already exists`)}function u(S,T,E,M){return r.copyFileSync(T,E),M.preserveTimestamps&&a(S.mode,T,E),y(E,S.mode)}function a(S,T,E){return p(S)&&g(E,S),m(T,E)}function p(S){return(S&128)===0}function g(S,T){return y(S,T|128)}function y(S,T){return r.chmodSync(S,T)}function m(S,T){const E=r.statSync(S);return d(T,E.atime,E.mtime)}function _(S,T,E,M,$){return T?O(E,M,$):R(S.mode,E,M,$)}function R(S,T,E,M){return r.mkdirSync(E),O(T,E,M),y(E,S)}function O(S,T,E){r.readdirSync(S).forEach(M=>I(M,S,T,E))}function I(S,T,E,M){const $=h.join(T,S),L=h.join(E,S),{destStat:k}=f.checkPathsSync($,L,"copy",M);return i(k,$,L,M)}function U(S,T,E,M){let $=r.readlinkSync(T);if(M.dereference&&($=h.resolve(process.cwd(),$)),S){let L;try{L=r.readlinkSync(E)}catch(k){if(k.code==="EINVAL"||k.code==="UNKNOWN")return r.symlinkSync($,E);throw k}if(M.dereference&&(L=h.resolve(process.cwd(),L)),f.isSrcSubdir($,L))throw new Error(`Cannot copy '${$}' to a subdirectory of itself, '${L}'.`);if(r.statSync(E).isDirectory()&&f.isSrcSubdir(L,$))throw new Error(`Cannot overwrite '${L}' with '${$}'.`);return b($,E)}else return r.symlinkSync($,E)}function b(S,T){return r.unlinkSync(T),r.symlinkSync(S,T)}return Yn=n,Yn}var Xn,ds;function Fo(){if(ds)return Xn;ds=1;const r=et().fromCallback;return Xn={copy:r(ud()),copySync:cd()},Xn}var Jn,hs;function fd(){if(hs)return Jn;hs=1;const r=Je(),h=Ie,c=xu,d=process.platform==="win32";function f(g){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(m=>{g[m]=g[m]||r[m],m=m+"Sync",g[m]=g[m]||r[m]}),g.maxBusyTries=g.maxBusyTries||3}function n(g,y,m){let _=0;typeof y=="function"&&(m=y,y={}),c(g,"rimraf: missing path"),c.strictEqual(typeof g,"string","rimraf: path should be a string"),c.strictEqual(typeof m,"function","rimraf: callback function required"),c(y,"rimraf: invalid options argument provided"),c.strictEqual(typeof y,"object","rimraf: options should be object"),f(y),e(g,y,function R(O){if(O){if((O.code==="EBUSY"||O.code==="ENOTEMPTY"||O.code==="EPERM")&&_<y.maxBusyTries){_++;const I=_*100;return setTimeout(()=>e(g,y,R),I)}O.code==="ENOENT"&&(O=null)}m(O)})}function e(g,y,m){c(g),c(y),c(typeof m=="function"),y.lstat(g,(_,R)=>{if(_&&_.code==="ENOENT")return m(null);if(_&&_.code==="EPERM"&&d)return i(g,y,_,m);if(R&&R.isDirectory())return s(g,y,_,m);y.unlink(g,O=>{if(O){if(O.code==="ENOENT")return m(null);if(O.code==="EPERM")return d?i(g,y,O,m):s(g,y,O,m);if(O.code==="EISDIR")return s(g,y,O,m)}return m(O)})})}function i(g,y,m,_){c(g),c(y),c(typeof _=="function"),y.chmod(g,438,R=>{R?_(R.code==="ENOENT"?null:m):y.stat(g,(O,I)=>{O?_(O.code==="ENOENT"?null:m):I.isDirectory()?s(g,y,m,_):y.unlink(g,_)})})}function t(g,y,m){let _;c(g),c(y);try{y.chmodSync(g,438)}catch(R){if(R.code==="ENOENT")return;throw m}try{_=y.statSync(g)}catch(R){if(R.code==="ENOENT")return;throw m}_.isDirectory()?a(g,y,m):y.unlinkSync(g)}function s(g,y,m,_){c(g),c(y),c(typeof _=="function"),y.rmdir(g,R=>{R&&(R.code==="ENOTEMPTY"||R.code==="EEXIST"||R.code==="EPERM")?o(g,y,_):R&&R.code==="ENOTDIR"?_(m):_(R)})}function o(g,y,m){c(g),c(y),c(typeof m=="function"),y.readdir(g,(_,R)=>{if(_)return m(_);let O=R.length,I;if(O===0)return y.rmdir(g,m);R.forEach(U=>{n(h.join(g,U),y,b=>{if(!I){if(b)return m(I=b);--O===0&&y.rmdir(g,m)}})})})}function u(g,y){let m;y=y||{},f(y),c(g,"rimraf: missing path"),c.strictEqual(typeof g,"string","rimraf: path should be a string"),c(y,"rimraf: missing options"),c.strictEqual(typeof y,"object","rimraf: options should be object");try{m=y.lstatSync(g)}catch(_){if(_.code==="ENOENT")return;_.code==="EPERM"&&d&&t(g,y,_)}try{m&&m.isDirectory()?a(g,y,null):y.unlinkSync(g)}catch(_){if(_.code==="ENOENT")return;if(_.code==="EPERM")return d?t(g,y,_):a(g,y,_);if(_.code!=="EISDIR")throw _;a(g,y,_)}}function a(g,y,m){c(g),c(y);try{y.rmdirSync(g)}catch(_){if(_.code==="ENOTDIR")throw m;if(_.code==="ENOTEMPTY"||_.code==="EEXIST"||_.code==="EPERM")p(g,y);else if(_.code!=="ENOENT")throw _}}function p(g,y){if(c(g),c(y),y.readdirSync(g).forEach(m=>u(h.join(g,m),y)),d){const m=Date.now();do try{return y.rmdirSync(g,y)}catch{}while(Date.now()-m<500)}else return y.rmdirSync(g,y)}return Jn=n,n.sync=u,Jn}var Kn,ps;function Yr(){if(ps)return Kn;ps=1;const r=Je(),h=et().fromCallback,c=fd();function d(n,e){if(r.rm)return r.rm(n,{recursive:!0,force:!0},e);c(n,e)}function f(n){if(r.rmSync)return r.rmSync(n,{recursive:!0,force:!0});c.sync(n)}return Kn={remove:h(d),removeSync:f},Kn}var Qn,ms;function dd(){if(ms)return Qn;ms=1;const r=et().fromPromise,h=Ht(),c=Ie,d=ct(),f=Yr(),n=r(async function(t){let s;try{s=await h.readdir(t)}catch{return d.mkdirs(t)}return Promise.all(s.map(o=>f.remove(c.join(t,o))))});function e(i){let t;try{t=h.readdirSync(i)}catch{return d.mkdirsSync(i)}t.forEach(s=>{s=c.join(i,s),f.removeSync(s)})}return Qn={emptyDirSync:e,emptydirSync:e,emptyDir:n,emptydir:n},Qn}var Zn,gs;function hd(){if(gs)return Zn;gs=1;const r=et().fromCallback,h=Ie,c=Je(),d=ct();function f(e,i){function t(){c.writeFile(e,"",s=>{if(s)return i(s);i()})}c.stat(e,(s,o)=>{if(!s&&o.isFile())return i();const u=h.dirname(e);c.stat(u,(a,p)=>{if(a)return a.code==="ENOENT"?d.mkdirs(u,g=>{if(g)return i(g);t()}):i(a);p.isDirectory()?t():c.readdir(u,g=>{if(g)return i(g)})})})}function n(e){let i;try{i=c.statSync(e)}catch{}if(i&&i.isFile())return;const t=h.dirname(e);try{c.statSync(t).isDirectory()||c.readdirSync(t)}catch(s){if(s&&s.code==="ENOENT")d.mkdirsSync(t);else throw s}c.writeFileSync(e,"")}return Zn={createFile:r(f),createFileSync:n},Zn}var ei,ys;function pd(){if(ys)return ei;ys=1;const r=et().fromCallback,h=Ie,c=Je(),d=ct(),f=xt().pathExists,{areIdentical:n}=Gt();function e(t,s,o){function u(a,p){c.link(a,p,g=>{if(g)return o(g);o(null)})}c.lstat(s,(a,p)=>{c.lstat(t,(g,y)=>{if(g)return g.message=g.message.replace("lstat","ensureLink"),o(g);if(p&&n(y,p))return o(null);const m=h.dirname(s);f(m,(_,R)=>{if(_)return o(_);if(R)return u(t,s);d.mkdirs(m,O=>{if(O)return o(O);u(t,s)})})})})}function i(t,s){let o;try{o=c.lstatSync(s)}catch{}try{const p=c.lstatSync(t);if(o&&n(p,o))return}catch(p){throw p.message=p.message.replace("lstat","ensureLink"),p}const u=h.dirname(s);return c.existsSync(u)||d.mkdirsSync(u),c.linkSync(t,s)}return ei={createLink:r(e),createLinkSync:i},ei}var ti,vs;function md(){if(vs)return ti;vs=1;const r=Ie,h=Je(),c=xt().pathExists;function d(n,e,i){if(r.isAbsolute(n))return h.lstat(n,t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),i(t)):i(null,{toCwd:n,toDst:n}));{const t=r.dirname(e),s=r.join(t,n);return c(s,(o,u)=>o?i(o):u?i(null,{toCwd:s,toDst:n}):h.lstat(n,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),i(a)):i(null,{toCwd:n,toDst:r.relative(t,n)})))}}function f(n,e){let i;if(r.isAbsolute(n)){if(i=h.existsSync(n),!i)throw new Error("absolute srcpath does not exist");return{toCwd:n,toDst:n}}else{const t=r.dirname(e),s=r.join(t,n);if(i=h.existsSync(s),i)return{toCwd:s,toDst:n};if(i=h.existsSync(n),!i)throw new Error("relative srcpath does not exist");return{toCwd:n,toDst:r.relative(t,n)}}}return ti={symlinkPaths:d,symlinkPathsSync:f},ti}var ri,Es;function gd(){if(Es)return ri;Es=1;const r=Je();function h(d,f,n){if(n=typeof f=="function"?f:n,f=typeof f=="function"?!1:f,f)return n(null,f);r.lstat(d,(e,i)=>{if(e)return n(null,"file");f=i&&i.isDirectory()?"dir":"file",n(null,f)})}function c(d,f){let n;if(f)return f;try{n=r.lstatSync(d)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}return ri={symlinkType:h,symlinkTypeSync:c},ri}var ni,ws;function yd(){if(ws)return ni;ws=1;const r=et().fromCallback,h=Ie,c=Ht(),d=ct(),f=d.mkdirs,n=d.mkdirsSync,e=md(),i=e.symlinkPaths,t=e.symlinkPathsSync,s=gd(),o=s.symlinkType,u=s.symlinkTypeSync,a=xt().pathExists,{areIdentical:p}=Gt();function g(_,R,O,I){I=typeof O=="function"?O:I,O=typeof O=="function"?!1:O,c.lstat(R,(U,b)=>{!U&&b.isSymbolicLink()?Promise.all([c.stat(_),c.stat(R)]).then(([S,T])=>{if(p(S,T))return I(null);y(_,R,O,I)}):y(_,R,O,I)})}function y(_,R,O,I){i(_,R,(U,b)=>{if(U)return I(U);_=b.toDst,o(b.toCwd,O,(S,T)=>{if(S)return I(S);const E=h.dirname(R);a(E,(M,$)=>{if(M)return I(M);if($)return c.symlink(_,R,T,I);f(E,L=>{if(L)return I(L);c.symlink(_,R,T,I)})})})})}function m(_,R,O){let I;try{I=c.lstatSync(R)}catch{}if(I&&I.isSymbolicLink()){const T=c.statSync(_),E=c.statSync(R);if(p(T,E))return}const U=t(_,R);_=U.toDst,O=u(U.toCwd,O);const b=h.dirname(R);return c.existsSync(b)||n(b),c.symlinkSync(_,R,O)}return ni={createSymlink:r(g),createSymlinkSync:m},ni}var ii,_s;function vd(){if(_s)return ii;_s=1;const{createFile:r,createFileSync:h}=hd(),{createLink:c,createLinkSync:d}=pd(),{createSymlink:f,createSymlinkSync:n}=yd();return ii={createFile:r,createFileSync:h,ensureFile:r,ensureFileSync:h,createLink:c,createLinkSync:d,ensureLink:c,ensureLinkSync:d,createSymlink:f,createSymlinkSync:n,ensureSymlink:f,ensureSymlinkSync:n},ii}var oi,Ss;function xo(){if(Ss)return oi;Ss=1;function r(c,{EOL:d=`
`,finalEOL:f=!0,replacer:n=null,spaces:e}={}){const i=f?d:"";return JSON.stringify(c,n,e).replace(/\n/g,d)+i}function h(c){return Buffer.isBuffer(c)&&(c=c.toString("utf8")),c.replace(/^\uFEFF/,"")}return oi={stringify:r,stripBom:h},oi}var ai,As;function Ed(){if(As)return ai;As=1;let r;try{r=Je()}catch{r=Ze}const h=et(),{stringify:c,stripBom:d}=xo();async function f(u,a={}){typeof a=="string"&&(a={encoding:a});const p=a.fs||r,g="throws"in a?a.throws:!0;let y=await h.fromCallback(p.readFile)(u,a);y=d(y);let m;try{m=JSON.parse(y,a?a.reviver:null)}catch(_){if(g)throw _.message=`${u}: ${_.message}`,_;return null}return m}const n=h.fromPromise(f);function e(u,a={}){typeof a=="string"&&(a={encoding:a});const p=a.fs||r,g="throws"in a?a.throws:!0;try{let y=p.readFileSync(u,a);return y=d(y),JSON.parse(y,a.reviver)}catch(y){if(g)throw y.message=`${u}: ${y.message}`,y;return null}}async function i(u,a,p={}){const g=p.fs||r,y=c(a,p);await h.fromCallback(g.writeFile)(u,y,p)}const t=h.fromPromise(i);function s(u,a,p={}){const g=p.fs||r,y=c(a,p);return g.writeFileSync(u,y,p)}return ai={readFile:n,readFileSync:e,writeFile:t,writeFileSync:s},ai}var si,Ts;function wd(){if(Ts)return si;Ts=1;const r=Ed();return si={readJson:r.readFile,readJsonSync:r.readFileSync,writeJson:r.writeFile,writeJsonSync:r.writeFileSync},si}var li,bs;function Lo(){if(bs)return li;bs=1;const r=et().fromCallback,h=Je(),c=Ie,d=ct(),f=xt().pathExists;function n(i,t,s,o){typeof s=="function"&&(o=s,s="utf8");const u=c.dirname(i);f(u,(a,p)=>{if(a)return o(a);if(p)return h.writeFile(i,t,s,o);d.mkdirs(u,g=>{if(g)return o(g);h.writeFile(i,t,s,o)})})}function e(i,...t){const s=c.dirname(i);if(h.existsSync(s))return h.writeFileSync(i,...t);d.mkdirsSync(s),h.writeFileSync(i,...t)}return li={outputFile:r(n),outputFileSync:e},li}var ui,Rs;function _d(){if(Rs)return ui;Rs=1;const{stringify:r}=xo(),{outputFile:h}=Lo();async function c(d,f,n={}){const e=r(f,n);await h(d,e,n)}return ui=c,ui}var ci,Cs;function Sd(){if(Cs)return ci;Cs=1;const{stringify:r}=xo(),{outputFileSync:h}=Lo();function c(d,f,n){const e=r(f,n);h(d,e,n)}return ci=c,ci}var fi,Os;function Ad(){if(Os)return fi;Os=1;const r=et().fromPromise,h=wd();return h.outputJson=r(_d()),h.outputJsonSync=Sd(),h.outputJSON=h.outputJson,h.outputJSONSync=h.outputJsonSync,h.writeJSON=h.writeJson,h.writeJSONSync=h.writeJsonSync,h.readJSON=h.readJson,h.readJSONSync=h.readJsonSync,fi=h,fi}var di,Is;function Td(){if(Is)return di;Is=1;const r=Je(),h=Ie,c=Fo().copy,d=Yr().remove,f=ct().mkdirp,n=xt().pathExists,e=Gt();function i(a,p,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};const m=g.overwrite||g.clobber||!1;e.checkPaths(a,p,"move",g,(_,R)=>{if(_)return y(_);const{srcStat:O,isChangingCase:I=!1}=R;e.checkParentPaths(a,O,p,"move",U=>{if(U)return y(U);if(t(p))return s(a,p,m,I,y);f(h.dirname(p),b=>b?y(b):s(a,p,m,I,y))})})}function t(a){const p=h.dirname(a);return h.parse(p).root===p}function s(a,p,g,y,m){if(y)return o(a,p,g,m);if(g)return d(p,_=>_?m(_):o(a,p,g,m));n(p,(_,R)=>_?m(_):R?m(new Error("dest already exists.")):o(a,p,g,m))}function o(a,p,g,y){r.rename(a,p,m=>m?m.code!=="EXDEV"?y(m):u(a,p,g,y):y())}function u(a,p,g,y){c(a,p,{overwrite:g,errorOnExist:!0},_=>_?y(_):d(a,y))}return di=i,di}var hi,Ps;function bd(){if(Ps)return hi;Ps=1;const r=Je(),h=Ie,c=Fo().copySync,d=Yr().removeSync,f=ct().mkdirpSync,n=Gt();function e(u,a,p){p=p||{};const g=p.overwrite||p.clobber||!1,{srcStat:y,isChangingCase:m=!1}=n.checkPathsSync(u,a,"move",p);return n.checkParentPathsSync(u,y,a,"move"),i(a)||f(h.dirname(a)),t(u,a,g,m)}function i(u){const a=h.dirname(u);return h.parse(a).root===a}function t(u,a,p,g){if(g)return s(u,a,p);if(p)return d(a),s(u,a,p);if(r.existsSync(a))throw new Error("dest already exists.");return s(u,a,p)}function s(u,a,p){try{r.renameSync(u,a)}catch(g){if(g.code!=="EXDEV")throw g;return o(u,a,p)}}function o(u,a,p){return c(u,a,{overwrite:p,errorOnExist:!0}),d(u)}return hi=e,hi}var pi,Ds;function Rd(){if(Ds)return pi;Ds=1;const r=et().fromCallback;return pi={move:r(Td()),moveSync:bd()},pi}var mi,Ns;function St(){return Ns||(Ns=1,mi={...Ht(),...Fo(),...dd(),...vd(),...Ad(),...ct(),...Rd(),...Lo(),...xt(),...Yr()}),mi}var Zt={},Dt={},ze={},Mr={},Et={},Fs;function _r(){if(Fs)return Et;Fs=1;function r(e){return typeof e>"u"||e===null}function h(e){return typeof e=="object"&&e!==null}function c(e){return Array.isArray(e)?e:r(e)?[]:[e]}function d(e,i){var t,s,o,u;if(i)for(u=Object.keys(i),t=0,s=u.length;t<s;t+=1)o=u[t],e[o]=i[o];return e}function f(e,i){var t="",s;for(s=0;s<i;s+=1)t+=e;return t}function n(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}return Et.isNothing=r,Et.isObject=h,Et.toArray=c,Et.repeat=f,Et.isNegativeZero=n,Et.extend=d,Et}var gi,xs;function Sr(){if(xs)return gi;xs=1;function r(c,d){var f="",n=c.reason||"(unknown reason)";return c.mark?(c.mark.name&&(f+='in "'+c.mark.name+'" '),f+="("+(c.mark.line+1)+":"+(c.mark.column+1)+")",!d&&c.mark.snippet&&(f+=`

`+c.mark.snippet),n+" "+f):n}function h(c,d){Error.call(this),this.name="YAMLException",this.reason=c,this.mark=d,this.message=r(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.toString=function(d){return this.name+": "+r(this,d)},gi=h,gi}var yi,Ls;function Cd(){if(Ls)return yi;Ls=1;var r=_r();function h(f,n,e,i,t){var s="",o="",u=Math.floor(t/2)-1;return i-n>u&&(s=" ... ",n=i-u+s.length),e-i>u&&(o=" ...",e=i+u-o.length),{str:s+f.slice(n,e).replace(/\t/g,"â†’")+o,pos:i-n+s.length}}function c(f,n){return r.repeat(" ",n-f.length)+f}function d(f,n){if(n=Object.create(n||null),!f.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var e=/\r?\n|\r|\0/g,i=[0],t=[],s,o=-1;s=e.exec(f.buffer);)t.push(s.index),i.push(s.index+s[0].length),f.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var u="",a,p,g=Math.min(f.line+n.linesAfter,t.length).toString().length,y=n.maxLength-(n.indent+g+3);for(a=1;a<=n.linesBefore&&!(o-a<0);a++)p=h(f.buffer,i[o-a],t[o-a],f.position-(i[o]-i[o-a]),y),u=r.repeat(" ",n.indent)+c((f.line-a+1).toString(),g)+" | "+p.str+`
`+u;for(p=h(f.buffer,i[o],t[o],f.position,y),u+=r.repeat(" ",n.indent)+c((f.line+1).toString(),g)+" | "+p.str+`
`,u+=r.repeat("-",n.indent+g+3+p.pos)+`^
`,a=1;a<=n.linesAfter&&!(o+a>=t.length);a++)p=h(f.buffer,i[o+a],t[o+a],f.position-(i[o]-i[o+a]),y),u+=r.repeat(" ",n.indent)+c((f.line+a+1).toString(),g)+" | "+p.str+`
`;return u.replace(/\n$/,"")}return yi=d,yi}var vi,$s;function Ye(){if($s)return vi;$s=1;var r=Sr(),h=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],c=["scalar","sequence","mapping"];function d(n){var e={};return n!==null&&Object.keys(n).forEach(function(i){n[i].forEach(function(t){e[String(t)]=i})}),e}function f(n,e){if(e=e||{},Object.keys(e).forEach(function(i){if(h.indexOf(i)===-1)throw new r('Unknown option "'+i+'" is met in definition of "'+n+'" YAML type.')}),this.options=e,this.tag=n,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(i){return i},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=d(e.styleAliases||null),c.indexOf(this.kind)===-1)throw new r('Unknown kind "'+this.kind+'" is specified for "'+n+'" YAML type.')}return vi=f,vi}var Ei,Us;function Vu(){if(Us)return Ei;Us=1;var r=Sr(),h=Ye();function c(n,e){var i=[];return n[e].forEach(function(t){var s=i.length;i.forEach(function(o,u){o.tag===t.tag&&o.kind===t.kind&&o.multi===t.multi&&(s=u)}),i[s]=t}),i}function d(){var n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,i;function t(s){s.multi?(n.multi[s.kind].push(s),n.multi.fallback.push(s)):n[s.kind][s.tag]=n.fallback[s.tag]=s}for(e=0,i=arguments.length;e<i;e+=1)arguments[e].forEach(t);return n}function f(n){return this.extend(n)}return f.prototype.extend=function(e){var i=[],t=[];if(e instanceof h)t.push(e);else if(Array.isArray(e))t=t.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(i=i.concat(e.implicit)),e.explicit&&(t=t.concat(e.explicit));else throw new r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(o){if(!(o instanceof h))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),t.forEach(function(o){if(!(o instanceof h))throw new r("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(f.prototype);return s.implicit=(this.implicit||[]).concat(i),s.explicit=(this.explicit||[]).concat(t),s.compiledImplicit=c(s,"implicit"),s.compiledExplicit=c(s,"explicit"),s.compiledTypeMap=d(s.compiledImplicit,s.compiledExplicit),s},Ei=f,Ei}var wi,qs;function zu(){if(qs)return wi;qs=1;var r=Ye();return wi=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(h){return h!==null?h:""}}),wi}var _i,ks;function Yu(){if(ks)return _i;ks=1;var r=Ye();return _i=new r("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(h){return h!==null?h:[]}}),_i}var Si,Ms;function Xu(){if(Ms)return Si;Ms=1;var r=Ye();return Si=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(h){return h!==null?h:{}}}),Si}var Ai,Bs;function Ju(){if(Bs)return Ai;Bs=1;var r=Vu();return Ai=new r({explicit:[zu(),Yu(),Xu()]}),Ai}var Ti,js;function Ku(){if(js)return Ti;js=1;var r=Ye();function h(f){if(f===null)return!0;var n=f.length;return n===1&&f==="~"||n===4&&(f==="null"||f==="Null"||f==="NULL")}function c(){return null}function d(f){return f===null}return Ti=new r("tag:yaml.org,2002:null",{kind:"scalar",resolve:h,construct:c,predicate:d,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Ti}var bi,Hs;function Qu(){if(Hs)return bi;Hs=1;var r=Ye();function h(f){if(f===null)return!1;var n=f.length;return n===4&&(f==="true"||f==="True"||f==="TRUE")||n===5&&(f==="false"||f==="False"||f==="FALSE")}function c(f){return f==="true"||f==="True"||f==="TRUE"}function d(f){return Object.prototype.toString.call(f)==="[object Boolean]"}return bi=new r("tag:yaml.org,2002:bool",{kind:"scalar",resolve:h,construct:c,predicate:d,represent:{lowercase:function(f){return f?"true":"false"},uppercase:function(f){return f?"TRUE":"FALSE"},camelcase:function(f){return f?"True":"False"}},defaultStyle:"lowercase"}),bi}var Ri,Gs;function Zu(){if(Gs)return Ri;Gs=1;var r=_r(),h=Ye();function c(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function d(t){return 48<=t&&t<=55}function f(t){return 48<=t&&t<=57}function n(t){if(t===null)return!1;var s=t.length,o=0,u=!1,a;if(!s)return!1;if(a=t[o],(a==="-"||a==="+")&&(a=t[++o]),a==="0"){if(o+1===s)return!0;if(a=t[++o],a==="b"){for(o++;o<s;o++)if(a=t[o],a!=="_"){if(a!=="0"&&a!=="1")return!1;u=!0}return u&&a!=="_"}if(a==="x"){for(o++;o<s;o++)if(a=t[o],a!=="_"){if(!c(t.charCodeAt(o)))return!1;u=!0}return u&&a!=="_"}if(a==="o"){for(o++;o<s;o++)if(a=t[o],a!=="_"){if(!d(t.charCodeAt(o)))return!1;u=!0}return u&&a!=="_"}}if(a==="_")return!1;for(;o<s;o++)if(a=t[o],a!=="_"){if(!f(t.charCodeAt(o)))return!1;u=!0}return!(!u||a==="_")}function e(t){var s=t,o=1,u;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),u=s[0],(u==="-"||u==="+")&&(u==="-"&&(o=-1),s=s.slice(1),u=s[0]),s==="0")return 0;if(u==="0"){if(s[1]==="b")return o*parseInt(s.slice(2),2);if(s[1]==="x")return o*parseInt(s.slice(2),16);if(s[1]==="o")return o*parseInt(s.slice(2),8)}return o*parseInt(s,10)}function i(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!r.isNegativeZero(t)}return Ri=new h("tag:yaml.org,2002:int",{kind:"scalar",resolve:n,construct:e,predicate:i,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Ri}var Ci,Ws;function ec(){if(Ws)return Ci;Ws=1;var r=_r(),h=Ye(),c=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function d(t){return!(t===null||!c.test(t)||t[t.length-1]==="_")}function f(t){var s,o;return s=t.replace(/_/g,"").toLowerCase(),o=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?o===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:o*parseFloat(s,10)}var n=/^[-+]?[0-9]+e/;function e(t,s){var o;if(isNaN(t))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(r.isNegativeZero(t))return"-0.0";return o=t.toString(10),n.test(o)?o.replace("e",".e"):o}function i(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||r.isNegativeZero(t))}return Ci=new h("tag:yaml.org,2002:float",{kind:"scalar",resolve:d,construct:f,predicate:i,represent:e,defaultStyle:"lowercase"}),Ci}var Oi,Vs;function tc(){return Vs||(Vs=1,Oi=Ju().extend({implicit:[Ku(),Qu(),Zu(),ec()]})),Oi}var Ii,zs;function rc(){return zs||(zs=1,Ii=tc()),Ii}var Pi,Ys;function nc(){if(Ys)return Pi;Ys=1;var r=Ye(),h=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),c=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function d(e){return e===null?!1:h.exec(e)!==null||c.exec(e)!==null}function f(e){var i,t,s,o,u,a,p,g=0,y=null,m,_,R;if(i=h.exec(e),i===null&&(i=c.exec(e)),i===null)throw new Error("Date resolve error");if(t=+i[1],s=+i[2]-1,o=+i[3],!i[4])return new Date(Date.UTC(t,s,o));if(u=+i[4],a=+i[5],p=+i[6],i[7]){for(g=i[7].slice(0,3);g.length<3;)g+="0";g=+g}return i[9]&&(m=+i[10],_=+(i[11]||0),y=(m*60+_)*6e4,i[9]==="-"&&(y=-y)),R=new Date(Date.UTC(t,s,o,u,a,p,g)),y&&R.setTime(R.getTime()-y),R}function n(e){return e.toISOString()}return Pi=new r("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:d,construct:f,instanceOf:Date,represent:n}),Pi}var Di,Xs;function ic(){if(Xs)return Di;Xs=1;var r=Ye();function h(c){return c==="<<"||c===null}return Di=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:h}),Di}var Ni,Js;function oc(){if(Js)return Ni;Js=1;var r=Ye(),h=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function c(e){if(e===null)return!1;var i,t,s=0,o=e.length,u=h;for(t=0;t<o;t++)if(i=u.indexOf(e.charAt(t)),!(i>64)){if(i<0)return!1;s+=6}return s%8===0}function d(e){var i,t,s=e.replace(/[\r\n=]/g,""),o=s.length,u=h,a=0,p=[];for(i=0;i<o;i++)i%4===0&&i&&(p.push(a>>16&255),p.push(a>>8&255),p.push(a&255)),a=a<<6|u.indexOf(s.charAt(i));return t=o%4*6,t===0?(p.push(a>>16&255),p.push(a>>8&255),p.push(a&255)):t===18?(p.push(a>>10&255),p.push(a>>2&255)):t===12&&p.push(a>>4&255),new Uint8Array(p)}function f(e){var i="",t=0,s,o,u=e.length,a=h;for(s=0;s<u;s++)s%3===0&&s&&(i+=a[t>>18&63],i+=a[t>>12&63],i+=a[t>>6&63],i+=a[t&63]),t=(t<<8)+e[s];return o=u%3,o===0?(i+=a[t>>18&63],i+=a[t>>12&63],i+=a[t>>6&63],i+=a[t&63]):o===2?(i+=a[t>>10&63],i+=a[t>>4&63],i+=a[t<<2&63],i+=a[64]):o===1&&(i+=a[t>>2&63],i+=a[t<<4&63],i+=a[64],i+=a[64]),i}function n(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}return Ni=new r("tag:yaml.org,2002:binary",{kind:"scalar",resolve:c,construct:d,predicate:n,represent:f}),Ni}var Fi,Ks;function ac(){if(Ks)return Fi;Ks=1;var r=Ye(),h=Object.prototype.hasOwnProperty,c=Object.prototype.toString;function d(n){if(n===null)return!0;var e=[],i,t,s,o,u,a=n;for(i=0,t=a.length;i<t;i+=1){if(s=a[i],u=!1,c.call(s)!=="[object Object]")return!1;for(o in s)if(h.call(s,o))if(!u)u=!0;else return!1;if(!u)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function f(n){return n!==null?n:[]}return Fi=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:d,construct:f}),Fi}var xi,Qs;function sc(){if(Qs)return xi;Qs=1;var r=Ye(),h=Object.prototype.toString;function c(f){if(f===null)return!0;var n,e,i,t,s,o=f;for(s=new Array(o.length),n=0,e=o.length;n<e;n+=1){if(i=o[n],h.call(i)!=="[object Object]"||(t=Object.keys(i),t.length!==1))return!1;s[n]=[t[0],i[t[0]]]}return!0}function d(f){if(f===null)return[];var n,e,i,t,s,o=f;for(s=new Array(o.length),n=0,e=o.length;n<e;n+=1)i=o[n],t=Object.keys(i),s[n]=[t[0],i[t[0]]];return s}return xi=new r("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:c,construct:d}),xi}var Li,Zs;function lc(){if(Zs)return Li;Zs=1;var r=Ye(),h=Object.prototype.hasOwnProperty;function c(f){if(f===null)return!0;var n,e=f;for(n in e)if(h.call(e,n)&&e[n]!==null)return!1;return!0}function d(f){return f!==null?f:{}}return Li=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:c,construct:d}),Li}var $i,el;function $o(){return el||(el=1,$i=rc().extend({implicit:[nc(),ic()],explicit:[oc(),ac(),sc(),lc()]})),$i}var tl;function Od(){if(tl)return Mr;tl=1;var r=_r(),h=Sr(),c=Cd(),d=$o(),f=Object.prototype.hasOwnProperty,n=1,e=2,i=3,t=4,s=1,o=2,u=3,a=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,y=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _(l){return Object.prototype.toString.call(l)}function R(l){return l===10||l===13}function O(l){return l===9||l===32}function I(l){return l===9||l===32||l===10||l===13}function U(l){return l===44||l===91||l===93||l===123||l===125}function b(l){var B;return 48<=l&&l<=57?l-48:(B=l|32,97<=B&&B<=102?B-97+10:-1)}function S(l){return l===120?2:l===117?4:l===85?8:0}function T(l){return 48<=l&&l<=57?l-48:-1}function E(l){return l===48?"\0":l===97?"\x07":l===98?"\b":l===116||l===9?"	":l===110?`
`:l===118?"\v":l===102?"\f":l===114?"\r":l===101?"\x1B":l===32?" ":l===34?'"':l===47?"/":l===92?"\\":l===78?"Â…":l===95?"Â ":l===76?"\u2028":l===80?"\u2029":""}function M(l){return l<=65535?String.fromCharCode(l):String.fromCharCode((l-65536>>10)+55296,(l-65536&1023)+56320)}for(var $=new Array(256),L=new Array(256),k=0;k<256;k++)$[k]=E(k)?1:0,L[k]=E(k);function D(l,B){this.input=l,this.filename=B.filename||null,this.schema=B.schema||d,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=l.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function P(l,B){var G={name:l.filename,buffer:l.input.slice(0,-1),position:l.position,line:l.line,column:l.position-l.lineStart};return G.snippet=c(G),new h(B,G)}function F(l,B){throw P(l,B)}function q(l,B){l.onWarning&&l.onWarning.call(null,P(l,B))}var K={YAML:function(B,G,re){var V,te,Z;B.version!==null&&F(B,"duplication of %YAML directive"),re.length!==1&&F(B,"YAML directive accepts exactly one argument"),V=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),V===null&&F(B,"ill-formed argument of the YAML directive"),te=parseInt(V[1],10),Z=parseInt(V[2],10),te!==1&&F(B,"unacceptable YAML version of the document"),B.version=re[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&q(B,"unsupported YAML version of the document")},TAG:function(B,G,re){var V,te;re.length!==2&&F(B,"TAG directive accepts exactly two arguments"),V=re[0],te=re[1],y.test(V)||F(B,"ill-formed tag handle (first argument) of the TAG directive"),f.call(B.tagMap,V)&&F(B,'there is a previously declared suffix for "'+V+'" tag handle'),m.test(te)||F(B,"ill-formed tag prefix (second argument) of the TAG directive");try{te=decodeURIComponent(te)}catch{F(B,"tag prefix is malformed: "+te)}B.tagMap[V]=te}};function W(l,B,G,re){var V,te,Z,oe;if(B<G){if(oe=l.input.slice(B,G),re)for(V=0,te=oe.length;V<te;V+=1)Z=oe.charCodeAt(V),Z===9||32<=Z&&Z<=1114111||F(l,"expected valid JSON character");else a.test(oe)&&F(l,"the stream contains non-printable characters");l.result+=oe}}function ne(l,B,G,re){var V,te,Z,oe;for(r.isObject(G)||F(l,"cannot merge mappings; the provided source object is unacceptable"),V=Object.keys(G),Z=0,oe=V.length;Z<oe;Z+=1)te=V[Z],f.call(B,te)||(B[te]=G[te],re[te]=!0)}function ce(l,B,G,re,V,te,Z,oe,ge){var ye,Ce;if(Array.isArray(V))for(V=Array.prototype.slice.call(V),ye=0,Ce=V.length;ye<Ce;ye+=1)Array.isArray(V[ye])&&F(l,"nested arrays are not supported inside keys"),typeof V=="object"&&_(V[ye])==="[object Object]"&&(V[ye]="[object Object]");if(typeof V=="object"&&_(V)==="[object Object]"&&(V="[object Object]"),V=String(V),B===null&&(B={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(te))for(ye=0,Ce=te.length;ye<Ce;ye+=1)ne(l,B,te[ye],G);else ne(l,B,te,G);else!l.json&&!f.call(G,V)&&f.call(B,V)&&(l.line=Z||l.line,l.lineStart=oe||l.lineStart,l.position=ge||l.position,F(l,"duplicated mapping key")),V==="__proto__"?Object.defineProperty(B,V,{configurable:!0,enumerable:!0,writable:!0,value:te}):B[V]=te,delete G[V];return B}function ue(l){var B;B=l.input.charCodeAt(l.position),B===10?l.position++:B===13?(l.position++,l.input.charCodeAt(l.position)===10&&l.position++):F(l,"a line break is expected"),l.line+=1,l.lineStart=l.position,l.firstTabInLine=-1}function ie(l,B,G){for(var re=0,V=l.input.charCodeAt(l.position);V!==0;){for(;O(V);)V===9&&l.firstTabInLine===-1&&(l.firstTabInLine=l.position),V=l.input.charCodeAt(++l.position);if(B&&V===35)do V=l.input.charCodeAt(++l.position);while(V!==10&&V!==13&&V!==0);if(R(V))for(ue(l),V=l.input.charCodeAt(l.position),re++,l.lineIndent=0;V===32;)l.lineIndent++,V=l.input.charCodeAt(++l.position);else break}return G!==-1&&re!==0&&l.lineIndent<G&&q(l,"deficient indentation"),re}function Re(l){var B=l.position,G;return G=l.input.charCodeAt(B),!!((G===45||G===46)&&G===l.input.charCodeAt(B+1)&&G===l.input.charCodeAt(B+2)&&(B+=3,G=l.input.charCodeAt(B),G===0||I(G)))}function J(l,B){B===1?l.result+=" ":B>1&&(l.result+=r.repeat(`
`,B-1))}function ve(l,B,G){var re,V,te,Z,oe,ge,ye,Ce,de=l.kind,qe=l.result,w;if(w=l.input.charCodeAt(l.position),I(w)||U(w)||w===35||w===38||w===42||w===33||w===124||w===62||w===39||w===34||w===37||w===64||w===96||(w===63||w===45)&&(V=l.input.charCodeAt(l.position+1),I(V)||G&&U(V)))return!1;for(l.kind="scalar",l.result="",te=Z=l.position,oe=!1;w!==0;){if(w===58){if(V=l.input.charCodeAt(l.position+1),I(V)||G&&U(V))break}else if(w===35){if(re=l.input.charCodeAt(l.position-1),I(re))break}else{if(l.position===l.lineStart&&Re(l)||G&&U(w))break;if(R(w))if(ge=l.line,ye=l.lineStart,Ce=l.lineIndent,ie(l,!1,-1),l.lineIndent>=B){oe=!0,w=l.input.charCodeAt(l.position);continue}else{l.position=Z,l.line=ge,l.lineStart=ye,l.lineIndent=Ce;break}}oe&&(W(l,te,Z,!1),J(l,l.line-ge),te=Z=l.position,oe=!1),O(w)||(Z=l.position+1),w=l.input.charCodeAt(++l.position)}return W(l,te,Z,!1),l.result?!0:(l.kind=de,l.result=qe,!1)}function A(l,B){var G,re,V;if(G=l.input.charCodeAt(l.position),G!==39)return!1;for(l.kind="scalar",l.result="",l.position++,re=V=l.position;(G=l.input.charCodeAt(l.position))!==0;)if(G===39)if(W(l,re,l.position,!0),G=l.input.charCodeAt(++l.position),G===39)re=l.position,l.position++,V=l.position;else return!0;else R(G)?(W(l,re,V,!0),J(l,ie(l,!1,B)),re=V=l.position):l.position===l.lineStart&&Re(l)?F(l,"unexpected end of the document within a single quoted scalar"):(l.position++,V=l.position);F(l,"unexpected end of the stream within a single quoted scalar")}function v(l,B){var G,re,V,te,Z,oe;if(oe=l.input.charCodeAt(l.position),oe!==34)return!1;for(l.kind="scalar",l.result="",l.position++,G=re=l.position;(oe=l.input.charCodeAt(l.position))!==0;){if(oe===34)return W(l,G,l.position,!0),l.position++,!0;if(oe===92){if(W(l,G,l.position,!0),oe=l.input.charCodeAt(++l.position),R(oe))ie(l,!1,B);else if(oe<256&&$[oe])l.result+=L[oe],l.position++;else if((Z=S(oe))>0){for(V=Z,te=0;V>0;V--)oe=l.input.charCodeAt(++l.position),(Z=b(oe))>=0?te=(te<<4)+Z:F(l,"expected hexadecimal character");l.result+=M(te),l.position++}else F(l,"unknown escape sequence");G=re=l.position}else R(oe)?(W(l,G,re,!0),J(l,ie(l,!1,B)),G=re=l.position):l.position===l.lineStart&&Re(l)?F(l,"unexpected end of the document within a double quoted scalar"):(l.position++,re=l.position)}F(l,"unexpected end of the stream within a double quoted scalar")}function j(l,B){var G=!0,re,V,te,Z=l.tag,oe,ge=l.anchor,ye,Ce,de,qe,w,H=Object.create(null),X,z,Q,ee;if(ee=l.input.charCodeAt(l.position),ee===91)Ce=93,w=!1,oe=[];else if(ee===123)Ce=125,w=!0,oe={};else return!1;for(l.anchor!==null&&(l.anchorMap[l.anchor]=oe),ee=l.input.charCodeAt(++l.position);ee!==0;){if(ie(l,!0,B),ee=l.input.charCodeAt(l.position),ee===Ce)return l.position++,l.tag=Z,l.anchor=ge,l.kind=w?"mapping":"sequence",l.result=oe,!0;G?ee===44&&F(l,"expected the node content, but found ','"):F(l,"missed comma between flow collection entries"),z=X=Q=null,de=qe=!1,ee===63&&(ye=l.input.charCodeAt(l.position+1),I(ye)&&(de=qe=!0,l.position++,ie(l,!0,B))),re=l.line,V=l.lineStart,te=l.position,Ue(l,B,n,!1,!0),z=l.tag,X=l.result,ie(l,!0,B),ee=l.input.charCodeAt(l.position),(qe||l.line===re)&&ee===58&&(de=!0,ee=l.input.charCodeAt(++l.position),ie(l,!0,B),Ue(l,B,n,!1,!0),Q=l.result),w?ce(l,oe,H,z,X,Q,re,V,te):de?oe.push(ce(l,null,H,z,X,Q,re,V,te)):oe.push(X),ie(l,!0,B),ee=l.input.charCodeAt(l.position),ee===44?(G=!0,ee=l.input.charCodeAt(++l.position)):G=!1}F(l,"unexpected end of the stream within a flow collection")}function N(l,B){var G,re,V=s,te=!1,Z=!1,oe=B,ge=0,ye=!1,Ce,de;if(de=l.input.charCodeAt(l.position),de===124)re=!1;else if(de===62)re=!0;else return!1;for(l.kind="scalar",l.result="";de!==0;)if(de=l.input.charCodeAt(++l.position),de===43||de===45)s===V?V=de===43?u:o:F(l,"repeat of a chomping mode identifier");else if((Ce=T(de))>=0)Ce===0?F(l,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?F(l,"repeat of an indentation width identifier"):(oe=B+Ce-1,Z=!0);else break;if(O(de)){do de=l.input.charCodeAt(++l.position);while(O(de));if(de===35)do de=l.input.charCodeAt(++l.position);while(!R(de)&&de!==0)}for(;de!==0;){for(ue(l),l.lineIndent=0,de=l.input.charCodeAt(l.position);(!Z||l.lineIndent<oe)&&de===32;)l.lineIndent++,de=l.input.charCodeAt(++l.position);if(!Z&&l.lineIndent>oe&&(oe=l.lineIndent),R(de)){ge++;continue}if(l.lineIndent<oe){V===u?l.result+=r.repeat(`
`,te?1+ge:ge):V===s&&te&&(l.result+=`
`);break}for(re?O(de)?(ye=!0,l.result+=r.repeat(`
`,te?1+ge:ge)):ye?(ye=!1,l.result+=r.repeat(`
`,ge+1)):ge===0?te&&(l.result+=" "):l.result+=r.repeat(`
`,ge):l.result+=r.repeat(`
`,te?1+ge:ge),te=!0,Z=!0,ge=0,G=l.position;!R(de)&&de!==0;)de=l.input.charCodeAt(++l.position);W(l,G,l.position,!1)}return!0}function le(l,B){var G,re=l.tag,V=l.anchor,te=[],Z,oe=!1,ge;if(l.firstTabInLine!==-1)return!1;for(l.anchor!==null&&(l.anchorMap[l.anchor]=te),ge=l.input.charCodeAt(l.position);ge!==0&&(l.firstTabInLine!==-1&&(l.position=l.firstTabInLine,F(l,"tab characters must not be used in indentation")),!(ge!==45||(Z=l.input.charCodeAt(l.position+1),!I(Z))));){if(oe=!0,l.position++,ie(l,!0,-1)&&l.lineIndent<=B){te.push(null),ge=l.input.charCodeAt(l.position);continue}if(G=l.line,Ue(l,B,i,!1,!0),te.push(l.result),ie(l,!0,-1),ge=l.input.charCodeAt(l.position),(l.line===G||l.lineIndent>B)&&ge!==0)F(l,"bad indentation of a sequence entry");else if(l.lineIndent<B)break}return oe?(l.tag=re,l.anchor=V,l.kind="sequence",l.result=te,!0):!1}function me(l,B,G){var re,V,te,Z,oe,ge,ye=l.tag,Ce=l.anchor,de={},qe=Object.create(null),w=null,H=null,X=null,z=!1,Q=!1,ee;if(l.firstTabInLine!==-1)return!1;for(l.anchor!==null&&(l.anchorMap[l.anchor]=de),ee=l.input.charCodeAt(l.position);ee!==0;){if(!z&&l.firstTabInLine!==-1&&(l.position=l.firstTabInLine,F(l,"tab characters must not be used in indentation")),re=l.input.charCodeAt(l.position+1),te=l.line,(ee===63||ee===58)&&I(re))ee===63?(z&&(ce(l,de,qe,w,H,null,Z,oe,ge),w=H=X=null),Q=!0,z=!0,V=!0):z?(z=!1,V=!0):F(l,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),l.position+=1,ee=re;else{if(Z=l.line,oe=l.lineStart,ge=l.position,!Ue(l,G,e,!1,!0))break;if(l.line===te){for(ee=l.input.charCodeAt(l.position);O(ee);)ee=l.input.charCodeAt(++l.position);if(ee===58)ee=l.input.charCodeAt(++l.position),I(ee)||F(l,"a whitespace character is expected after the key-value separator within a block mapping"),z&&(ce(l,de,qe,w,H,null,Z,oe,ge),w=H=X=null),Q=!0,z=!1,V=!1,w=l.tag,H=l.result;else if(Q)F(l,"can not read an implicit mapping pair; a colon is missed");else return l.tag=ye,l.anchor=Ce,!0}else if(Q)F(l,"can not read a block mapping entry; a multiline key may not be an implicit key");else return l.tag=ye,l.anchor=Ce,!0}if((l.line===te||l.lineIndent>B)&&(z&&(Z=l.line,oe=l.lineStart,ge=l.position),Ue(l,B,t,!0,V)&&(z?H=l.result:X=l.result),z||(ce(l,de,qe,w,H,X,Z,oe,ge),w=H=X=null),ie(l,!0,-1),ee=l.input.charCodeAt(l.position)),(l.line===te||l.lineIndent>B)&&ee!==0)F(l,"bad indentation of a mapping entry");else if(l.lineIndent<B)break}return z&&ce(l,de,qe,w,H,null,Z,oe,ge),Q&&(l.tag=ye,l.anchor=Ce,l.kind="mapping",l.result=de),Q}function pe(l){var B,G=!1,re=!1,V,te,Z;if(Z=l.input.charCodeAt(l.position),Z!==33)return!1;if(l.tag!==null&&F(l,"duplication of a tag property"),Z=l.input.charCodeAt(++l.position),Z===60?(G=!0,Z=l.input.charCodeAt(++l.position)):Z===33?(re=!0,V="!!",Z=l.input.charCodeAt(++l.position)):V="!",B=l.position,G){do Z=l.input.charCodeAt(++l.position);while(Z!==0&&Z!==62);l.position<l.length?(te=l.input.slice(B,l.position),Z=l.input.charCodeAt(++l.position)):F(l,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!I(Z);)Z===33&&(re?F(l,"tag suffix cannot contain exclamation marks"):(V=l.input.slice(B-1,l.position+1),y.test(V)||F(l,"named tag handle cannot contain such characters"),re=!0,B=l.position+1)),Z=l.input.charCodeAt(++l.position);te=l.input.slice(B,l.position),g.test(te)&&F(l,"tag suffix cannot contain flow indicator characters")}te&&!m.test(te)&&F(l,"tag name cannot contain such characters: "+te);try{te=decodeURIComponent(te)}catch{F(l,"tag name is malformed: "+te)}return G?l.tag=te:f.call(l.tagMap,V)?l.tag=l.tagMap[V]+te:V==="!"?l.tag="!"+te:V==="!!"?l.tag="tag:yaml.org,2002:"+te:F(l,'undeclared tag handle "'+V+'"'),!0}function Se(l){var B,G;if(G=l.input.charCodeAt(l.position),G!==38)return!1;for(l.anchor!==null&&F(l,"duplication of an anchor property"),G=l.input.charCodeAt(++l.position),B=l.position;G!==0&&!I(G)&&!U(G);)G=l.input.charCodeAt(++l.position);return l.position===B&&F(l,"name of an anchor node must contain at least one character"),l.anchor=l.input.slice(B,l.position),!0}function Ee(l){var B,G,re;if(re=l.input.charCodeAt(l.position),re!==42)return!1;for(re=l.input.charCodeAt(++l.position),B=l.position;re!==0&&!I(re)&&!U(re);)re=l.input.charCodeAt(++l.position);return l.position===B&&F(l,"name of an alias node must contain at least one character"),G=l.input.slice(B,l.position),f.call(l.anchorMap,G)||F(l,'unidentified alias "'+G+'"'),l.result=l.anchorMap[G],ie(l,!0,-1),!0}function Ue(l,B,G,re,V){var te,Z,oe,ge=1,ye=!1,Ce=!1,de,qe,w,H,X,z;if(l.listener!==null&&l.listener("open",l),l.tag=null,l.anchor=null,l.kind=null,l.result=null,te=Z=oe=t===G||i===G,re&&ie(l,!0,-1)&&(ye=!0,l.lineIndent>B?ge=1:l.lineIndent===B?ge=0:l.lineIndent<B&&(ge=-1)),ge===1)for(;pe(l)||Se(l);)ie(l,!0,-1)?(ye=!0,oe=te,l.lineIndent>B?ge=1:l.lineIndent===B?ge=0:l.lineIndent<B&&(ge=-1)):oe=!1;if(oe&&(oe=ye||V),(ge===1||t===G)&&(n===G||e===G?X=B:X=B+1,z=l.position-l.lineStart,ge===1?oe&&(le(l,z)||me(l,z,X))||j(l,X)?Ce=!0:(Z&&N(l,X)||A(l,X)||v(l,X)?Ce=!0:Ee(l)?(Ce=!0,(l.tag!==null||l.anchor!==null)&&F(l,"alias node should not have any properties")):ve(l,X,n===G)&&(Ce=!0,l.tag===null&&(l.tag="?")),l.anchor!==null&&(l.anchorMap[l.anchor]=l.result)):ge===0&&(Ce=oe&&le(l,z))),l.tag===null)l.anchor!==null&&(l.anchorMap[l.anchor]=l.result);else if(l.tag==="?"){for(l.result!==null&&l.kind!=="scalar"&&F(l,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+l.kind+'"'),de=0,qe=l.implicitTypes.length;de<qe;de+=1)if(H=l.implicitTypes[de],H.resolve(l.result)){l.result=H.construct(l.result),l.tag=H.tag,l.anchor!==null&&(l.anchorMap[l.anchor]=l.result);break}}else if(l.tag!=="!"){if(f.call(l.typeMap[l.kind||"fallback"],l.tag))H=l.typeMap[l.kind||"fallback"][l.tag];else for(H=null,w=l.typeMap.multi[l.kind||"fallback"],de=0,qe=w.length;de<qe;de+=1)if(l.tag.slice(0,w[de].tag.length)===w[de].tag){H=w[de];break}H||F(l,"unknown tag !<"+l.tag+">"),l.result!==null&&H.kind!==l.kind&&F(l,"unacceptable node kind for !<"+l.tag+'> tag; it should be "'+H.kind+'", not "'+l.kind+'"'),H.resolve(l.result,l.tag)?(l.result=H.construct(l.result,l.tag),l.anchor!==null&&(l.anchorMap[l.anchor]=l.result)):F(l,"cannot resolve a node with !<"+l.tag+"> explicit tag")}return l.listener!==null&&l.listener("close",l),l.tag!==null||l.anchor!==null||Ce}function Pe(l){var B=l.position,G,re,V,te=!1,Z;for(l.version=null,l.checkLineBreaks=l.legacy,l.tagMap=Object.create(null),l.anchorMap=Object.create(null);(Z=l.input.charCodeAt(l.position))!==0&&(ie(l,!0,-1),Z=l.input.charCodeAt(l.position),!(l.lineIndent>0||Z!==37));){for(te=!0,Z=l.input.charCodeAt(++l.position),G=l.position;Z!==0&&!I(Z);)Z=l.input.charCodeAt(++l.position);for(re=l.input.slice(G,l.position),V=[],re.length<1&&F(l,"directive name must not be less than one character in length");Z!==0;){for(;O(Z);)Z=l.input.charCodeAt(++l.position);if(Z===35){do Z=l.input.charCodeAt(++l.position);while(Z!==0&&!R(Z));break}if(R(Z))break;for(G=l.position;Z!==0&&!I(Z);)Z=l.input.charCodeAt(++l.position);V.push(l.input.slice(G,l.position))}Z!==0&&ue(l),f.call(K,re)?K[re](l,re,V):q(l,'unknown document directive "'+re+'"')}if(ie(l,!0,-1),l.lineIndent===0&&l.input.charCodeAt(l.position)===45&&l.input.charCodeAt(l.position+1)===45&&l.input.charCodeAt(l.position+2)===45?(l.position+=3,ie(l,!0,-1)):te&&F(l,"directives end mark is expected"),Ue(l,l.lineIndent-1,t,!1,!0),ie(l,!0,-1),l.checkLineBreaks&&p.test(l.input.slice(B,l.position))&&q(l,"non-ASCII line breaks are interpreted as content"),l.documents.push(l.result),l.position===l.lineStart&&Re(l)){l.input.charCodeAt(l.position)===46&&(l.position+=3,ie(l,!0,-1));return}if(l.position<l.length-1)F(l,"end of the stream or a document separator is expected");else return}function Ge(l,B){l=String(l),B=B||{},l.length!==0&&(l.charCodeAt(l.length-1)!==10&&l.charCodeAt(l.length-1)!==13&&(l+=`
`),l.charCodeAt(0)===65279&&(l=l.slice(1)));var G=new D(l,B),re=l.indexOf("\0");for(re!==-1&&(G.position=re,F(G,"null byte is not allowed in input")),G.input+="\0";G.input.charCodeAt(G.position)===32;)G.lineIndent+=1,G.position+=1;for(;G.position<G.length-1;)Pe(G);return G.documents}function At(l,B,G){B!==null&&typeof B=="object"&&typeof G>"u"&&(G=B,B=null);var re=Ge(l,G);if(typeof B!="function")return re;for(var V=0,te=re.length;V<te;V+=1)B(re[V])}function ft(l,B){var G=Ge(l,B);if(G.length!==0){if(G.length===1)return G[0];throw new h("expected a single document in the stream, but found more")}}return Mr.loadAll=At,Mr.load=ft,Mr}var Ui={},rl;function Id(){if(rl)return Ui;rl=1;var r=_r(),h=Sr(),c=$o(),d=Object.prototype.toString,f=Object.prototype.hasOwnProperty,n=65279,e=9,i=10,t=13,s=32,o=33,u=34,a=35,p=37,g=38,y=39,m=42,_=44,R=45,O=58,I=61,U=62,b=63,S=64,T=91,E=93,M=96,$=123,L=124,k=125,D={};D[0]="\\0",D[7]="\\a",D[8]="\\b",D[9]="\\t",D[10]="\\n",D[11]="\\v",D[12]="\\f",D[13]="\\r",D[27]="\\e",D[34]='\\"',D[92]="\\\\",D[133]="\\N",D[160]="\\_",D[8232]="\\L",D[8233]="\\P";var P=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function q(w,H){var X,z,Q,ee,fe,ae,he;if(H===null)return{};for(X={},z=Object.keys(H),Q=0,ee=z.length;Q<ee;Q+=1)fe=z[Q],ae=String(H[fe]),fe.slice(0,2)==="!!"&&(fe="tag:yaml.org,2002:"+fe.slice(2)),he=w.compiledTypeMap.fallback[fe],he&&f.call(he.styleAliases,ae)&&(ae=he.styleAliases[ae]),X[fe]=ae;return X}function K(w){var H,X,z;if(H=w.toString(16).toUpperCase(),w<=255)X="x",z=2;else if(w<=65535)X="u",z=4;else if(w<=4294967295)X="U",z=8;else throw new h("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+X+r.repeat("0",z-H.length)+H}var W=1,ne=2;function ce(w){this.schema=w.schema||c,this.indent=Math.max(1,w.indent||2),this.noArrayIndent=w.noArrayIndent||!1,this.skipInvalid=w.skipInvalid||!1,this.flowLevel=r.isNothing(w.flowLevel)?-1:w.flowLevel,this.styleMap=q(this.schema,w.styles||null),this.sortKeys=w.sortKeys||!1,this.lineWidth=w.lineWidth||80,this.noRefs=w.noRefs||!1,this.noCompatMode=w.noCompatMode||!1,this.condenseFlow=w.condenseFlow||!1,this.quotingType=w.quotingType==='"'?ne:W,this.forceQuotes=w.forceQuotes||!1,this.replacer=typeof w.replacer=="function"?w.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ue(w,H){for(var X=r.repeat(" ",H),z=0,Q=-1,ee="",fe,ae=w.length;z<ae;)Q=w.indexOf(`
`,z),Q===-1?(fe=w.slice(z),z=ae):(fe=w.slice(z,Q+1),z=Q+1),fe.length&&fe!==`
`&&(ee+=X),ee+=fe;return ee}function ie(w,H){return`
`+r.repeat(" ",w.indent*H)}function Re(w,H){var X,z,Q;for(X=0,z=w.implicitTypes.length;X<z;X+=1)if(Q=w.implicitTypes[X],Q.resolve(H))return!0;return!1}function J(w){return w===s||w===e}function ve(w){return 32<=w&&w<=126||161<=w&&w<=55295&&w!==8232&&w!==8233||57344<=w&&w<=65533&&w!==n||65536<=w&&w<=1114111}function A(w){return ve(w)&&w!==n&&w!==t&&w!==i}function v(w,H,X){var z=A(w),Q=z&&!J(w);return(X?z:z&&w!==_&&w!==T&&w!==E&&w!==$&&w!==k)&&w!==a&&!(H===O&&!Q)||A(H)&&!J(H)&&w===a||H===O&&Q}function j(w){return ve(w)&&w!==n&&!J(w)&&w!==R&&w!==b&&w!==O&&w!==_&&w!==T&&w!==E&&w!==$&&w!==k&&w!==a&&w!==g&&w!==m&&w!==o&&w!==L&&w!==I&&w!==U&&w!==y&&w!==u&&w!==p&&w!==S&&w!==M}function N(w){return!J(w)&&w!==O}function le(w,H){var X=w.charCodeAt(H),z;return X>=55296&&X<=56319&&H+1<w.length&&(z=w.charCodeAt(H+1),z>=56320&&z<=57343)?(X-55296)*1024+z-56320+65536:X}function me(w){var H=/^\n* /;return H.test(w)}var pe=1,Se=2,Ee=3,Ue=4,Pe=5;function Ge(w,H,X,z,Q,ee,fe,ae){var he,_e=0,De=null,Le=!1,Oe=!1,$t=z!==-1,nt=-1,Tt=j(le(w,0))&&N(le(w,w.length-1));if(H||fe)for(he=0;he<w.length;_e>=65536?he+=2:he++){if(_e=le(w,he),!ve(_e))return Pe;Tt=Tt&&v(_e,De,ae),De=_e}else{for(he=0;he<w.length;_e>=65536?he+=2:he++){if(_e=le(w,he),_e===i)Le=!0,$t&&(Oe=Oe||he-nt-1>z&&w[nt+1]!==" ",nt=he);else if(!ve(_e))return Pe;Tt=Tt&&v(_e,De,ae),De=_e}Oe=Oe||$t&&he-nt-1>z&&w[nt+1]!==" "}return!Le&&!Oe?Tt&&!fe&&!Q(w)?pe:ee===ne?Pe:Se:X>9&&me(w)?Pe:fe?ee===ne?Pe:Se:Oe?Ue:Ee}function At(w,H,X,z,Q){w.dump=function(){if(H.length===0)return w.quotingType===ne?'""':"''";if(!w.noCompatMode&&(P.indexOf(H)!==-1||F.test(H)))return w.quotingType===ne?'"'+H+'"':"'"+H+"'";var ee=w.indent*Math.max(1,X),fe=w.lineWidth===-1?-1:Math.max(Math.min(w.lineWidth,40),w.lineWidth-ee),ae=z||w.flowLevel>-1&&X>=w.flowLevel;function he(_e){return Re(w,_e)}switch(Ge(H,ae,w.indent,fe,he,w.quotingType,w.forceQuotes&&!z,Q)){case pe:return H;case Se:return"'"+H.replace(/'/g,"''")+"'";case Ee:return"|"+ft(H,w.indent)+l(ue(H,ee));case Ue:return">"+ft(H,w.indent)+l(ue(B(H,fe),ee));case Pe:return'"'+re(H)+'"';default:throw new h("impossible error: invalid scalar style")}}()}function ft(w,H){var X=me(w)?String(H):"",z=w[w.length-1]===`
`,Q=z&&(w[w.length-2]===`
`||w===`
`),ee=Q?"+":z?"":"-";return X+ee+`
`}function l(w){return w[w.length-1]===`
`?w.slice(0,-1):w}function B(w,H){for(var X=/(\n+)([^\n]*)/g,z=function(){var _e=w.indexOf(`
`);return _e=_e!==-1?_e:w.length,X.lastIndex=_e,G(w.slice(0,_e),H)}(),Q=w[0]===`
`||w[0]===" ",ee,fe;fe=X.exec(w);){var ae=fe[1],he=fe[2];ee=he[0]===" ",z+=ae+(!Q&&!ee&&he!==""?`
`:"")+G(he,H),Q=ee}return z}function G(w,H){if(w===""||w[0]===" ")return w;for(var X=/ [^ ]/g,z,Q=0,ee,fe=0,ae=0,he="";z=X.exec(w);)ae=z.index,ae-Q>H&&(ee=fe>Q?fe:ae,he+=`
`+w.slice(Q,ee),Q=ee+1),fe=ae;return he+=`
`,w.length-Q>H&&fe>Q?he+=w.slice(Q,fe)+`
`+w.slice(fe+1):he+=w.slice(Q),he.slice(1)}function re(w){for(var H="",X=0,z,Q=0;Q<w.length;X>=65536?Q+=2:Q++)X=le(w,Q),z=D[X],!z&&ve(X)?(H+=w[Q],X>=65536&&(H+=w[Q+1])):H+=z||K(X);return H}function V(w,H,X){var z="",Q=w.tag,ee,fe,ae;for(ee=0,fe=X.length;ee<fe;ee+=1)ae=X[ee],w.replacer&&(ae=w.replacer.call(X,String(ee),ae)),(ye(w,H,ae,!1,!1)||typeof ae>"u"&&ye(w,H,null,!1,!1))&&(z!==""&&(z+=","+(w.condenseFlow?"":" ")),z+=w.dump);w.tag=Q,w.dump="["+z+"]"}function te(w,H,X,z){var Q="",ee=w.tag,fe,ae,he;for(fe=0,ae=X.length;fe<ae;fe+=1)he=X[fe],w.replacer&&(he=w.replacer.call(X,String(fe),he)),(ye(w,H+1,he,!0,!0,!1,!0)||typeof he>"u"&&ye(w,H+1,null,!0,!0,!1,!0))&&((!z||Q!=="")&&(Q+=ie(w,H)),w.dump&&i===w.dump.charCodeAt(0)?Q+="-":Q+="- ",Q+=w.dump);w.tag=ee,w.dump=Q||"[]"}function Z(w,H,X){var z="",Q=w.tag,ee=Object.keys(X),fe,ae,he,_e,De;for(fe=0,ae=ee.length;fe<ae;fe+=1)De="",z!==""&&(De+=", "),w.condenseFlow&&(De+='"'),he=ee[fe],_e=X[he],w.replacer&&(_e=w.replacer.call(X,he,_e)),ye(w,H,he,!1,!1)&&(w.dump.length>1024&&(De+="? "),De+=w.dump+(w.condenseFlow?'"':"")+":"+(w.condenseFlow?"":" "),ye(w,H,_e,!1,!1)&&(De+=w.dump,z+=De));w.tag=Q,w.dump="{"+z+"}"}function oe(w,H,X,z){var Q="",ee=w.tag,fe=Object.keys(X),ae,he,_e,De,Le,Oe;if(w.sortKeys===!0)fe.sort();else if(typeof w.sortKeys=="function")fe.sort(w.sortKeys);else if(w.sortKeys)throw new h("sortKeys must be a boolean or a function");for(ae=0,he=fe.length;ae<he;ae+=1)Oe="",(!z||Q!=="")&&(Oe+=ie(w,H)),_e=fe[ae],De=X[_e],w.replacer&&(De=w.replacer.call(X,_e,De)),ye(w,H+1,_e,!0,!0,!0)&&(Le=w.tag!==null&&w.tag!=="?"||w.dump&&w.dump.length>1024,Le&&(w.dump&&i===w.dump.charCodeAt(0)?Oe+="?":Oe+="? "),Oe+=w.dump,Le&&(Oe+=ie(w,H)),ye(w,H+1,De,!0,Le)&&(w.dump&&i===w.dump.charCodeAt(0)?Oe+=":":Oe+=": ",Oe+=w.dump,Q+=Oe));w.tag=ee,w.dump=Q||"{}"}function ge(w,H,X){var z,Q,ee,fe,ae,he;for(Q=X?w.explicitTypes:w.implicitTypes,ee=0,fe=Q.length;ee<fe;ee+=1)if(ae=Q[ee],(ae.instanceOf||ae.predicate)&&(!ae.instanceOf||typeof H=="object"&&H instanceof ae.instanceOf)&&(!ae.predicate||ae.predicate(H))){if(X?ae.multi&&ae.representName?w.tag=ae.representName(H):w.tag=ae.tag:w.tag="?",ae.represent){if(he=w.styleMap[ae.tag]||ae.defaultStyle,d.call(ae.represent)==="[object Function]")z=ae.represent(H,he);else if(f.call(ae.represent,he))z=ae.represent[he](H,he);else throw new h("!<"+ae.tag+'> tag resolver accepts not "'+he+'" style');w.dump=z}return!0}return!1}function ye(w,H,X,z,Q,ee,fe){w.tag=null,w.dump=X,ge(w,X,!1)||ge(w,X,!0);var ae=d.call(w.dump),he=z,_e;z&&(z=w.flowLevel<0||w.flowLevel>H);var De=ae==="[object Object]"||ae==="[object Array]",Le,Oe;if(De&&(Le=w.duplicates.indexOf(X),Oe=Le!==-1),(w.tag!==null&&w.tag!=="?"||Oe||w.indent!==2&&H>0)&&(Q=!1),Oe&&w.usedDuplicates[Le])w.dump="*ref_"+Le;else{if(De&&Oe&&!w.usedDuplicates[Le]&&(w.usedDuplicates[Le]=!0),ae==="[object Object]")z&&Object.keys(w.dump).length!==0?(oe(w,H,w.dump,Q),Oe&&(w.dump="&ref_"+Le+w.dump)):(Z(w,H,w.dump),Oe&&(w.dump="&ref_"+Le+" "+w.dump));else if(ae==="[object Array]")z&&w.dump.length!==0?(w.noArrayIndent&&!fe&&H>0?te(w,H-1,w.dump,Q):te(w,H,w.dump,Q),Oe&&(w.dump="&ref_"+Le+w.dump)):(V(w,H,w.dump),Oe&&(w.dump="&ref_"+Le+" "+w.dump));else if(ae==="[object String]")w.tag!=="?"&&At(w,w.dump,H,ee,he);else{if(ae==="[object Undefined]")return!1;if(w.skipInvalid)return!1;throw new h("unacceptable kind of an object to dump "+ae)}w.tag!==null&&w.tag!=="?"&&(_e=encodeURI(w.tag[0]==="!"?w.tag.slice(1):w.tag).replace(/!/g,"%21"),w.tag[0]==="!"?_e="!"+_e:_e.slice(0,18)==="tag:yaml.org,2002:"?_e="!!"+_e.slice(18):_e="!<"+_e+">",w.dump=_e+" "+w.dump)}return!0}function Ce(w,H){var X=[],z=[],Q,ee;for(de(w,X,z),Q=0,ee=z.length;Q<ee;Q+=1)H.duplicates.push(X[z[Q]]);H.usedDuplicates=new Array(ee)}function de(w,H,X){var z,Q,ee;if(w!==null&&typeof w=="object")if(Q=H.indexOf(w),Q!==-1)X.indexOf(Q)===-1&&X.push(Q);else if(H.push(w),Array.isArray(w))for(Q=0,ee=w.length;Q<ee;Q+=1)de(w[Q],H,X);else for(z=Object.keys(w),Q=0,ee=z.length;Q<ee;Q+=1)de(w[z[Q]],H,X)}function qe(w,H){H=H||{};var X=new ce(H);X.noRefs||Ce(w,X);var z=w;return X.replacer&&(z=X.replacer.call({"":z},"",z)),ye(X,0,z,!0,!0)?X.dump+`
`:""}return Ui.dump=qe,Ui}var nl;function Uo(){if(nl)return ze;nl=1;var r=Od(),h=Id();function c(d,f){return function(){throw new Error("Function yaml."+d+" is removed in js-yaml 4. Use yaml."+f+" instead, which is now safe by default.")}}return ze.Type=Ye(),ze.Schema=Vu(),ze.FAILSAFE_SCHEMA=Ju(),ze.JSON_SCHEMA=tc(),ze.CORE_SCHEMA=rc(),ze.DEFAULT_SCHEMA=$o(),ze.load=r.load,ze.loadAll=r.loadAll,ze.dump=h.dump,ze.YAMLException=Sr(),ze.types={binary:oc(),float:ec(),map:Xu(),null:Ku(),pairs:sc(),set:lc(),timestamp:nc(),bool:Qu(),int:Zu(),merge:ic(),omap:ac(),seq:Yu(),str:zu()},ze.safeLoad=c("safeLoad","load"),ze.safeLoadAll=c("safeLoadAll","loadAll"),ze.safeDump=c("safeDump","dump"),ze}var er={},il;function Pd(){if(il)return er;il=1,Object.defineProperty(er,"__esModule",{value:!0}),er.Lazy=void 0;class r{constructor(c){this._value=null,this.creator=c}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const c=this.creator();return this.value=c,c}set value(c){this._value=c,this.creator=null}}return er.Lazy=r,er}var Br={exports:{}},qi,ol;function Xr(){if(ol)return qi;ol=1;const r="2.0.0",h=256,c=Number.MAX_SAFE_INTEGER||9007199254740991,d=16,f=h-6;return qi={MAX_LENGTH:h,MAX_SAFE_COMPONENT_LENGTH:d,MAX_SAFE_BUILD_LENGTH:f,MAX_SAFE_INTEGER:c,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:r,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},qi}var ki,al;function Jr(){return al||(al=1,ki=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...h)=>console.error("SEMVER",...h):()=>{}),ki}var sl;function Ar(){return sl||(sl=1,function(r,h){const{MAX_SAFE_COMPONENT_LENGTH:c,MAX_SAFE_BUILD_LENGTH:d,MAX_LENGTH:f}=Xr(),n=Jr();h=r.exports={};const e=h.re=[],i=h.safeRe=[],t=h.src=[],s=h.safeSrc=[],o=h.t={};let u=0;const a="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",f],[a,d]],g=m=>{for(const[_,R]of p)m=m.split(`${_}*`).join(`${_}{0,${R}}`).split(`${_}+`).join(`${_}{1,${R}}`);return m},y=(m,_,R)=>{const O=g(_),I=u++;n(m,I,_),o[m]=I,t[I]=_,s[I]=O,e[I]=new RegExp(_,R?"g":void 0),i[I]=new RegExp(O,R?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${a}*`),y("MAINVERSION",`(${t[o.NUMERICIDENTIFIER]})\\.(${t[o.NUMERICIDENTIFIER]})\\.(${t[o.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${t[o.NUMERICIDENTIFIERLOOSE]})\\.(${t[o.NUMERICIDENTIFIERLOOSE]})\\.(${t[o.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${t[o.NUMERICIDENTIFIER]}|${t[o.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${t[o.NUMERICIDENTIFIERLOOSE]}|${t[o.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${t[o.PRERELEASEIDENTIFIER]}(?:\\.${t[o.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${t[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${t[o.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${a}+`),y("BUILD",`(?:\\+(${t[o.BUILDIDENTIFIER]}(?:\\.${t[o.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${t[o.MAINVERSION]}${t[o.PRERELEASE]}?${t[o.BUILD]}?`),y("FULL",`^${t[o.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${t[o.MAINVERSIONLOOSE]}${t[o.PRERELEASELOOSE]}?${t[o.BUILD]}?`),y("LOOSE",`^${t[o.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${t[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${t[o.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${t[o.XRANGEIDENTIFIER]})(?:\\.(${t[o.XRANGEIDENTIFIER]})(?:\\.(${t[o.XRANGEIDENTIFIER]})(?:${t[o.PRERELEASE]})?${t[o.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${t[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${t[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${t[o.XRANGEIDENTIFIERLOOSE]})(?:${t[o.PRERELEASELOOSE]})?${t[o.BUILD]}?)?)?`),y("XRANGE",`^${t[o.GTLT]}\\s*${t[o.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${t[o.GTLT]}\\s*${t[o.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${c}})(?:\\.(\\d{1,${c}}))?(?:\\.(\\d{1,${c}}))?`),y("COERCE",`${t[o.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",t[o.COERCEPLAIN]+`(?:${t[o.PRERELEASE]})?(?:${t[o.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",t[o.COERCE],!0),y("COERCERTLFULL",t[o.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${t[o.LONETILDE]}\\s+`,!0),h.tildeTrimReplace="$1~",y("TILDE",`^${t[o.LONETILDE]}${t[o.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${t[o.LONETILDE]}${t[o.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${t[o.LONECARET]}\\s+`,!0),h.caretTrimReplace="$1^",y("CARET",`^${t[o.LONECARET]}${t[o.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${t[o.LONECARET]}${t[o.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${t[o.GTLT]}\\s*(${t[o.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${t[o.GTLT]}\\s*(${t[o.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${t[o.GTLT]}\\s*(${t[o.LOOSEPLAIN]}|${t[o.XRANGEPLAIN]})`,!0),h.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${t[o.XRANGEPLAIN]})\\s+-\\s+(${t[o.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${t[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${t[o.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(Br,Br.exports)),Br.exports}var Mi,ll;function qo(){if(ll)return Mi;ll=1;const r=Object.freeze({loose:!0}),h=Object.freeze({});return Mi=d=>d?typeof d!="object"?r:d:h,Mi}var Bi,ul;function uc(){if(ul)return Bi;ul=1;const r=/^[0-9]+$/,h=(d,f)=>{const n=r.test(d),e=r.test(f);return n&&e&&(d=+d,f=+f),d===f?0:n&&!e?-1:e&&!n?1:d<f?-1:1};return Bi={compareIdentifiers:h,rcompareIdentifiers:(d,f)=>h(f,d)},Bi}var ji,cl;function Xe(){if(cl)return ji;cl=1;const r=Jr(),{MAX_LENGTH:h,MAX_SAFE_INTEGER:c}=Xr(),{safeRe:d,safeSrc:f,t:n}=Ar(),e=qo(),{compareIdentifiers:i}=uc();class t{constructor(o,u){if(u=e(u),o instanceof t){if(o.loose===!!u.loose&&o.includePrerelease===!!u.includePrerelease)return o;o=o.version}else if(typeof o!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof o}".`);if(o.length>h)throw new TypeError(`version is longer than ${h} characters`);r("SemVer",o,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const a=o.trim().match(u.loose?d[n.LOOSE]:d[n.FULL]);if(!a)throw new TypeError(`Invalid Version: ${o}`);if(this.raw=o,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>c||this.major<0)throw new TypeError("Invalid major version");if(this.minor>c||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>c||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const g=+p;if(g>=0&&g<c)return g}return p}):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(o){if(r("SemVer.compare",this.version,this.options,o),!(o instanceof t)){if(typeof o=="string"&&o===this.version)return 0;o=new t(o,this.options)}return o.version===this.version?0:this.compareMain(o)||this.comparePre(o)}compareMain(o){return o instanceof t||(o=new t(o,this.options)),i(this.major,o.major)||i(this.minor,o.minor)||i(this.patch,o.patch)}comparePre(o){if(o instanceof t||(o=new t(o,this.options)),this.prerelease.length&&!o.prerelease.length)return-1;if(!this.prerelease.length&&o.prerelease.length)return 1;if(!this.prerelease.length&&!o.prerelease.length)return 0;let u=0;do{const a=this.prerelease[u],p=o.prerelease[u];if(r("prerelease compare",u,a,p),a===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(a===void 0)return-1;if(a===p)continue;return i(a,p)}while(++u)}compareBuild(o){o instanceof t||(o=new t(o,this.options));let u=0;do{const a=this.build[u],p=o.build[u];if(r("build compare",u,a,p),a===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(a===void 0)return-1;if(a===p)continue;return i(a,p)}while(++u)}inc(o,u,a){if(o.startsWith("pre")){if(!u&&a===!1)throw new Error("invalid increment argument: identifier is empty");if(u){const p=new RegExp(`^${this.options.loose?f[n.PRERELEASELOOSE]:f[n.PRERELEASE]}$`),g=`-${u}`.match(p);if(!g||g[1]!==u)throw new Error(`invalid identifier: ${u}`)}}switch(o){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,a),this.inc("pre",u,a);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,a),this.inc("pre",u,a);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(a)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let g=this.prerelease.length;for(;--g>=0;)typeof this.prerelease[g]=="number"&&(this.prerelease[g]++,g=-2);if(g===-1){if(u===this.prerelease.join(".")&&a===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(u){let g=[u,p];a===!1&&(g=[u]),i(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=g):this.prerelease=g}break}default:throw new Error(`invalid increment argument: ${o}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ji=t,ji}var Hi,fl;function Wt(){if(fl)return Hi;fl=1;const r=Xe();return Hi=(c,d,f=!1)=>{if(c instanceof r)return c;try{return new r(c,d)}catch(n){if(!f)return null;throw n}},Hi}var Gi,dl;function Dd(){if(dl)return Gi;dl=1;const r=Wt();return Gi=(c,d)=>{const f=r(c,d);return f?f.version:null},Gi}var Wi,hl;function Nd(){if(hl)return Wi;hl=1;const r=Wt();return Wi=(c,d)=>{const f=r(c.trim().replace(/^[=v]+/,""),d);return f?f.version:null},Wi}var Vi,pl;function Fd(){if(pl)return Vi;pl=1;const r=Xe();return Vi=(c,d,f,n,e)=>{typeof f=="string"&&(e=n,n=f,f=void 0);try{return new r(c instanceof r?c.version:c,f).inc(d,n,e).version}catch{return null}},Vi}var zi,ml;function xd(){if(ml)return zi;ml=1;const r=Wt();return zi=(c,d)=>{const f=r(c,null,!0),n=r(d,null,!0),e=f.compare(n);if(e===0)return null;const i=e>0,t=i?f:n,s=i?n:f,o=!!t.prerelease.length;if(!!s.prerelease.length&&!o){if(!s.patch&&!s.minor)return"major";if(s.compareMain(t)===0)return s.minor&&!s.patch?"minor":"patch"}const a=o?"pre":"";return f.major!==n.major?a+"major":f.minor!==n.minor?a+"minor":f.patch!==n.patch?a+"patch":"prerelease"},zi}var Yi,gl;function Ld(){if(gl)return Yi;gl=1;const r=Xe();return Yi=(c,d)=>new r(c,d).major,Yi}var Xi,yl;function $d(){if(yl)return Xi;yl=1;const r=Xe();return Xi=(c,d)=>new r(c,d).minor,Xi}var Ji,vl;function Ud(){if(vl)return Ji;vl=1;const r=Xe();return Ji=(c,d)=>new r(c,d).patch,Ji}var Ki,El;function qd(){if(El)return Ki;El=1;const r=Wt();return Ki=(c,d)=>{const f=r(c,d);return f&&f.prerelease.length?f.prerelease:null},Ki}var Qi,wl;function at(){if(wl)return Qi;wl=1;const r=Xe();return Qi=(c,d,f)=>new r(c,f).compare(new r(d,f)),Qi}var Zi,_l;function kd(){if(_l)return Zi;_l=1;const r=at();return Zi=(c,d,f)=>r(d,c,f),Zi}var eo,Sl;function Md(){if(Sl)return eo;Sl=1;const r=at();return eo=(c,d)=>r(c,d,!0),eo}var to,Al;function ko(){if(Al)return to;Al=1;const r=Xe();return to=(c,d,f)=>{const n=new r(c,f),e=new r(d,f);return n.compare(e)||n.compareBuild(e)},to}var ro,Tl;function Bd(){if(Tl)return ro;Tl=1;const r=ko();return ro=(c,d)=>c.sort((f,n)=>r(f,n,d)),ro}var no,bl;function jd(){if(bl)return no;bl=1;const r=ko();return no=(c,d)=>c.sort((f,n)=>r(n,f,d)),no}var io,Rl;function Kr(){if(Rl)return io;Rl=1;const r=at();return io=(c,d,f)=>r(c,d,f)>0,io}var oo,Cl;function Mo(){if(Cl)return oo;Cl=1;const r=at();return oo=(c,d,f)=>r(c,d,f)<0,oo}var ao,Ol;function cc(){if(Ol)return ao;Ol=1;const r=at();return ao=(c,d,f)=>r(c,d,f)===0,ao}var so,Il;function fc(){if(Il)return so;Il=1;const r=at();return so=(c,d,f)=>r(c,d,f)!==0,so}var lo,Pl;function Bo(){if(Pl)return lo;Pl=1;const r=at();return lo=(c,d,f)=>r(c,d,f)>=0,lo}var uo,Dl;function jo(){if(Dl)return uo;Dl=1;const r=at();return uo=(c,d,f)=>r(c,d,f)<=0,uo}var co,Nl;function dc(){if(Nl)return co;Nl=1;const r=cc(),h=fc(),c=Kr(),d=Bo(),f=Mo(),n=jo();return co=(i,t,s,o)=>{switch(t){case"===":return typeof i=="object"&&(i=i.version),typeof s=="object"&&(s=s.version),i===s;case"!==":return typeof i=="object"&&(i=i.version),typeof s=="object"&&(s=s.version),i!==s;case"":case"=":case"==":return r(i,s,o);case"!=":return h(i,s,o);case">":return c(i,s,o);case">=":return d(i,s,o);case"<":return f(i,s,o);case"<=":return n(i,s,o);default:throw new TypeError(`Invalid operator: ${t}`)}},co}var fo,Fl;function Hd(){if(Fl)return fo;Fl=1;const r=Xe(),h=Wt(),{safeRe:c,t:d}=Ar();return fo=(n,e)=>{if(n instanceof r)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let i=null;if(!e.rtl)i=n.match(e.includePrerelease?c[d.COERCEFULL]:c[d.COERCE]);else{const p=e.includePrerelease?c[d.COERCERTLFULL]:c[d.COERCERTL];let g;for(;(g=p.exec(n))&&(!i||i.index+i[0].length!==n.length);)(!i||g.index+g[0].length!==i.index+i[0].length)&&(i=g),p.lastIndex=g.index+g[1].length+g[2].length;p.lastIndex=-1}if(i===null)return null;const t=i[2],s=i[3]||"0",o=i[4]||"0",u=e.includePrerelease&&i[5]?`-${i[5]}`:"",a=e.includePrerelease&&i[6]?`+${i[6]}`:"";return h(`${t}.${s}.${o}${u}${a}`,e)},fo}var ho,xl;function Gd(){if(xl)return ho;xl=1;class r{constructor(){this.max=1e3,this.map=new Map}get(c){const d=this.map.get(c);if(d!==void 0)return this.map.delete(c),this.map.set(c,d),d}delete(c){return this.map.delete(c)}set(c,d){if(!this.delete(c)&&d!==void 0){if(this.map.size>=this.max){const n=this.map.keys().next().value;this.delete(n)}this.map.set(c,d)}return this}}return ho=r,ho}var po,Ll;function st(){if(Ll)return po;Ll=1;const r=/\s+/g;class h{constructor(P,F){if(F=f(F),P instanceof h)return P.loose===!!F.loose&&P.includePrerelease===!!F.includePrerelease?P:new h(P.raw,F);if(P instanceof n)return this.raw=P.value,this.set=[[P]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=P.trim().replace(r," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(K=>!y(K[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const K of this.set)if(K.length===1&&m(K[0])){this.set=[K];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let P=0;P<this.set.length;P++){P>0&&(this.formatted+="||");const F=this.set[P];for(let q=0;q<F.length;q++)q>0&&(this.formatted+=" "),this.formatted+=F[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(P){const q=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+P,K=d.get(q);if(K)return K;const W=this.options.loose,ne=W?t[s.HYPHENRANGELOOSE]:t[s.HYPHENRANGE];P=P.replace(ne,L(this.options.includePrerelease)),e("hyphen replace",P),P=P.replace(t[s.COMPARATORTRIM],o),e("comparator trim",P),P=P.replace(t[s.TILDETRIM],u),e("tilde trim",P),P=P.replace(t[s.CARETTRIM],a),e("caret trim",P);let ce=P.split(" ").map(J=>R(J,this.options)).join(" ").split(/\s+/).map(J=>$(J,this.options));W&&(ce=ce.filter(J=>(e("loose invalid filter",J,this.options),!!J.match(t[s.COMPARATORLOOSE])))),e("range list",ce);const ue=new Map,ie=ce.map(J=>new n(J,this.options));for(const J of ie){if(y(J))return[J];ue.set(J.value,J)}ue.size>1&&ue.has("")&&ue.delete("");const Re=[...ue.values()];return d.set(q,Re),Re}intersects(P,F){if(!(P instanceof h))throw new TypeError("a Range is required");return this.set.some(q=>_(q,F)&&P.set.some(K=>_(K,F)&&q.every(W=>K.every(ne=>W.intersects(ne,F)))))}test(P){if(!P)return!1;if(typeof P=="string")try{P=new i(P,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(k(this.set[F],P,this.options))return!0;return!1}}po=h;const c=Gd(),d=new c,f=qo(),n=Qr(),e=Jr(),i=Xe(),{safeRe:t,t:s,comparatorTrimReplace:o,tildeTrimReplace:u,caretTrimReplace:a}=Ar(),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=Xr(),y=D=>D.value==="<0.0.0-0",m=D=>D.value==="",_=(D,P)=>{let F=!0;const q=D.slice();let K=q.pop();for(;F&&q.length;)F=q.every(W=>K.intersects(W,P)),K=q.pop();return F},R=(D,P)=>(e("comp",D,P),D=b(D,P),e("caret",D),D=I(D,P),e("tildes",D),D=T(D,P),e("xrange",D),D=M(D,P),e("stars",D),D),O=D=>!D||D.toLowerCase()==="x"||D==="*",I=(D,P)=>D.trim().split(/\s+/).map(F=>U(F,P)).join(" "),U=(D,P)=>{const F=P.loose?t[s.TILDELOOSE]:t[s.TILDE];return D.replace(F,(q,K,W,ne,ce)=>{e("tilde",D,q,K,W,ne,ce);let ue;return O(K)?ue="":O(W)?ue=`>=${K}.0.0 <${+K+1}.0.0-0`:O(ne)?ue=`>=${K}.${W}.0 <${K}.${+W+1}.0-0`:ce?(e("replaceTilde pr",ce),ue=`>=${K}.${W}.${ne}-${ce} <${K}.${+W+1}.0-0`):ue=`>=${K}.${W}.${ne} <${K}.${+W+1}.0-0`,e("tilde return",ue),ue})},b=(D,P)=>D.trim().split(/\s+/).map(F=>S(F,P)).join(" "),S=(D,P)=>{e("caret",D,P);const F=P.loose?t[s.CARETLOOSE]:t[s.CARET],q=P.includePrerelease?"-0":"";return D.replace(F,(K,W,ne,ce,ue)=>{e("caret",D,K,W,ne,ce,ue);let ie;return O(W)?ie="":O(ne)?ie=`>=${W}.0.0${q} <${+W+1}.0.0-0`:O(ce)?W==="0"?ie=`>=${W}.${ne}.0${q} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.0${q} <${+W+1}.0.0-0`:ue?(e("replaceCaret pr",ue),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${+W+1}.0.0-0`):(e("no pr"),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}${q} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}${q} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce} <${+W+1}.0.0-0`),e("caret return",ie),ie})},T=(D,P)=>(e("replaceXRanges",D,P),D.split(/\s+/).map(F=>E(F,P)).join(" ")),E=(D,P)=>{D=D.trim();const F=P.loose?t[s.XRANGELOOSE]:t[s.XRANGE];return D.replace(F,(q,K,W,ne,ce,ue)=>{e("xRange",D,q,K,W,ne,ce,ue);const ie=O(W),Re=ie||O(ne),J=Re||O(ce),ve=J;return K==="="&&ve&&(K=""),ue=P.includePrerelease?"-0":"",ie?K===">"||K==="<"?q="<0.0.0-0":q="*":K&&ve?(Re&&(ne=0),ce=0,K===">"?(K=">=",Re?(W=+W+1,ne=0,ce=0):(ne=+ne+1,ce=0)):K==="<="&&(K="<",Re?W=+W+1:ne=+ne+1),K==="<"&&(ue="-0"),q=`${K+W}.${ne}.${ce}${ue}`):Re?q=`>=${W}.0.0${ue} <${+W+1}.0.0-0`:J&&(q=`>=${W}.${ne}.0${ue} <${W}.${+ne+1}.0-0`),e("xRange return",q),q})},M=(D,P)=>(e("replaceStars",D,P),D.trim().replace(t[s.STAR],"")),$=(D,P)=>(e("replaceGTE0",D,P),D.trim().replace(t[P.includePrerelease?s.GTE0PRE:s.GTE0],"")),L=D=>(P,F,q,K,W,ne,ce,ue,ie,Re,J,ve)=>(O(q)?F="":O(K)?F=`>=${q}.0.0${D?"-0":""}`:O(W)?F=`>=${q}.${K}.0${D?"-0":""}`:ne?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,O(ie)?ue="":O(Re)?ue=`<${+ie+1}.0.0-0`:O(J)?ue=`<${ie}.${+Re+1}.0-0`:ve?ue=`<=${ie}.${Re}.${J}-${ve}`:D?ue=`<${ie}.${Re}.${+J+1}-0`:ue=`<=${ue}`,`${F} ${ue}`.trim()),k=(D,P,F)=>{for(let q=0;q<D.length;q++)if(!D[q].test(P))return!1;if(P.prerelease.length&&!F.includePrerelease){for(let q=0;q<D.length;q++)if(e(D[q].semver),D[q].semver!==n.ANY&&D[q].semver.prerelease.length>0){const K=D[q].semver;if(K.major===P.major&&K.minor===P.minor&&K.patch===P.patch)return!0}return!1}return!0};return po}var mo,$l;function Qr(){if($l)return mo;$l=1;const r=Symbol("SemVer ANY");class h{static get ANY(){return r}constructor(o,u){if(u=c(u),o instanceof h){if(o.loose===!!u.loose)return o;o=o.value}o=o.trim().split(/\s+/).join(" "),e("comparator",o,u),this.options=u,this.loose=!!u.loose,this.parse(o),this.semver===r?this.value="":this.value=this.operator+this.semver.version,e("comp",this)}parse(o){const u=this.options.loose?d[f.COMPARATORLOOSE]:d[f.COMPARATOR],a=o.match(u);if(!a)throw new TypeError(`Invalid comparator: ${o}`);this.operator=a[1]!==void 0?a[1]:"",this.operator==="="&&(this.operator=""),a[2]?this.semver=new i(a[2],this.options.loose):this.semver=r}toString(){return this.value}test(o){if(e("Comparator.test",o,this.options.loose),this.semver===r||o===r)return!0;if(typeof o=="string")try{o=new i(o,this.options)}catch{return!1}return n(o,this.operator,this.semver,this.options)}intersects(o,u){if(!(o instanceof h))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new t(o.value,u).test(this.value):o.operator===""?o.value===""?!0:new t(this.value,u).test(o.semver):(u=c(u),u.includePrerelease&&(this.value==="<0.0.0-0"||o.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||o.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&o.operator.startsWith(">")||this.operator.startsWith("<")&&o.operator.startsWith("<")||this.semver.version===o.semver.version&&this.operator.includes("=")&&o.operator.includes("=")||n(this.semver,"<",o.semver,u)&&this.operator.startsWith(">")&&o.operator.startsWith("<")||n(this.semver,">",o.semver,u)&&this.operator.startsWith("<")&&o.operator.startsWith(">")))}}mo=h;const c=qo(),{safeRe:d,t:f}=Ar(),n=dc(),e=Jr(),i=Xe(),t=st();return mo}var go,Ul;function Zr(){if(Ul)return go;Ul=1;const r=st();return go=(c,d,f)=>{try{d=new r(d,f)}catch{return!1}return d.test(c)},go}var yo,ql;function Wd(){if(ql)return yo;ql=1;const r=st();return yo=(c,d)=>new r(c,d).set.map(f=>f.map(n=>n.value).join(" ").trim().split(" ")),yo}var vo,kl;function Vd(){if(kl)return vo;kl=1;const r=Xe(),h=st();return vo=(d,f,n)=>{let e=null,i=null,t=null;try{t=new h(f,n)}catch{return null}return d.forEach(s=>{t.test(s)&&(!e||i.compare(s)===-1)&&(e=s,i=new r(e,n))}),e},vo}var Eo,Ml;function zd(){if(Ml)return Eo;Ml=1;const r=Xe(),h=st();return Eo=(d,f,n)=>{let e=null,i=null,t=null;try{t=new h(f,n)}catch{return null}return d.forEach(s=>{t.test(s)&&(!e||i.compare(s)===1)&&(e=s,i=new r(e,n))}),e},Eo}var wo,Bl;function Yd(){if(Bl)return wo;Bl=1;const r=Xe(),h=st(),c=Kr();return wo=(f,n)=>{f=new h(f,n);let e=new r("0.0.0");if(f.test(e)||(e=new r("0.0.0-0"),f.test(e)))return e;e=null;for(let i=0;i<f.set.length;++i){const t=f.set[i];let s=null;t.forEach(o=>{const u=new r(o.semver.version);switch(o.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!s||c(u,s))&&(s=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!e||c(e,s))&&(e=s)}return e&&f.test(e)?e:null},wo}var _o,jl;function Xd(){if(jl)return _o;jl=1;const r=st();return _o=(c,d)=>{try{return new r(c,d).range||"*"}catch{return null}},_o}var So,Hl;function Ho(){if(Hl)return So;Hl=1;const r=Xe(),h=Qr(),{ANY:c}=h,d=st(),f=Zr(),n=Kr(),e=Mo(),i=jo(),t=Bo();return So=(o,u,a,p)=>{o=new r(o,p),u=new d(u,p);let g,y,m,_,R;switch(a){case">":g=n,y=i,m=e,_=">",R=">=";break;case"<":g=e,y=t,m=n,_="<",R="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(f(o,u,p))return!1;for(let O=0;O<u.set.length;++O){const I=u.set[O];let U=null,b=null;if(I.forEach(S=>{S.semver===c&&(S=new h(">=0.0.0")),U=U||S,b=b||S,g(S.semver,U.semver,p)?U=S:m(S.semver,b.semver,p)&&(b=S)}),U.operator===_||U.operator===R||(!b.operator||b.operator===_)&&y(o,b.semver))return!1;if(b.operator===R&&m(o,b.semver))return!1}return!0},So}var Ao,Gl;function Jd(){if(Gl)return Ao;Gl=1;const r=Ho();return Ao=(c,d,f)=>r(c,d,">",f),Ao}var To,Wl;function Kd(){if(Wl)return To;Wl=1;const r=Ho();return To=(c,d,f)=>r(c,d,"<",f),To}var bo,Vl;function Qd(){if(Vl)return bo;Vl=1;const r=st();return bo=(c,d,f)=>(c=new r(c,f),d=new r(d,f),c.intersects(d,f)),bo}var Ro,zl;function Zd(){if(zl)return Ro;zl=1;const r=Zr(),h=at();return Ro=(c,d,f)=>{const n=[];let e=null,i=null;const t=c.sort((a,p)=>h(a,p,f));for(const a of t)r(a,d,f)?(i=a,e||(e=a)):(i&&n.push([e,i]),i=null,e=null);e&&n.push([e,null]);const s=[];for(const[a,p]of n)a===p?s.push(a):!p&&a===t[0]?s.push("*"):p?a===t[0]?s.push(`<=${p}`):s.push(`${a} - ${p}`):s.push(`>=${a}`);const o=s.join(" || "),u=typeof d.raw=="string"?d.raw:String(d);return o.length<u.length?o:d},Ro}var Co,Yl;function eh(){if(Yl)return Co;Yl=1;const r=st(),h=Qr(),{ANY:c}=h,d=Zr(),f=at(),n=(u,a,p={})=>{if(u===a)return!0;u=new r(u,p),a=new r(a,p);let g=!1;e:for(const y of u.set){for(const m of a.set){const _=t(y,m,p);if(g=g||_!==null,_)continue e}if(g)return!1}return!0},e=[new h(">=0.0.0-0")],i=[new h(">=0.0.0")],t=(u,a,p)=>{if(u===a)return!0;if(u.length===1&&u[0].semver===c){if(a.length===1&&a[0].semver===c)return!0;p.includePrerelease?u=e:u=i}if(a.length===1&&a[0].semver===c){if(p.includePrerelease)return!0;a=i}const g=new Set;let y,m;for(const T of u)T.operator===">"||T.operator===">="?y=s(y,T,p):T.operator==="<"||T.operator==="<="?m=o(m,T,p):g.add(T.semver);if(g.size>1)return null;let _;if(y&&m){if(_=f(y.semver,m.semver,p),_>0)return null;if(_===0&&(y.operator!==">="||m.operator!=="<="))return null}for(const T of g){if(y&&!d(T,String(y),p)||m&&!d(T,String(m),p))return null;for(const E of a)if(!d(T,String(E),p))return!1;return!0}let R,O,I,U,b=m&&!p.includePrerelease&&m.semver.prerelease.length?m.semver:!1,S=y&&!p.includePrerelease&&y.semver.prerelease.length?y.semver:!1;b&&b.prerelease.length===1&&m.operator==="<"&&b.prerelease[0]===0&&(b=!1);for(const T of a){if(U=U||T.operator===">"||T.operator===">=",I=I||T.operator==="<"||T.operator==="<=",y){if(S&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===S.major&&T.semver.minor===S.minor&&T.semver.patch===S.patch&&(S=!1),T.operator===">"||T.operator===">="){if(R=s(y,T,p),R===T&&R!==y)return!1}else if(y.operator===">="&&!d(y.semver,String(T),p))return!1}if(m){if(b&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===b.major&&T.semver.minor===b.minor&&T.semver.patch===b.patch&&(b=!1),T.operator==="<"||T.operator==="<="){if(O=o(m,T,p),O===T&&O!==m)return!1}else if(m.operator==="<="&&!d(m.semver,String(T),p))return!1}if(!T.operator&&(m||y)&&_!==0)return!1}return!(y&&I&&!m&&_!==0||m&&U&&!y&&_!==0||S||b)},s=(u,a,p)=>{if(!u)return a;const g=f(u.semver,a.semver,p);return g>0?u:g<0||a.operator===">"&&u.operator===">="?a:u},o=(u,a,p)=>{if(!u)return a;const g=f(u.semver,a.semver,p);return g<0?u:g>0||a.operator==="<"&&u.operator==="<="?a:u};return Co=n,Co}var Oo,Xl;function hc(){if(Xl)return Oo;Xl=1;const r=Ar(),h=Xr(),c=Xe(),d=uc(),f=Wt(),n=Dd(),e=Nd(),i=Fd(),t=xd(),s=Ld(),o=$d(),u=Ud(),a=qd(),p=at(),g=kd(),y=Md(),m=ko(),_=Bd(),R=jd(),O=Kr(),I=Mo(),U=cc(),b=fc(),S=Bo(),T=jo(),E=dc(),M=Hd(),$=Qr(),L=st(),k=Zr(),D=Wd(),P=Vd(),F=zd(),q=Yd(),K=Xd(),W=Ho(),ne=Jd(),ce=Kd(),ue=Qd(),ie=Zd(),Re=eh();return Oo={parse:f,valid:n,clean:e,inc:i,diff:t,major:s,minor:o,patch:u,prerelease:a,compare:p,rcompare:g,compareLoose:y,compareBuild:m,sort:_,rsort:R,gt:O,lt:I,eq:U,neq:b,gte:S,lte:T,cmp:E,coerce:M,Comparator:$,Range:L,satisfies:k,toComparators:D,maxSatisfying:P,minSatisfying:F,minVersion:q,validRange:K,outside:W,gtr:ne,ltr:ce,intersects:ue,simplifyRange:ie,subset:Re,SemVer:c,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:h.SEMVER_SPEC_VERSION,RELEASE_TYPES:h.RELEASE_TYPES,compareIdentifiers:d.compareIdentifiers,rcompareIdentifiers:d.rcompareIdentifiers},Oo}var kt={},yr={exports:{}};yr.exports;var Jl;function th(){return Jl||(Jl=1,function(r,h){var c=200,d="__lodash_hash_undefined__",f=1,n=2,e=9007199254740991,i="[object Arguments]",t="[object Array]",s="[object AsyncFunction]",o="[object Boolean]",u="[object Date]",a="[object Error]",p="[object Function]",g="[object GeneratorFunction]",y="[object Map]",m="[object Number]",_="[object Null]",R="[object Object]",O="[object Promise]",I="[object Proxy]",U="[object RegExp]",b="[object Set]",S="[object String]",T="[object Symbol]",E="[object Undefined]",M="[object WeakMap]",$="[object ArrayBuffer]",L="[object DataView]",k="[object Float32Array]",D="[object Float64Array]",P="[object Int8Array]",F="[object Int16Array]",q="[object Int32Array]",K="[object Uint8Array]",W="[object Uint8ClampedArray]",ne="[object Uint16Array]",ce="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Re=/^(?:0|[1-9]\d*)$/,J={};J[k]=J[D]=J[P]=J[F]=J[q]=J[K]=J[W]=J[ne]=J[ce]=!0,J[i]=J[t]=J[$]=J[o]=J[L]=J[u]=J[a]=J[p]=J[y]=J[m]=J[R]=J[U]=J[b]=J[S]=J[M]=!1;var ve=typeof ot=="object"&&ot&&ot.Object===Object&&ot,A=typeof self=="object"&&self&&self.Object===Object&&self,v=ve||A||Function("return this")(),j=h&&!h.nodeType&&h,N=j&&!0&&r&&!r.nodeType&&r,le=N&&N.exports===j,me=le&&ve.process,pe=function(){try{return me&&me.binding&&me.binding("util")}catch{}}(),Se=pe&&pe.isTypedArray;function Ee(C,x){for(var Y=-1,se=C==null?0:C.length,Fe=0,Ae=[];++Y<se;){var $e=C[Y];x($e,Y,C)&&(Ae[Fe++]=$e)}return Ae}function Ue(C,x){for(var Y=-1,se=x.length,Fe=C.length;++Y<se;)C[Fe+Y]=x[Y];return C}function Pe(C,x){for(var Y=-1,se=C==null?0:C.length;++Y<se;)if(x(C[Y],Y,C))return!0;return!1}function Ge(C,x){for(var Y=-1,se=Array(C);++Y<C;)se[Y]=x(Y);return se}function At(C){return function(x){return C(x)}}function ft(C,x){return C.has(x)}function l(C,x){return C==null?void 0:C[x]}function B(C){var x=-1,Y=Array(C.size);return C.forEach(function(se,Fe){Y[++x]=[Fe,se]}),Y}function G(C,x){return function(Y){return C(x(Y))}}function re(C){var x=-1,Y=Array(C.size);return C.forEach(function(se){Y[++x]=se}),Y}var V=Array.prototype,te=Function.prototype,Z=Object.prototype,oe=v["__core-js_shared__"],ge=te.toString,ye=Z.hasOwnProperty,Ce=function(){var C=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return C?"Symbol(src)_1."+C:""}(),de=Z.toString,qe=RegExp("^"+ge.call(ye).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=le?v.Buffer:void 0,H=v.Symbol,X=v.Uint8Array,z=Z.propertyIsEnumerable,Q=V.splice,ee=H?H.toStringTag:void 0,fe=Object.getOwnPropertySymbols,ae=w?w.isBuffer:void 0,he=G(Object.keys,Object),_e=Ut(v,"DataView"),De=Ut(v,"Map"),Le=Ut(v,"Promise"),Oe=Ut(v,"Set"),$t=Ut(v,"WeakMap"),nt=Ut(Object,"create"),Tt=Ct(_e),_c=Ct(De),Sc=Ct(Le),Ac=Ct(Oe),Tc=Ct($t),Vo=H?H.prototype:void 0,en=Vo?Vo.valueOf:void 0;function bt(C){var x=-1,Y=C==null?0:C.length;for(this.clear();++x<Y;){var se=C[x];this.set(se[0],se[1])}}function bc(){this.__data__=nt?nt(null):{},this.size=0}function Rc(C){var x=this.has(C)&&delete this.__data__[C];return this.size-=x?1:0,x}function Cc(C){var x=this.__data__;if(nt){var Y=x[C];return Y===d?void 0:Y}return ye.call(x,C)?x[C]:void 0}function Oc(C){var x=this.__data__;return nt?x[C]!==void 0:ye.call(x,C)}function Ic(C,x){var Y=this.__data__;return this.size+=this.has(C)?0:1,Y[C]=nt&&x===void 0?d:x,this}bt.prototype.clear=bc,bt.prototype.delete=Rc,bt.prototype.get=Cc,bt.prototype.has=Oc,bt.prototype.set=Ic;function dt(C){var x=-1,Y=C==null?0:C.length;for(this.clear();++x<Y;){var se=C[x];this.set(se[0],se[1])}}function Pc(){this.__data__=[],this.size=0}function Dc(C){var x=this.__data__,Y=Rr(x,C);if(Y<0)return!1;var se=x.length-1;return Y==se?x.pop():Q.call(x,Y,1),--this.size,!0}function Nc(C){var x=this.__data__,Y=Rr(x,C);return Y<0?void 0:x[Y][1]}function Fc(C){return Rr(this.__data__,C)>-1}function xc(C,x){var Y=this.__data__,se=Rr(Y,C);return se<0?(++this.size,Y.push([C,x])):Y[se][1]=x,this}dt.prototype.clear=Pc,dt.prototype.delete=Dc,dt.prototype.get=Nc,dt.prototype.has=Fc,dt.prototype.set=xc;function Rt(C){var x=-1,Y=C==null?0:C.length;for(this.clear();++x<Y;){var se=C[x];this.set(se[0],se[1])}}function Lc(){this.size=0,this.__data__={hash:new bt,map:new(De||dt),string:new bt}}function $c(C){var x=Cr(this,C).delete(C);return this.size-=x?1:0,x}function Uc(C){return Cr(this,C).get(C)}function qc(C){return Cr(this,C).has(C)}function kc(C,x){var Y=Cr(this,C),se=Y.size;return Y.set(C,x),this.size+=Y.size==se?0:1,this}Rt.prototype.clear=Lc,Rt.prototype.delete=$c,Rt.prototype.get=Uc,Rt.prototype.has=qc,Rt.prototype.set=kc;function br(C){var x=-1,Y=C==null?0:C.length;for(this.__data__=new Rt;++x<Y;)this.add(C[x])}function Mc(C){return this.__data__.set(C,d),this}function Bc(C){return this.__data__.has(C)}br.prototype.add=br.prototype.push=Mc,br.prototype.has=Bc;function gt(C){var x=this.__data__=new dt(C);this.size=x.size}function jc(){this.__data__=new dt,this.size=0}function Hc(C){var x=this.__data__,Y=x.delete(C);return this.size=x.size,Y}function Gc(C){return this.__data__.get(C)}function Wc(C){return this.__data__.has(C)}function Vc(C,x){var Y=this.__data__;if(Y instanceof dt){var se=Y.__data__;if(!De||se.length<c-1)return se.push([C,x]),this.size=++Y.size,this;Y=this.__data__=new Rt(se)}return Y.set(C,x),this.size=Y.size,this}gt.prototype.clear=jc,gt.prototype.delete=Hc,gt.prototype.get=Gc,gt.prototype.has=Wc,gt.prototype.set=Vc;function zc(C,x){var Y=Or(C),se=!Y&&uf(C),Fe=!Y&&!se&&tn(C),Ae=!Y&&!se&&!Fe&&ta(C),$e=Y||se||Fe||Ae,Me=$e?Ge(C.length,String):[],Be=Me.length;for(var xe in C)ye.call(C,xe)&&!($e&&(xe=="length"||Fe&&(xe=="offset"||xe=="parent")||Ae&&(xe=="buffer"||xe=="byteLength"||xe=="byteOffset")||nf(xe,Be)))&&Me.push(xe);return Me}function Rr(C,x){for(var Y=C.length;Y--;)if(Ko(C[Y][0],x))return Y;return-1}function Yc(C,x,Y){var se=x(C);return Or(C)?se:Ue(se,Y(C))}function zt(C){return C==null?C===void 0?E:_:ee&&ee in Object(C)?tf(C):lf(C)}function zo(C){return Yt(C)&&zt(C)==i}function Yo(C,x,Y,se,Fe){return C===x?!0:C==null||x==null||!Yt(C)&&!Yt(x)?C!==C&&x!==x:Xc(C,x,Y,se,Yo,Fe)}function Xc(C,x,Y,se,Fe,Ae){var $e=Or(C),Me=Or(x),Be=$e?t:yt(C),xe=Me?t:yt(x);Be=Be==i?R:Be,xe=xe==i?R:xe;var Ke=Be==R,it=xe==R,We=Be==xe;if(We&&tn(C)){if(!tn(x))return!1;$e=!0,Ke=!1}if(We&&!Ke)return Ae||(Ae=new gt),$e||ta(C)?Xo(C,x,Y,se,Fe,Ae):Zc(C,x,Be,Y,se,Fe,Ae);if(!(Y&f)){var tt=Ke&&ye.call(C,"__wrapped__"),rt=it&&ye.call(x,"__wrapped__");if(tt||rt){var vt=tt?C.value():C,ht=rt?x.value():x;return Ae||(Ae=new gt),Fe(vt,ht,Y,se,Ae)}}return We?(Ae||(Ae=new gt),ef(C,x,Y,se,Fe,Ae)):!1}function Jc(C){if(!ea(C)||af(C))return!1;var x=Qo(C)?qe:ie;return x.test(Ct(C))}function Kc(C){return Yt(C)&&Zo(C.length)&&!!J[zt(C)]}function Qc(C){if(!sf(C))return he(C);var x=[];for(var Y in Object(C))ye.call(C,Y)&&Y!="constructor"&&x.push(Y);return x}function Xo(C,x,Y,se,Fe,Ae){var $e=Y&f,Me=C.length,Be=x.length;if(Me!=Be&&!($e&&Be>Me))return!1;var xe=Ae.get(C);if(xe&&Ae.get(x))return xe==x;var Ke=-1,it=!0,We=Y&n?new br:void 0;for(Ae.set(C,x),Ae.set(x,C);++Ke<Me;){var tt=C[Ke],rt=x[Ke];if(se)var vt=$e?se(rt,tt,Ke,x,C,Ae):se(tt,rt,Ke,C,x,Ae);if(vt!==void 0){if(vt)continue;it=!1;break}if(We){if(!Pe(x,function(ht,Ot){if(!ft(We,Ot)&&(tt===ht||Fe(tt,ht,Y,se,Ae)))return We.push(Ot)})){it=!1;break}}else if(!(tt===rt||Fe(tt,rt,Y,se,Ae))){it=!1;break}}return Ae.delete(C),Ae.delete(x),it}function Zc(C,x,Y,se,Fe,Ae,$e){switch(Y){case L:if(C.byteLength!=x.byteLength||C.byteOffset!=x.byteOffset)return!1;C=C.buffer,x=x.buffer;case $:return!(C.byteLength!=x.byteLength||!Ae(new X(C),new X(x)));case o:case u:case m:return Ko(+C,+x);case a:return C.name==x.name&&C.message==x.message;case U:case S:return C==x+"";case y:var Me=B;case b:var Be=se&f;if(Me||(Me=re),C.size!=x.size&&!Be)return!1;var xe=$e.get(C);if(xe)return xe==x;se|=n,$e.set(C,x);var Ke=Xo(Me(C),Me(x),se,Fe,Ae,$e);return $e.delete(C),Ke;case T:if(en)return en.call(C)==en.call(x)}return!1}function ef(C,x,Y,se,Fe,Ae){var $e=Y&f,Me=Jo(C),Be=Me.length,xe=Jo(x),Ke=xe.length;if(Be!=Ke&&!$e)return!1;for(var it=Be;it--;){var We=Me[it];if(!($e?We in x:ye.call(x,We)))return!1}var tt=Ae.get(C);if(tt&&Ae.get(x))return tt==x;var rt=!0;Ae.set(C,x),Ae.set(x,C);for(var vt=$e;++it<Be;){We=Me[it];var ht=C[We],Ot=x[We];if(se)var ra=$e?se(Ot,ht,We,x,C,Ae):se(ht,Ot,We,C,x,Ae);if(!(ra===void 0?ht===Ot||Fe(ht,Ot,Y,se,Ae):ra)){rt=!1;break}vt||(vt=We=="constructor")}if(rt&&!vt){var Ir=C.constructor,Pr=x.constructor;Ir!=Pr&&"constructor"in C&&"constructor"in x&&!(typeof Ir=="function"&&Ir instanceof Ir&&typeof Pr=="function"&&Pr instanceof Pr)&&(rt=!1)}return Ae.delete(C),Ae.delete(x),rt}function Jo(C){return Yc(C,df,rf)}function Cr(C,x){var Y=C.__data__;return of(x)?Y[typeof x=="string"?"string":"hash"]:Y.map}function Ut(C,x){var Y=l(C,x);return Jc(Y)?Y:void 0}function tf(C){var x=ye.call(C,ee),Y=C[ee];try{C[ee]=void 0;var se=!0}catch{}var Fe=de.call(C);return se&&(x?C[ee]=Y:delete C[ee]),Fe}var rf=fe?function(C){return C==null?[]:(C=Object(C),Ee(fe(C),function(x){return z.call(C,x)}))}:hf,yt=zt;(_e&&yt(new _e(new ArrayBuffer(1)))!=L||De&&yt(new De)!=y||Le&&yt(Le.resolve())!=O||Oe&&yt(new Oe)!=b||$t&&yt(new $t)!=M)&&(yt=function(C){var x=zt(C),Y=x==R?C.constructor:void 0,se=Y?Ct(Y):"";if(se)switch(se){case Tt:return L;case _c:return y;case Sc:return O;case Ac:return b;case Tc:return M}return x});function nf(C,x){return x=x??e,!!x&&(typeof C=="number"||Re.test(C))&&C>-1&&C%1==0&&C<x}function of(C){var x=typeof C;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?C!=="__proto__":C===null}function af(C){return!!Ce&&Ce in C}function sf(C){var x=C&&C.constructor,Y=typeof x=="function"&&x.prototype||Z;return C===Y}function lf(C){return de.call(C)}function Ct(C){if(C!=null){try{return ge.call(C)}catch{}try{return C+""}catch{}}return""}function Ko(C,x){return C===x||C!==C&&x!==x}var uf=zo(function(){return arguments}())?zo:function(C){return Yt(C)&&ye.call(C,"callee")&&!z.call(C,"callee")},Or=Array.isArray;function cf(C){return C!=null&&Zo(C.length)&&!Qo(C)}var tn=ae||pf;function ff(C,x){return Yo(C,x)}function Qo(C){if(!ea(C))return!1;var x=zt(C);return x==p||x==g||x==s||x==I}function Zo(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=e}function ea(C){var x=typeof C;return C!=null&&(x=="object"||x=="function")}function Yt(C){return C!=null&&typeof C=="object"}var ta=Se?At(Se):Kc;function df(C){return cf(C)?zc(C):Qc(C)}function hf(){return[]}function pf(){return!1}r.exports=ff}(yr,yr.exports)),yr.exports}var Kl;function rh(){if(Kl)return kt;Kl=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.DownloadedUpdateHelper=void 0,kt.createTempUpdateFile=i;const r=Er,h=Ze,c=th(),d=St(),f=Ie;let n=class{constructor(s){this.cacheDir=s,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return f.join(this.cacheDir,"pending")}async validateDownloadedPath(s,o,u,a){if(this.versionInfo!=null&&this.file===s&&this.fileInfo!=null)return c(this.versionInfo,o)&&c(this.fileInfo.info,u.info)&&await(0,d.pathExists)(s)?s:null;const p=await this.getValidCachedUpdateFile(u,a);return p===null?null:(a.info(`Update has already been downloaded to ${s}).`),this._file=p,p)}async setDownloadedFile(s,o,u,a,p,g){this._file=s,this._packageFile=o,this.versionInfo=u,this.fileInfo=a,this._downloadedFileInfo={fileName:p,sha512:a.info.sha512,isAdminRightsRequired:a.info.isAdminRightsRequired===!0},g&&await(0,d.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,d.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(s,o){const u=this.getUpdateInfoFile();if(!await(0,d.pathExists)(u))return null;let p;try{p=await(0,d.readJson)(u)}catch(_){let R="No cached update info available";return _.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),R+=` (error on read: ${_.message})`),o.info(R),null}if(!((p==null?void 0:p.fileName)!==null))return o.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(s.info.sha512!==p.sha512)return o.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${p.sha512}, expected: ${s.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const y=f.join(this.cacheDirForPendingUpdate,p.fileName);if(!await(0,d.pathExists)(y))return o.info("Cached update file doesn't exist"),null;const m=await e(y);return s.info.sha512!==m?(o.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m}, expected: ${s.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=p,y)}getUpdateInfoFile(){return f.join(this.cacheDirForPendingUpdate,"update-info.json")}};kt.DownloadedUpdateHelper=n;function e(t,s="sha512",o="base64",u){return new Promise((a,p)=>{const g=(0,r.createHash)(s);g.on("error",p).setEncoding(o),(0,h.createReadStream)(t,{...u,highWaterMark:1024*1024}).on("error",p).on("end",()=>{g.end(),a(g.read())}).pipe(g,{end:!1})})}async function i(t,s,o){let u=0,a=f.join(s,t);for(let p=0;p<3;p++)try{return await(0,d.unlink)(a),a}catch(g){if(g.code==="ENOENT")return a;o.warn(`Error on remove temp update file: ${g}`),a=f.join(s,`${u++}-${t}`)}return a}return kt}var tr={},jr={},Ql;function nh(){if(Ql)return jr;Ql=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.getAppCacheDir=c;const r=Ie,h=_t;function c(){const d=(0,h.homedir)();let f;return process.platform==="win32"?f=process.env.LOCALAPPDATA||r.join(d,"AppData","Local"):process.platform==="darwin"?f=r.join(d,"Library","Caches"):f=process.env.XDG_CACHE_HOME||r.join(d,".cache"),f}return jr}var Zl;function ih(){if(Zl)return tr;Zl=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.ElectronAppAdapter=void 0;const r=Ie,h=nh();let c=class{constructor(f=be.app){this.app=f}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?r.join(process.resourcesPath,"app-update.yml"):r.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,h.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(f){this.app.once("quit",(n,e)=>f(e))}};return tr.ElectronAppAdapter=c,tr}var Io={},eu;function oh(){return eu||(eu=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ElectronHttpExecutor=r.NET_SESSION_NAME=void 0,r.getNetSession=c;const h=He();r.NET_SESSION_NAME="electron-updater";function c(){return be.session.fromPartition(r.NET_SESSION_NAME,{cache:!1})}class d extends h.HttpExecutor{constructor(n){super(),this.proxyLoginCallback=n,this.cachedSession=null}async download(n,e,i){return await i.cancellationToken.createPromise((t,s,o)=>{const u={headers:i.headers||void 0,redirect:"manual"};(0,h.configureRequestUrl)(n,u),(0,h.configureRequestOptions)(u),this.doDownload(u,{destination:e,options:i,onCancel:o,callback:a=>{a==null?t(e):s(a)},responseHandler:null},0)})}createRequest(n,e){n.headers&&n.headers.Host&&(n.host=n.headers.Host,delete n.headers.Host),this.cachedSession==null&&(this.cachedSession=c());const i=be.net.request({...n,session:this.cachedSession});return i.on("response",e),this.proxyLoginCallback!=null&&i.on("login",this.proxyLoginCallback),i}addRedirectHandlers(n,e,i,t,s){n.on("redirect",(o,u,a)=>{n.abort(),t>this.maxRedirects?i(this.createMaxRedirectError()):s(h.HttpExecutor.prepareRedirectUrlOptions(a,e))})}}r.ElectronHttpExecutor=d}(Io)),Io}var rr={},Nt={},Po,tu;function ah(){if(tu)return Po;tu=1;var r="[object Symbol]",h=/[\\^$.*+?()[\]{}|]/g,c=RegExp(h.source),d=typeof ot=="object"&&ot&&ot.Object===Object&&ot,f=typeof self=="object"&&self&&self.Object===Object&&self,n=d||f||Function("return this")(),e=Object.prototype,i=e.toString,t=n.Symbol,s=t?t.prototype:void 0,o=s?s.toString:void 0;function u(m){if(typeof m=="string")return m;if(p(m))return o?o.call(m):"";var _=m+"";return _=="0"&&1/m==-1/0?"-0":_}function a(m){return!!m&&typeof m=="object"}function p(m){return typeof m=="symbol"||a(m)&&i.call(m)==r}function g(m){return m==null?"":u(m)}function y(m){return m=g(m),m&&c.test(m)?m.replace(h,"\\$&"):m}return Po=y,Po}var ru;function Lt(){if(ru)return Nt;ru=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.newBaseUrl=c,Nt.newUrlFromBase=d,Nt.getChannelFilename=f,Nt.blockmapFiles=n;const r=jt,h=ah();function c(e){const i=new r.URL(e);return i.pathname.endsWith("/")||(i.pathname+="/"),i}function d(e,i,t=!1){const s=new r.URL(e,i),o=i.search;return o!=null&&o.length!==0?s.search=o:t&&(s.search=`noCache=${Date.now().toString(32)}`),s}function f(e){return`${e}.yml`}function n(e,i,t){const s=d(`${e.pathname}.blockmap`,e);return[d(`${e.pathname.replace(new RegExp(h(t),"g"),i)}.blockmap`,e),s]}return Nt}var pt={},nu;function lt(){if(nu)return pt;nu=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.Provider=void 0,pt.findFile=f,pt.parseUpdateInfo=n,pt.getFileList=e,pt.resolveFiles=i;const r=He(),h=Uo(),c=Lt();let d=class{constructor(s){this.runtimeOptions=s,this.requestHeaders=null,this.executor=s.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const s=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(s==="x64"?"":`-${s}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(s){return`${s}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(s){this.requestHeaders=s}httpRequest(s,o,u){return this.executor.request(this.createRequestOptions(s,o),u)}createRequestOptions(s,o){const u={};return this.requestHeaders==null?o!=null&&(u.headers=o):u.headers=o==null?this.requestHeaders:{...this.requestHeaders,...o},(0,r.configureRequestUrl)(s,u),u}};pt.Provider=d;function f(t,s,o){if(t.length===0)throw(0,r.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const u=t.find(a=>a.url.pathname.toLowerCase().endsWith(`.${s}`));return u??(o==null?t[0]:t.find(a=>!o.some(p=>a.url.pathname.toLowerCase().endsWith(`.${p}`))))}function n(t,s,o){if(t==null)throw(0,r.newError)(`Cannot parse update info from ${s} in the latest release artifacts (${o}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let u;try{u=(0,h.load)(t)}catch(a){throw(0,r.newError)(`Cannot parse update info from ${s} in the latest release artifacts (${o}): ${a.stack||a.message}, rawData: ${t}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return u}function e(t){const s=t.files;if(s!=null&&s.length>0)return s;if(t.path!=null)return[{url:t.path,sha2:t.sha2,sha512:t.sha512}];throw(0,r.newError)(`No files provided: ${(0,r.safeStringifyJson)(t)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function i(t,s,o=u=>u){const a=e(t).map(y=>{if(y.sha2==null&&y.sha512==null)throw(0,r.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,r.safeStringifyJson)(y)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,c.newUrlFromBase)(o(y.url),s),info:y}}),p=t.packages,g=p==null?null:p[process.arch]||p.ia32;return g!=null&&(a[0].packageInfo={...g,path:(0,c.newUrlFromBase)(o(g.path),s).href}),a}return pt}var iu;function pc(){if(iu)return rr;iu=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.GenericProvider=void 0;const r=He(),h=Lt(),c=lt();let d=class extends c.Provider{constructor(n,e,i){super(i),this.configuration=n,this.updater=e,this.baseUrl=(0,h.newBaseUrl)(this.configuration.url)}get channel(){const n=this.updater.channel||this.configuration.channel;return n==null?this.getDefaultChannelName():this.getCustomChannelName(n)}async getLatestVersion(){const n=(0,h.getChannelFilename)(this.channel),e=(0,h.newUrlFromBase)(n,this.baseUrl,this.updater.isAddNoCacheQuery);for(let i=0;;i++)try{return(0,c.parseUpdateInfo)(await this.httpRequest(e),n,e)}catch(t){if(t instanceof r.HttpError&&t.statusCode===404)throw(0,r.newError)(`Cannot find channel "${n}" update info: ${t.stack||t.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(t.code==="ECONNREFUSED"&&i<3){await new Promise((s,o)=>{try{setTimeout(s,1e3*i)}catch(u){o(u)}});continue}throw t}}resolveFiles(n){return(0,c.resolveFiles)(n,this.baseUrl)}};return rr.GenericProvider=d,rr}var nr={},ir={},ou;function sh(){if(ou)return ir;ou=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.BitbucketProvider=void 0;const r=He(),h=Lt(),c=lt();let d=class extends c.Provider{constructor(n,e,i){super({...i,isUseMultipleRangeRequest:!1}),this.configuration=n,this.updater=e;const{owner:t,slug:s}=n;this.baseUrl=(0,h.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${t}/${s}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const n=new r.CancellationToken,e=(0,h.getChannelFilename)(this.getCustomChannelName(this.channel)),i=(0,h.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);try{const t=await this.httpRequest(i,void 0,n);return(0,c.parseUpdateInfo)(t,e,i)}catch(t){throw(0,r.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${t.stack||t.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(n){return(0,c.resolveFiles)(n,this.baseUrl)}toString(){const{owner:n,slug:e}=this.configuration;return`Bitbucket (owner: ${n}, slug: ${e}, channel: ${this.channel})`}};return ir.BitbucketProvider=d,ir}var wt={},au;function mc(){if(au)return wt;au=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.GitHubProvider=wt.BaseGitHubProvider=void 0,wt.computeReleaseNotes=s;const r=He(),h=hc(),c=jt,d=Lt(),f=lt(),n=/\/tag\/([^/]+)$/;class e extends f.Provider{constructor(u,a,p){super({...p,isUseMultipleRangeRequest:!1}),this.options=u,this.baseUrl=(0,d.newBaseUrl)((0,r.githubUrl)(u,a));const g=a==="github.com"?"api.github.com":a;this.baseApiUrl=(0,d.newBaseUrl)((0,r.githubUrl)(u,g))}computeGithubBasePath(u){const a=this.options.host;return a&&!["github.com","api.github.com"].includes(a)?`/api/v3${u}`:u}}wt.BaseGitHubProvider=e;let i=class extends e{constructor(u,a,p){super(u,"github.com",p),this.options=u,this.updater=a}get channel(){const u=this.updater.channel||this.options.channel;return u==null?this.getDefaultChannelName():this.getCustomChannelName(u)}async getLatestVersion(){var u,a,p,g,y;const m=new r.CancellationToken,_=await this.httpRequest((0,d.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},m),R=(0,r.parseXml)(_);let O=R.element("entry",!1,"No published versions on GitHub"),I=null;try{if(this.updater.allowPrerelease){const M=((u=this.updater)===null||u===void 0?void 0:u.channel)||((a=h.prerelease(this.updater.currentVersion))===null||a===void 0?void 0:a[0])||null;if(M===null)I=n.exec(O.element("link").attribute("href"))[1];else for(const $ of R.getElements("entry")){const L=n.exec($.element("link").attribute("href"));if(L===null)continue;const k=L[1],D=((p=h.prerelease(k))===null||p===void 0?void 0:p[0])||null,P=!M||["alpha","beta"].includes(M),F=D!==null&&!["alpha","beta"].includes(String(D));if(P&&!F&&!(M==="beta"&&D==="alpha")){I=k;break}if(D&&D===M){I=k;break}}}else{I=await this.getLatestTagName(m);for(const M of R.getElements("entry"))if(n.exec(M.element("link").attribute("href"))[1]===I){O=M;break}}}catch(M){throw(0,r.newError)(`Cannot parse releases feed: ${M.stack||M.message},
XML:
${_}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(I==null)throw(0,r.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let U,b="",S="";const T=async M=>{b=(0,d.getChannelFilename)(M),S=(0,d.newUrlFromBase)(this.getBaseDownloadPath(String(I),b),this.baseUrl);const $=this.createRequestOptions(S);try{return await this.executor.request($,m)}catch(L){throw L instanceof r.HttpError&&L.statusCode===404?(0,r.newError)(`Cannot find ${b} in the latest release artifacts (${S}): ${L.stack||L.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):L}};try{let M=this.channel;this.updater.allowPrerelease&&(!((g=h.prerelease(I))===null||g===void 0)&&g[0])&&(M=this.getCustomChannelName(String((y=h.prerelease(I))===null||y===void 0?void 0:y[0]))),U=await T(M)}catch(M){if(this.updater.allowPrerelease)U=await T(this.getDefaultChannelName());else throw M}const E=(0,f.parseUpdateInfo)(U,b,S);return E.releaseName==null&&(E.releaseName=O.elementValueOrEmpty("title")),E.releaseNotes==null&&(E.releaseNotes=s(this.updater.currentVersion,this.updater.fullChangelog,R,O)),{tag:I,...E}}async getLatestTagName(u){const a=this.options,p=a.host==null||a.host==="github.com"?(0,d.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new c.URL(`${this.computeGithubBasePath(`/repos/${a.owner}/${a.repo}/releases`)}/latest`,this.baseApiUrl);try{const g=await this.httpRequest(p,{Accept:"application/json"},u);return g==null?null:JSON.parse(g).tag_name}catch(g){throw(0,r.newError)(`Unable to find latest version on GitHub (${p}), please ensure a production release exists: ${g.stack||g.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(u){return(0,f.resolveFiles)(u,this.baseUrl,a=>this.getBaseDownloadPath(u.tag,a.replace(/ /g,"-")))}getBaseDownloadPath(u,a){return`${this.basePath}/download/${u}/${a}`}};wt.GitHubProvider=i;function t(o){const u=o.elementValueOrEmpty("content");return u==="No content."?"":u}function s(o,u,a,p){if(!u)return t(p);const g=[];for(const y of a.getElements("entry")){const m=/\/tag\/v?([^/]+)$/.exec(y.element("link").attribute("href"))[1];h.lt(o,m)&&g.push({version:m,note:t(y)})}return g.sort((y,m)=>h.rcompare(y.version,m.version))}return wt}var or={},su;function lh(){if(su)return or;su=1,Object.defineProperty(or,"__esModule",{value:!0}),or.KeygenProvider=void 0;const r=He(),h=Lt(),c=lt();let d=class extends c.Provider{constructor(n,e,i){super({...i,isUseMultipleRangeRequest:!1}),this.configuration=n,this.updater=e,this.baseUrl=(0,h.newBaseUrl)(`https://api.keygen.sh/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const n=new r.CancellationToken,e=(0,h.getChannelFilename)(this.getCustomChannelName(this.channel)),i=(0,h.newUrlFromBase)(e,this.baseUrl,this.updater.isAddNoCacheQuery);try{const t=await this.httpRequest(i,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},n);return(0,c.parseUpdateInfo)(t,e,i)}catch(t){throw(0,r.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${t.stack||t.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(n){return(0,c.resolveFiles)(n,this.baseUrl)}toString(){const{account:n,product:e,platform:i}=this.configuration;return`Keygen (account: ${n}, product: ${e}, platform: ${i}, channel: ${this.channel})`}};return or.KeygenProvider=d,or}var ar={},lu;function uh(){if(lu)return ar;lu=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.PrivateGitHubProvider=void 0;const r=He(),h=Uo(),c=Ie,d=jt,f=Lt(),n=mc(),e=lt();let i=class extends n.BaseGitHubProvider{constructor(s,o,u,a){super(s,"api.github.com",a),this.updater=o,this.token=u}createRequestOptions(s,o){const u=super.createRequestOptions(s,o);return u.redirect="manual",u}async getLatestVersion(){const s=new r.CancellationToken,o=(0,f.getChannelFilename)(this.getDefaultChannelName()),u=await this.getLatestVersionInfo(s),a=u.assets.find(y=>y.name===o);if(a==null)throw(0,r.newError)(`Cannot find ${o} in the release ${u.html_url||u.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const p=new d.URL(a.url);let g;try{g=(0,h.load)(await this.httpRequest(p,this.configureHeaders("application/octet-stream"),s))}catch(y){throw y instanceof r.HttpError&&y.statusCode===404?(0,r.newError)(`Cannot find ${o} in the latest release artifacts (${p}): ${y.stack||y.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):y}return g.assets=u.assets,g}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(s){return{accept:s,authorization:`token ${this.token}`}}async getLatestVersionInfo(s){const o=this.updater.allowPrerelease;let u=this.basePath;o||(u=`${u}/latest`);const a=(0,f.newUrlFromBase)(u,this.baseUrl);try{const p=JSON.parse(await this.httpRequest(a,this.configureHeaders("application/vnd.github.v3+json"),s));return o?p.find(g=>g.prerelease)||p[0]:p}catch(p){throw(0,r.newError)(`Unable to find latest version on GitHub (${a}), please ensure a production release exists: ${p.stack||p.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(s){return(0,e.getFileList)(s).map(o=>{const u=c.posix.basename(o.url).replace(/ /g,"-"),a=s.assets.find(p=>p!=null&&p.name===u);if(a==null)throw(0,r.newError)(`Cannot find asset "${u}" in: ${JSON.stringify(s.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new d.URL(a.url),info:o}})}};return ar.PrivateGitHubProvider=i,ar}var uu;function ch(){if(uu)return nr;uu=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.isUrlProbablySupportMultiRangeRequests=e,nr.createClient=i;const r=He(),h=sh(),c=pc(),d=mc(),f=lh(),n=uh();function e(t){return!t.includes("s3.amazonaws.com")}function i(t,s,o){if(typeof t=="string")throw(0,r.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const u=t.provider;switch(u){case"github":{const a=t,p=(a.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||a.token;return p==null?new d.GitHubProvider(a,s,o):new n.PrivateGitHubProvider(a,s,p,o)}case"bitbucket":return new h.BitbucketProvider(t,s,o);case"keygen":return new f.KeygenProvider(t,s,o);case"s3":case"spaces":return new c.GenericProvider({provider:"generic",url:(0,r.getS3LikeProviderBaseUrl)(t),channel:t.channel||null},s,{...o,isUseMultipleRangeRequest:!1});case"generic":{const a=t;return new c.GenericProvider(a,s,{...o,isUseMultipleRangeRequest:a.useMultipleRangeRequest!==!1&&e(a.url)})}case"custom":{const a=t,p=a.updateProvider;if(!p)throw(0,r.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new p(a,s,o)}default:throw(0,r.newError)(`Unsupported provider: ${u}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return nr}var sr={},lr={},Mt={},Bt={},cu;function Go(){if(cu)return Bt;cu=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.OperationKind=void 0,Bt.computeOperations=h;var r;(function(e){e[e.COPY=0]="COPY",e[e.DOWNLOAD=1]="DOWNLOAD"})(r||(Bt.OperationKind=r={}));function h(e,i,t){const s=n(e.files),o=n(i.files);let u=null;const a=i.files[0],p=[],g=a.name,y=s.get(g);if(y==null)throw new Error(`no file ${g} in old blockmap`);const m=o.get(g);let _=0;const{checksumToOffset:R,checksumToOldSize:O}=f(s.get(g),y.offset,t);let I=a.offset;for(let U=0;U<m.checksums.length;I+=m.sizes[U],U++){const b=m.sizes[U],S=m.checksums[U];let T=R.get(S);T!=null&&O.get(S)!==b&&(t.warn(`Checksum ("${S}") matches, but size differs (old: ${O.get(S)}, new: ${b})`),T=void 0),T===void 0?(_++,u!=null&&u.kind===r.DOWNLOAD&&u.end===I?u.end+=b:(u={kind:r.DOWNLOAD,start:I,end:I+b},d(u,p,S,U))):u!=null&&u.kind===r.COPY&&u.end===T?u.end+=b:(u={kind:r.COPY,start:T,end:T+b},d(u,p,S,U))}return _>0&&t.info(`File${a.name==="file"?"":" "+a.name} has ${_} changed blocks`),p}const c=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function d(e,i,t,s){if(c&&i.length!==0){const o=i[i.length-1];if(o.kind===e.kind&&e.start<o.end&&e.start>o.start){const u=[o.start,o.end,e.start,e.end].reduce((a,p)=>a<p?a:p);throw new Error(`operation (block index: ${s}, checksum: ${t}, kind: ${r[e.kind]}) overlaps previous operation (checksum: ${t}):
abs: ${o.start} until ${o.end} and ${e.start} until ${e.end}
rel: ${o.start-u} until ${o.end-u} and ${e.start-u} until ${e.end-u}`)}}i.push(e)}function f(e,i,t){const s=new Map,o=new Map;let u=i;for(let a=0;a<e.checksums.length;a++){const p=e.checksums[a],g=e.sizes[a],y=o.get(p);if(y===void 0)s.set(p,u),o.set(p,g);else if(t.debug!=null){const m=y===g?"(same size)":`(size: ${y}, this size: ${g})`;t.debug(`${p} duplicated in blockmap ${m}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}u+=g}return{checksumToOffset:s,checksumToOldSize:o}}function n(e){const i=new Map;for(const t of e)i.set(t.name,t);return i}return Bt}var fu;function gc(){if(fu)return Mt;fu=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.DataSplitter=void 0,Mt.copyData=e;const r=He(),h=Ze,c=wr,d=Go(),f=Buffer.from(`\r
\r
`);var n;(function(t){t[t.INIT=0]="INIT",t[t.HEADER=1]="HEADER",t[t.BODY=2]="BODY"})(n||(n={}));function e(t,s,o,u,a){const p=(0,h.createReadStream)("",{fd:o,autoClose:!1,start:t.start,end:t.end-1});p.on("error",u),p.once("end",a),p.pipe(s,{end:!1})}let i=class extends c.Writable{constructor(s,o,u,a,p,g){super(),this.out=s,this.options=o,this.partIndexToTaskIndex=u,this.partIndexToLength=p,this.finishHandler=g,this.partIndex=-1,this.headerListBuffer=null,this.readState=n.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=a.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(s,o,u){if(this.isFinished){console.error(`Trailing ignored data: ${s.length} bytes`);return}this.handleData(s).then(u).catch(u)}async handleData(s){let o=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,r.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const u=Math.min(this.ignoreByteCount,s.length);this.ignoreByteCount-=u,o=u}else if(this.remainingPartDataCount>0){const u=Math.min(this.remainingPartDataCount,s.length);this.remainingPartDataCount-=u,await this.processPartData(s,0,u),o=u}if(o!==s.length){if(this.readState===n.HEADER){const u=this.searchHeaderListEnd(s,o);if(u===-1)return;o=u,this.readState=n.BODY,this.headerListBuffer=null}for(;;){if(this.readState===n.BODY)this.readState=n.INIT;else{this.partIndex++;let g=this.partIndexToTaskIndex.get(this.partIndex);if(g==null)if(this.isFinished)g=this.options.end;else throw(0,r.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const y=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(y<g)await this.copyExistingData(y,g);else if(y>g)throw(0,r.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(o=this.searchHeaderListEnd(s,o),o===-1){this.readState=n.HEADER;return}}const u=this.partIndexToLength[this.partIndex],a=o+u,p=Math.min(a,s.length);if(await this.processPartStarted(s,o,p),this.remainingPartDataCount=u-(p-o),this.remainingPartDataCount>0)return;if(o=a+this.boundaryLength,o>=s.length){this.ignoreByteCount=this.boundaryLength-(s.length-a);return}}}}copyExistingData(s,o){return new Promise((u,a)=>{const p=()=>{if(s===o){u();return}const g=this.options.tasks[s];if(g.kind!==d.OperationKind.COPY){a(new Error("Task kind must be COPY"));return}e(g,this.out,this.options.oldFileFd,a,()=>{s++,p()})};p()})}searchHeaderListEnd(s,o){const u=s.indexOf(f,o);if(u!==-1)return u+f.length;const a=o===0?s:s.slice(o);return this.headerListBuffer==null?this.headerListBuffer=a:this.headerListBuffer=Buffer.concat([this.headerListBuffer,a]),-1}onPartEnd(){const s=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==s)throw(0,r.newError)(`Expected length: ${s} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(s,o,u){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(s,o,u)}processPartData(s,o,u){this.actualPartLength+=u-o;const a=this.out;return a.write(o===0&&s.length===u?s:s.slice(o,u))?Promise.resolve():new Promise((p,g)=>{a.on("error",g),a.once("drain",()=>{a.removeListener("error",g),p()})})}};return Mt.DataSplitter=i,Mt}var ur={},du;function fh(){if(du)return ur;du=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.executeTasksUsingMultipleRangeRequests=d,ur.checkIsRangesSupported=n;const r=He(),h=gc(),c=Go();function d(e,i,t,s,o){const u=a=>{if(a>=i.length){e.fileMetadataBuffer!=null&&t.write(e.fileMetadataBuffer),t.end();return}const p=a+1e3;f(e,{tasks:i,start:a,end:Math.min(i.length,p),oldFileFd:s},t,()=>u(p),o)};return u}function f(e,i,t,s,o){let u="bytes=",a=0;const p=new Map,g=[];for(let _=i.start;_<i.end;_++){const R=i.tasks[_];R.kind===c.OperationKind.DOWNLOAD&&(u+=`${R.start}-${R.end-1}, `,p.set(a,_),a++,g.push(R.end-R.start))}if(a<=1){const _=R=>{if(R>=i.end){s();return}const O=i.tasks[R++];if(O.kind===c.OperationKind.COPY)(0,h.copyData)(O,t,i.oldFileFd,o,()=>_(R));else{const I=e.createRequestOptions();I.headers.Range=`bytes=${O.start}-${O.end-1}`;const U=e.httpExecutor.createRequest(I,b=>{n(b,o)&&(b.pipe(t,{end:!1}),b.once("end",()=>_(R)))});e.httpExecutor.addErrorAndTimeoutHandlers(U,o),U.end()}};_(i.start);return}const y=e.createRequestOptions();y.headers.Range=u.substring(0,u.length-2);const m=e.httpExecutor.createRequest(y,_=>{if(!n(_,o))return;const R=(0,r.safeGetHeader)(_,"content-type"),O=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(R);if(O==null){o(new Error(`Content-Type "multipart/byteranges" is expected, but got "${R}"`));return}const I=new h.DataSplitter(t,i,p,O[1]||O[2],g,s);I.on("error",o),_.pipe(I),_.on("end",()=>{setTimeout(()=>{m.abort(),o(new Error("Response ends without calling any handlers"))},1e4)})});e.httpExecutor.addErrorAndTimeoutHandlers(m,o),m.end()}function n(e,i){if(e.statusCode>=400)return i((0,r.createHttpError)(e)),!1;if(e.statusCode!==206){const t=(0,r.safeGetHeader)(e,"accept-ranges");if(t==null||t==="none")return i(new Error(`Server doesn't support Accept-Ranges (response code ${e.statusCode})`)),!1}return!0}return ur}var cr={},hu;function dh(){if(hu)return cr;hu=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.ProgressDifferentialDownloadCallbackTransform=void 0;const r=wr;var h;(function(d){d[d.COPY=0]="COPY",d[d.DOWNLOAD=1]="DOWNLOAD"})(h||(h={}));let c=class extends r.Transform{constructor(f,n,e){super(),this.progressDifferentialDownloadInfo=f,this.cancellationToken=n,this.onProgress=e,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=h.COPY,this.nextUpdate=this.start+1e3}_transform(f,n,e){if(this.cancellationToken.cancelled){e(new Error("cancelled"),null);return}if(this.operationType==h.COPY){e(null,f);return}this.transferred+=f.length,this.delta+=f.length;const i=Date.now();i>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=i+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((i-this.start)/1e3))}),this.delta=0),e(null,f)}beginFileCopy(){this.operationType=h.COPY}beginRangeDownload(){this.operationType=h.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(f){if(this.cancellationToken.cancelled){f(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,f(null)}};return cr.ProgressDifferentialDownloadCallbackTransform=c,cr}var pu;function yc(){if(pu)return lr;pu=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.DifferentialDownloader=void 0;const r=He(),h=St(),c=Ze,d=gc(),f=jt,n=Go(),e=fh(),i=dh();let t=class{constructor(a,p,g){this.blockAwareFileInfo=a,this.httpExecutor=p,this.options=g,this.fileMetadataBuffer=null,this.logger=g.logger}createRequestOptions(){const a={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,r.configureRequestUrl)(this.options.newUrl,a),(0,r.configureRequestOptions)(a),a}doDownload(a,p){if(a.version!==p.version)throw new Error(`version is different (${a.version} - ${p.version}), full download is required`);const g=this.logger,y=(0,n.computeOperations)(a,p,g);g.debug!=null&&g.debug(JSON.stringify(y,null,2));let m=0,_=0;for(const O of y){const I=O.end-O.start;O.kind===n.OperationKind.DOWNLOAD?m+=I:_+=I}const R=this.blockAwareFileInfo.size;if(m+_+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==R)throw new Error(`Internal error, size mismatch: downloadSize: ${m}, copySize: ${_}, newSize: ${R}`);return g.info(`Full: ${s(R)}, To download: ${s(m)} (${Math.round(m/(R/100))}%)`),this.downloadFile(y)}downloadFile(a){const p=[],g=()=>Promise.all(p.map(y=>(0,h.close)(y.descriptor).catch(m=>{this.logger.error(`cannot close file "${y.path}": ${m}`)})));return this.doDownloadFile(a,p).then(g).catch(y=>g().catch(m=>{try{this.logger.error(`cannot close files: ${m}`)}catch(_){try{console.error(_)}catch{}}throw y}).then(()=>{throw y}))}async doDownloadFile(a,p){const g=await(0,h.open)(this.options.oldFile,"r");p.push({descriptor:g,path:this.options.oldFile});const y=await(0,h.open)(this.options.newFile,"w");p.push({descriptor:y,path:this.options.newFile});const m=(0,c.createWriteStream)(this.options.newFile,{fd:y});await new Promise((_,R)=>{const O=[];let I;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const L=[];let k=0;for(const P of a)P.kind===n.OperationKind.DOWNLOAD&&(L.push(P.end-P.start),k+=P.end-P.start);const D={expectedByteCounts:L,grandTotal:k};I=new i.ProgressDifferentialDownloadCallbackTransform(D,this.options.cancellationToken,this.options.onProgress),O.push(I)}const U=new r.DigestTransform(this.blockAwareFileInfo.sha512);U.isValidateOnEnd=!1,O.push(U),m.on("finish",()=>{m.close(()=>{p.splice(1,1);try{U.validate()}catch(L){R(L);return}_(void 0)})}),O.push(m);let b=null;for(const L of O)L.on("error",R),b==null?b=L:b=b.pipe(L);const S=O[0];let T;if(this.options.isUseMultipleRangeRequest){T=(0,e.executeTasksUsingMultipleRangeRequests)(this,a,S,g,R),T(0);return}let E=0,M=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const $=this.createRequestOptions();$.redirect="manual",T=L=>{var k,D;if(L>=a.length){this.fileMetadataBuffer!=null&&S.write(this.fileMetadataBuffer),S.end();return}const P=a[L++];if(P.kind===n.OperationKind.COPY){I&&I.beginFileCopy(),(0,d.copyData)(P,S,g,R,()=>T(L));return}const F=`bytes=${P.start}-${P.end-1}`;$.headers.range=F,(D=(k=this.logger)===null||k===void 0?void 0:k.debug)===null||D===void 0||D.call(k,`download range: ${F}`),I&&I.beginRangeDownload();const q=this.httpExecutor.createRequest($,K=>{K.on("error",R),K.on("aborted",()=>{R(new Error("response has been aborted by the server"))}),K.statusCode>=400&&R((0,r.createHttpError)(K)),K.pipe(S,{end:!1}),K.once("end",()=>{I&&I.endRangeDownload(),++E===100?(E=0,setTimeout(()=>T(L),1e3)):T(L)})});q.on("redirect",(K,W,ne)=>{this.logger.info(`Redirect to ${o(ne)}`),M=ne,(0,r.configureRequestUrl)(new f.URL(M),$),q.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers(q,R),q.end()},T(0)})}async readRemoteBytes(a,p){const g=Buffer.allocUnsafe(p+1-a),y=this.createRequestOptions();y.headers.range=`bytes=${a}-${p}`;let m=0;if(await this.request(y,_=>{_.copy(g,m),m+=_.length}),m!==g.length)throw new Error(`Received data length ${m} is not equal to expected ${g.length}`);return g}request(a,p){return new Promise((g,y)=>{const m=this.httpExecutor.createRequest(a,_=>{(0,e.checkIsRangesSupported)(_,y)&&(_.on("error",y),_.on("aborted",()=>{y(new Error("response has been aborted by the server"))}),_.on("data",p),_.on("end",()=>g()))});this.httpExecutor.addErrorAndTimeoutHandlers(m,y),m.end()})}};lr.DifferentialDownloader=t;function s(u,a=" KB"){return new Intl.NumberFormat("en").format((u/1024).toFixed(2))+a}function o(u){const a=u.indexOf("?");return a<0?u:u.substring(0,a)}return lr}var mu;function hh(){if(mu)return sr;mu=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.GenericDifferentialDownloader=void 0;const r=yc();let h=class extends r.DifferentialDownloader{download(d,f){return this.doDownload(d,f)}};return sr.GenericDifferentialDownloader=h,sr}var gu;function Wo(){if(gu)return Dt;gu=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.NoOpLogger=Dt.AppUpdater=void 0;const r=He(),h=Er,c=_t,d=Wr,f=St(),n=Uo(),e=Pd(),i=Ie,t=hc(),s=rh(),o=ih(),u=oh(),a=pc(),p=Vt(),g=ch(),y=Lu,m=Lt(),_=hh();let R=class vc extends d.EventEmitter{get channel(){return this._channel}set channel(b){if(this._channel!=null){if(typeof b!="string")throw(0,r.newError)(`Channel must be a string, but got: ${b}`,"ERR_UPDATER_INVALID_CHANNEL");if(b.length===0)throw(0,r.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=b,this.allowDowngrade=!0}addAuthHeader(b){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:b})}get netSession(){return(0,u.getNetSession)()}get logger(){return this._logger}set logger(b){this._logger=b??new I}set updateConfigPath(b){this.clientPromise=null,this._appUpdateConfigPath=b,this.configOnDisk=new e.Lazy(()=>this.loadUpdateConfig())}constructor(b,S){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new p.UpdaterSignal(this),this._appUpdateConfigPath=null,this.clientPromise=null,this.stagingUserIdPromise=new e.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new e.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",M=>{this._logger.error(`Error: ${M.stack||M.message}`)}),S==null?(this.app=new o.ElectronAppAdapter,this.httpExecutor=new u.ElectronHttpExecutor((M,$)=>this.emit("login",M,$))):(this.app=S,this.httpExecutor=null);const T=this.app.version,E=(0,t.parse)(T);if(E==null)throw(0,r.newError)(`App version is not a valid semver version: "${T}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=E,this.allowPrerelease=O(E),b!=null&&(this.setFeedURL(b),typeof b!="string"&&b.requestHeaders&&(this.requestHeaders=b.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(b){const S=this.createProviderRuntimeOptions();let T;typeof b=="string"?T=new a.GenericProvider({provider:"generic",url:b},this,{...S,isUseMultipleRangeRequest:(0,g.isUrlProbablySupportMultiRangeRequests)(b)}):T=(0,g.createClient)(b,this,S),this.clientPromise=Promise.resolve(T)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let b=this.checkForUpdatesPromise;if(b!=null)return this._logger.info("Checking for update (already in progress)"),b;const S=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),b=this.doCheckForUpdates().then(T=>(S(),T)).catch(T=>{throw S(),this.emit("error",T,`Cannot check for updates: ${(T.stack||T).toString()}`),T}),this.checkForUpdatesPromise=b,b}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(b){return this.checkForUpdates().then(S=>S!=null&&S.downloadPromise?(S.downloadPromise.then(()=>{const T=vc.formatDownloadNotification(S.updateInfo.version,this.app.name,b);new be.Notification(T).show()}),S):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),S))}static formatDownloadNotification(b,S,T){return T==null&&(T={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),T={title:T.title.replace("{appName}",S).replace("{version}",b),body:T.body.replace("{appName}",S).replace("{version}",b)},T}async isStagingMatch(b){const S=b.stagingPercentage;let T=S;if(T==null)return!0;if(T=parseInt(T,10),isNaN(T))return this._logger.warn(`Staging percentage is NaN: ${S}`),!0;T=T/100;const E=await this.stagingUserIdPromise.value,$=r.UUID.parse(E).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${T}, percentage: ${$}, user id: ${E}`),$<T}computeFinalHeaders(b){return this.requestHeaders!=null&&Object.assign(b,this.requestHeaders),b}async isUpdateAvailable(b){const S=(0,t.parse)(b.version);if(S==null)throw(0,r.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${b.version}"`,"ERR_UPDATER_INVALID_VERSION");const T=this.currentVersion;if((0,t.eq)(S,T))return!1;const E=b==null?void 0:b.minimumSystemVersion,M=(0,c.release)();if(E)try{if((0,t.lt)(M,E))return this._logger.info(`Current OS version ${M} is less than the minimum OS version required ${E} for version ${M}`),!1}catch(D){this._logger.warn(`Failed to compare current OS version(${M}) with minimum OS version(${E}): ${(D.message||D).toString()}`)}if(!await this.isStagingMatch(b))return!1;const L=(0,t.gt)(S,T),k=(0,t.lt)(S,T);return L?!0:this.allowDowngrade&&k}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(T=>(0,g.createClient)(T,this,this.createProviderRuntimeOptions())));const b=await this.clientPromise,S=await this.stagingUserIdPromise.value;return b.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":S})),{info:await b.getLatestVersion(),provider:b}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const b=await this.getUpdateInfoAndProvider(),S=b.info;if(!await this.isUpdateAvailable(S))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${S.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",S),{versionInfo:S,updateInfo:S};this.updateInfoAndProvider=b,this.onUpdateAvailable(S);const T=new r.CancellationToken;return{versionInfo:S,updateInfo:S,cancellationToken:T,downloadPromise:this.autoDownload?this.downloadUpdate(T):null}}onUpdateAvailable(b){this._logger.info(`Found version ${b.version} (url: ${(0,r.asArray)(b.files).map(S=>S.url).join(", ")})`),this.emit("update-available",b)}downloadUpdate(b=new r.CancellationToken){const S=this.updateInfoAndProvider;if(S==null){const E=new Error("Please check update first");return this.dispatchError(E),Promise.reject(E)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,r.asArray)(S.info.files).map(E=>E.url).join(", ")}`);const T=E=>{if(!(E instanceof r.CancellationError))try{this.dispatchError(E)}catch(M){this._logger.warn(`Cannot dispatch error event: ${M.stack||M}`)}return E};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:S,requestHeaders:this.computeRequestHeaders(S.provider),cancellationToken:b,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(E=>{throw T(E)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(b){this.emit("error",b,(b.stack||b).toString())}dispatchUpdateDownloaded(b){this.emit(p.UPDATE_DOWNLOADED,b)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,n.load)(await(0,f.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(b){const S=b.fileExtraDownloadHeaders;if(S!=null){const T=this.requestHeaders;return T==null?S:{...S,...T}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const b=i.join(this.app.userDataPath,".updaterId");try{const T=await(0,f.readFile)(b,"utf-8");if(r.UUID.check(T))return T;this._logger.warn(`Staging user id file exists, but content was invalid: ${T}`)}catch(T){T.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${T}`)}const S=r.UUID.v5((0,h.randomBytes)(4096),r.UUID.OID);this._logger.info(`Generated new staging user ID: ${S}`);try{await(0,f.outputFile)(b,S)}catch(T){this._logger.warn(`Couldn't write out staging user ID: ${T}`)}return S}get isAddNoCacheQuery(){const b=this.requestHeaders;if(b==null)return!0;for(const S of Object.keys(b)){const T=S.toLowerCase();if(T==="authorization"||T==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let b=this.downloadedUpdateHelper;if(b==null){const S=(await this.configOnDisk.value).updaterCacheDirName,T=this._logger;S==null&&T.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const E=i.join(this.app.baseCachePath,S||this.app.name);T.debug!=null&&T.debug(`updater cache dir: ${E}`),b=new s.DownloadedUpdateHelper(E),this.downloadedUpdateHelper=b}return b}async executeDownload(b){const S=b.fileInfo,T={headers:b.downloadUpdateOptions.requestHeaders,cancellationToken:b.downloadUpdateOptions.cancellationToken,sha2:S.info.sha2,sha512:S.info.sha512};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(T.onProgress=ie=>this.emit(p.DOWNLOAD_PROGRESS,ie));const E=b.downloadUpdateOptions.updateInfoAndProvider.info,M=E.version,$=S.packageInfo;function L(){const ie=decodeURIComponent(b.fileInfo.url.pathname);return ie.endsWith(`.${b.fileExtension}`)?i.basename(ie):b.fileInfo.info.url}const k=await this.getOrCreateDownloadHelper(),D=k.cacheDirForPendingUpdate;await(0,f.mkdir)(D,{recursive:!0});const P=L();let F=i.join(D,P);const q=$==null?null:i.join(D,`package-${M}${i.extname($.path)||".7z"}`),K=async ie=>(await k.setDownloadedFile(F,q,E,S,P,ie),await b.done({...E,downloadedFile:F}),q==null?[F]:[F,q]),W=this._logger,ne=await k.validateDownloadedPath(F,E,S,W);if(ne!=null)return F=ne,await K(!1);const ce=async()=>(await k.clear().catch(()=>{}),await(0,f.unlink)(F).catch(()=>{})),ue=await(0,s.createTempUpdateFile)(`temp-${P}`,D,W);try{await b.task(ue,T,q,ce),await(0,r.retry)(()=>(0,f.rename)(ue,F),60,500,0,0,ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message))}catch(ie){throw await ce(),ie instanceof r.CancellationError&&(W.info("cancelled"),this.emit("update-cancelled",E)),ie}return W.info(`New version ${M} has been downloaded to ${F}`),await K(!0)}async differentialDownloadInstaller(b,S,T,E,M){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const $=(0,m.blockmapFiles)(b.url,this.app.version,S.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${$[0]}", new: ${$[1]})`);const L=async P=>{const F=await this.httpExecutor.downloadToBuffer(P,{headers:S.requestHeaders,cancellationToken:S.cancellationToken});if(F==null||F.length===0)throw new Error(`Blockmap "${P.href}" is empty`);try{return JSON.parse((0,y.gunzipSync)(F).toString())}catch(q){throw new Error(`Cannot parse blockmap "${P.href}", error: ${q}`)}},k={newUrl:b.url,oldFile:i.join(this.downloadedUpdateHelper.cacheDir,M),logger:this._logger,newFile:T,isUseMultipleRangeRequest:E.isUseMultipleRangeRequest,requestHeaders:S.requestHeaders,cancellationToken:S.cancellationToken};this.listenerCount(p.DOWNLOAD_PROGRESS)>0&&(k.onProgress=P=>this.emit(p.DOWNLOAD_PROGRESS,P));const D=await Promise.all($.map(P=>L(P)));return await new _.GenericDifferentialDownloader(b.info,this.httpExecutor,k).download(D[0],D[1]),!1}catch($){if(this._logger.error(`Cannot download differentially, fallback to full download: ${$.stack||$}`),this._testOnlyOptions!=null)throw $;return!0}}};Dt.AppUpdater=R;function O(U){const b=(0,t.prerelease)(U);return b!=null&&b.length>0}class I{info(b){}warn(b){}error(b){}}return Dt.NoOpLogger=I,Dt}var yu;function Tr(){if(yu)return Zt;yu=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.BaseUpdater=void 0;const r=vr,h=Wo();let c=class extends h.AppUpdater{constructor(f,n){super(f,n),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(f=!1,n=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(f,f?n:this.autoRunAppAfterInstall)?setImmediate(()=>{be.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(f){return super.executeDownload({...f,done:n=>(this.dispatchUpdateDownloaded(n),this.addQuitHandler(),Promise.resolve())})}install(f=!1,n=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const e=this.downloadedUpdateHelper,i=e&&e.file?process.platform==="linux"?e.file.replace(/ /g,"\\ "):e.file:null,t=e==null?null:e.downloadedFileInfo;if(i==null||t==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${f}, isForceRunAfter: ${n}`),this.doInstall({installerPath:i,isSilent:f,isForceRunAfter:n,isAdminRightsRequired:t.isAdminRightsRequired})}catch(s){return this.dispatchError(s),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(f=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(f!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${f}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:f}=this.app,n=`"${f} would like to update"`,e=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),i=[e];return/kdesudo/i.test(e)?(i.push("--comment",n),i.push("-c")):/gksudo/i.test(e)?i.push("--message",n):/pkexec/i.test(e)&&i.push("--disable-internal-agent"),i.join(" ")}spawnSyncLog(f,n=[],e={}){return this._logger.info(`Executing: ${f} with args: ${n}`),(0,r.spawnSync)(f,n,{env:{...process.env,...e},encoding:"utf-8",shell:!0}).stdout.trim()}async spawnLog(f,n=[],e=void 0,i="ignore"){return this._logger.info(`Executing: ${f} with args: ${n}`),new Promise((t,s)=>{try{const o={stdio:i,env:e,detached:!0},u=(0,r.spawn)(f,n,o);u.on("error",a=>{s(a)}),u.unref(),u.pid!==void 0&&t(!0)}catch(o){s(o)}})}};return Zt.BaseUpdater=c,Zt}var fr={},dr={},vu;function Ec(){if(vu)return dr;vu=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const r=St(),h=yc(),c=Lu;let d=class extends h.DifferentialDownloader{async download(){const i=this.blockAwareFileInfo,t=i.size,s=t-(i.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(s,t-1);const o=f(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await n(this.options.oldFile),o)}};dr.FileWithEmbeddedBlockMapDifferentialDownloader=d;function f(e){return JSON.parse((0,c.inflateRawSync)(e).toString())}async function n(e){const i=await(0,r.open)(e,"r");try{const t=(await(0,r.fstat)(i)).size,s=Buffer.allocUnsafe(4);await(0,r.read)(i,s,0,s.length,t-s.length);const o=Buffer.allocUnsafe(s.readUInt32BE(0));return await(0,r.read)(i,o,0,o.length,t-s.length-o.length),await(0,r.close)(i),f(o)}catch(t){throw await(0,r.close)(i),t}}return dr}var Eu;function wu(){if(Eu)return fr;Eu=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.AppImageUpdater=void 0;const r=He(),h=vr,c=St(),d=Ze,f=Ie,n=Tr(),e=Ec(),i=Vt(),t=lt();let s=class extends n.BaseUpdater{constructor(u,a){super(u,a)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(u){const a=u.updateInfoAndProvider.provider,p=(0,t.findFile)(a.resolveFiles(u.updateInfoAndProvider.info),"AppImage",["rpm","deb"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:p,downloadUpdateOptions:u,task:async(g,y)=>{const m=process.env.APPIMAGE;if(m==null)throw(0,r.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");let _=!1;try{const R={newUrl:p.url,oldFile:m,logger:this._logger,newFile:g,isUseMultipleRangeRequest:a.isUseMultipleRangeRequest,requestHeaders:u.requestHeaders,cancellationToken:u.cancellationToken};this.listenerCount(i.DOWNLOAD_PROGRESS)>0&&(R.onProgress=O=>this.emit(i.DOWNLOAD_PROGRESS,O)),await new e.FileWithEmbeddedBlockMapDifferentialDownloader(p.info,this.httpExecutor,R).download()}catch(R){this._logger.error(`Cannot download differentially, fallback to full download: ${R.stack||R}`),_=process.platform==="linux"}_&&await this.httpExecutor.download(p.url,g,y),await(0,c.chmod)(g,493)}})}doInstall(u){const a=process.env.APPIMAGE;if(a==null)throw(0,r.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,d.unlinkSync)(a);let p;const g=f.basename(a);f.basename(u.installerPath)===g||!/\d+\.\d+\.\d+/.test(g)?p=a:p=f.join(f.dirname(a),f.basename(u.installerPath)),(0,h.execFileSync)("mv",["-f",u.installerPath,p]),p!==a&&this.emit("appimage-filename-updated",p);const y={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return u.isForceRunAfter?this.spawnLog(p,[],y):(y.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,h.execFileSync)(p,[],{env:y})),!0}};return fr.AppImageUpdater=s,fr}var hr={},_u;function Su(){if(_u)return hr;_u=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.DebUpdater=void 0;const r=Tr(),h=Vt(),c=lt();let d=class extends r.BaseUpdater{constructor(n,e){super(n,e)}doDownloadUpdate(n){const e=n.updateInfoAndProvider.provider,i=(0,c.findFile)(e.resolveFiles(n.updateInfoAndProvider.info),"deb",["AppImage","rpm"]);return this.executeDownload({fileExtension:"deb",fileInfo:i,downloadUpdateOptions:n,task:async(t,s)=>{this.listenerCount(h.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(h.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,t,s)}})}doInstall(n){const e=this.wrapSudo(),i=/pkexec/i.test(e)?"":'"',t=["dpkg","-i",n.installerPath,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(e,[`${i}/bin/bash`,"-c",`'${t.join(" ")}'${i}`]),n.isForceRunAfter&&this.app.relaunch(),!0}};return hr.DebUpdater=d,hr}var pr={},Au;function Tu(){if(Au)return pr;Au=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.RpmUpdater=void 0;const r=Tr(),h=Vt(),c=lt();let d=class extends r.BaseUpdater{constructor(n,e){super(n,e)}doDownloadUpdate(n){const e=n.updateInfoAndProvider.provider,i=(0,c.findFile)(e.resolveFiles(n.updateInfoAndProvider.info),"rpm",["AppImage","deb"]);return this.executeDownload({fileExtension:"rpm",fileInfo:i,downloadUpdateOptions:n,task:async(t,s)=>{this.listenerCount(h.DOWNLOAD_PROGRESS)>0&&(s.onProgress=o=>this.emit(h.DOWNLOAD_PROGRESS,o)),await this.httpExecutor.download(i.url,t,s)}})}doInstall(n){const e=n.installerPath,i=this.wrapSudo(),t=/pkexec/i.test(i)?"":'"',s=this.spawnSyncLog("which zypper");let o;return s?o=[s,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",e]:o=[this.spawnSyncLog("which dnf || which yum"),"-y","install",e],this.spawnSyncLog(i,[`${t}/bin/bash`,"-c",`'${o.join(" ")}'${t}`]),n.isForceRunAfter&&this.app.relaunch(),!0}};return pr.RpmUpdater=d,pr}var mr={},bu;function Ru(){if(bu)return mr;bu=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.MacUpdater=void 0;const r=He(),h=St(),c=Ze,d=Ie,f=Nu,n=Wo(),e=lt(),i=vr,t=Er;let s=class extends n.AppUpdater{constructor(u,a){super(u,a),this.nativeUpdater=be.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",p=>{this._logger.warn(p),this.emit("error",p)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(u){this._logger.debug!=null&&this._logger.debug(u)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(u=>{u&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(u){let a=u.updateInfoAndProvider.provider.resolveFiles(u.updateInfoAndProvider.info);const p=this._logger,g="sysctl.proc_translated";let y=!1;try{this.debug("Checking for macOS Rosetta environment"),y=(0,i.execFileSync)("sysctl",[g],{encoding:"utf8"}).includes(`${g}: 1`),p.info(`Checked for macOS Rosetta environment (isRosetta=${y})`)}catch(U){p.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${U}`)}let m=!1;try{this.debug("Checking for arm64 in uname");const b=(0,i.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");p.info(`Checked 'uname -a': arm64=${b}`),m=m||b}catch(U){p.warn(`uname shell command to check for arm64 failed: ${U}`)}m=m||process.arch==="arm64"||y;const _=U=>{var b;return U.url.pathname.includes("arm64")||((b=U.info.url)===null||b===void 0?void 0:b.includes("arm64"))};m&&a.some(_)?a=a.filter(U=>m===_(U)):a=a.filter(U=>!_(U));const R=(0,e.findFile)(a,"zip",["pkg","dmg"]);if(R==null)throw(0,r.newError)(`ZIP file not provided: ${(0,r.safeStringifyJson)(a)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const O=u.updateInfoAndProvider.provider,I="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:R,downloadUpdateOptions:u,task:async(U,b)=>{const S=d.join(this.downloadedUpdateHelper.cacheDir,I),T=()=>(0,h.pathExistsSync)(S)?!u.disableDifferentialDownload:(p.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let E=!0;T()&&(E=await this.differentialDownloadInstaller(R,u,U,O,I)),E&&await this.httpExecutor.download(R.url,U,b)},done:U=>{if(!u.disableDifferentialDownload)try{const b=d.join(this.downloadedUpdateHelper.cacheDir,I);(0,c.copyFileSync)(U.downloadedFile,b)}catch(b){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${b.message}`)}return this.updateDownloaded(R,U)}})}async updateDownloaded(u,a){var p;const g=a.downloadedFile,y=(p=u.info.size)!==null&&p!==void 0?p:(await(0,h.stat)(g)).size,m=this._logger,_=`fileToProxy=${u.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${_})`),this.server=(0,f.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${_})`),this.server.on("close",()=>{m.info(`Proxy server for native Squirrel.Mac is closed (${_})`)});const R=O=>{const I=O.address();return typeof I=="string"?I:`http://127.0.0.1:${I==null?void 0:I.port}`};return await new Promise((O,I)=>{const U=(0,t.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),b=Buffer.from(`autoupdater:${U}`,"ascii"),S=`/${(0,t.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(T,E)=>{const M=T.url;if(m.info(`${M} requested`),M==="/"){if(!T.headers.authorization||T.headers.authorization.indexOf("Basic ")===-1){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),m.warn("No authenthication info");return}const k=T.headers.authorization.split(" ")[1],D=Buffer.from(k,"base64").toString("ascii"),[P,F]=D.split(":");if(P!=="autoupdater"||F!==U){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),m.warn("Invalid authenthication credentials");return}const q=Buffer.from(`{ "url": "${R(this.server)}${S}" }`);E.writeHead(200,{"Content-Type":"application/json","Content-Length":q.length}),E.end(q);return}if(!M.startsWith(S)){m.warn(`${M} requested, but not supported`),E.writeHead(404),E.end();return}m.info(`${S} requested by Squirrel.Mac, pipe ${g}`);let $=!1;E.on("finish",()=>{$||(this.nativeUpdater.removeListener("error",I),O([]))});const L=(0,c.createReadStream)(g);L.on("error",k=>{try{E.end()}catch(D){m.warn(`cannot end response: ${D}`)}$=!0,this.nativeUpdater.removeListener("error",I),I(new Error(`Cannot pipe "${g}": ${k}`))}),E.writeHead(200,{"Content-Type":"application/zip","Content-Length":y}),L.pipe(E)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${_})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${R(this.server)}, ${_})`),this.nativeUpdater.setFeedURL({url:R(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${b.toString("base64")}`}}),this.dispatchUpdateDownloaded(a),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",I),this.nativeUpdater.checkForUpdates()):O([])})})}quitAndInstall(){this.squirrelDownloadedUpdate?(this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()):(this.nativeUpdater.on("update-downloaded",()=>{this.nativeUpdater.quitAndInstall(),this.closeServerIfExists()}),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return mr.MacUpdater=s,mr}var gr={},Hr={},Cu;function ph(){if(Cu)return Hr;Cu=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.verifySignature=f;const r=He(),h=vr,c=_t,d=Ie;function f(t,s,o){return new Promise((u,a)=>{const p=s.replace(/'/g,"''");o.info(`Verifying signature ${p}`),(0,h.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${p}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(g,y,m)=>{var _;try{if(g!=null||m){e(o,g,m,a),u(null);return}const R=n(y);if(R.Status===0){try{const b=d.normalize(R.Path),S=d.normalize(s);if(o.info(`LiteralPath: ${b}. Update Path: ${S}`),b!==S){e(o,new Error(`LiteralPath of ${b} is different than ${S}`),m,a),u(null);return}}catch(b){o.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(_=b.message)!==null&&_!==void 0?_:b.stack}`)}const I=(0,r.parseDn)(R.SignerCertificate.Subject);let U=!1;for(const b of t){const S=(0,r.parseDn)(b);if(S.size?U=Array.from(S.keys()).every(E=>S.get(E)===I.get(E)):b===I.get("CN")&&(o.warn(`Signature validated using only CN ${b}. Please add your full Distinguished Name (DN) to publisherNames configuration`),U=!0),U){u(null);return}}}const O=`publisherNames: ${t.join(" | ")}, raw info: `+JSON.stringify(R,(I,U)=>I==="RawData"?void 0:U,2);o.warn(`Sign verification failed, installer signed with incorrect certificate: ${O}`),u(O)}catch(R){e(o,R,null,a),u(null);return}})})}function n(t){const s=JSON.parse(t);delete s.PrivateKey,delete s.IsOSBinary,delete s.SignatureType;const o=s.SignerCertificate;return o!=null&&(delete o.Archived,delete o.Extensions,delete o.Handle,delete o.HasPrivateKey,delete o.SubjectName),s}function e(t,s,o,u){if(i()){t.warn(`Cannot execute Get-AuthenticodeSignature: ${s||o}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,h.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(a){t.warn(`Cannot execute ConvertTo-Json: ${a.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}s!=null&&u(s),o&&u(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${o}. Failing signature validation due to unknown stderr.`))}function i(){const t=c.release();return t.startsWith("6.")&&!t.startsWith("6.3")}return Hr}var Ou;function Iu(){if(Ou)return gr;Ou=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.NsisUpdater=void 0;const r=He(),h=Ie,c=Tr(),d=Ec(),f=Vt(),n=lt(),e=St(),i=ph(),t=jt;let s=class extends c.BaseUpdater{constructor(u,a){super(u,a),this._verifyUpdateCodeSignature=(p,g)=>(0,i.verifySignature)(p,g,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(u){u&&(this._verifyUpdateCodeSignature=u)}doDownloadUpdate(u){const a=u.updateInfoAndProvider.provider,p=(0,n.findFile)(a.resolveFiles(u.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:u,fileInfo:p,task:async(g,y,m,_)=>{const R=p.packageInfo,O=R!=null&&m!=null;if(O&&u.disableWebInstaller)throw(0,r.newError)(`Unable to download new version ${u.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!O&&!u.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(O||u.disableDifferentialDownload||await this.differentialDownloadInstaller(p,u,g,a,r.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(p.url,g,y);const I=await this.verifySignature(g);if(I!=null)throw await _(),(0,r.newError)(`New version ${u.updateInfoAndProvider.info.version} is not signed by the application owner: ${I}`,"ERR_UPDATER_INVALID_SIGNATURE");if(O&&await this.differentialDownloadWebPackage(u,R,m,a))try{await this.httpExecutor.download(new t.URL(R.path),m,{headers:u.requestHeaders,cancellationToken:u.cancellationToken,sha512:R.sha512})}catch(U){try{await(0,e.unlink)(m)}catch{}throw U}}})}async verifySignature(u){let a;try{if(a=(await this.configOnDisk.value).publisherName,a==null)return null}catch(p){if(p.code==="ENOENT")return null;throw p}return await this._verifyUpdateCodeSignature(Array.isArray(a)?a:[a],u)}doInstall(u){const a=["--updated"];u.isSilent&&a.push("/S"),u.isForceRunAfter&&a.push("--force-run"),this.installDirectory&&a.push(`/D=${this.installDirectory}`);const p=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;p!=null&&a.push(`--package-file=${p}`);const g=()=>{this.spawnLog(h.join(process.resourcesPath,"elevate.exe"),[u.installerPath].concat(a)).catch(y=>this.dispatchError(y))};return u.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),g(),!0):(this.spawnLog(u.installerPath,a).catch(y=>{const m=y.code;this._logger.info(`Cannot run installer: error code: ${m}, error message: "${y.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),m==="UNKNOWN"||m==="EACCES"?g():m==="ENOENT"?be.shell.openPath(u.installerPath).catch(_=>this.dispatchError(_)):this.dispatchError(y)}),!0)}async differentialDownloadWebPackage(u,a,p,g){if(a.blockMapSize==null)return!0;try{const y={newUrl:new t.URL(a.path),oldFile:h.join(this.downloadedUpdateHelper.cacheDir,r.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:p,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,cancellationToken:u.cancellationToken};this.listenerCount(f.DOWNLOAD_PROGRESS)>0&&(y.onProgress=m=>this.emit(f.DOWNLOAD_PROGRESS,m)),await new d.FileWithEmbeddedBlockMapDifferentialDownloader(a,this.httpExecutor,y).download()}catch(y){return this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),process.platform==="win32"}return!1}};return gr.NsisUpdater=s,gr}var Pu;function Vt(){return Pu||(Pu=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.UpdaterSignal=r.UPDATE_DOWNLOADED=r.DOWNLOAD_PROGRESS=r.NsisUpdater=r.MacUpdater=r.RpmUpdater=r.DebUpdater=r.AppImageUpdater=r.Provider=r.CancellationToken=r.NoOpLogger=r.AppUpdater=r.BaseUpdater=void 0;const h=He();Object.defineProperty(r,"CancellationToken",{enumerable:!0,get:function(){return h.CancellationToken}});const c=St(),d=Ie;var f=Tr();Object.defineProperty(r,"BaseUpdater",{enumerable:!0,get:function(){return f.BaseUpdater}});var n=Wo();Object.defineProperty(r,"AppUpdater",{enumerable:!0,get:function(){return n.AppUpdater}}),Object.defineProperty(r,"NoOpLogger",{enumerable:!0,get:function(){return n.NoOpLogger}});var e=lt();Object.defineProperty(r,"Provider",{enumerable:!0,get:function(){return e.Provider}});var i=wu();Object.defineProperty(r,"AppImageUpdater",{enumerable:!0,get:function(){return i.AppImageUpdater}});var t=Su();Object.defineProperty(r,"DebUpdater",{enumerable:!0,get:function(){return t.DebUpdater}});var s=Tu();Object.defineProperty(r,"RpmUpdater",{enumerable:!0,get:function(){return s.RpmUpdater}});var o=Ru();Object.defineProperty(r,"MacUpdater",{enumerable:!0,get:function(){return o.MacUpdater}});var u=Iu();Object.defineProperty(r,"NsisUpdater",{enumerable:!0,get:function(){return u.NsisUpdater}});let a;function p(){if(process.platform==="win32")a=new(Iu()).NsisUpdater;else if(process.platform==="darwin")a=new(Ru()).MacUpdater;else{a=new(wu()).AppImageUpdater;try{const m=d.join(process.resourcesPath,"package-type");if(!(0,c.existsSync)(m))return a;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const _=(0,c.readFileSync)(m).toString().trim();switch(console.info("Found package-type:",_),_){case"deb":a=new(Su()).DebUpdater;break;case"rpm":a=new(Tu()).RpmUpdater;break;default:break}}catch(m){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",m.message)}}return a}Object.defineProperty(r,"autoUpdater",{enumerable:!0,get:()=>a||p()}),r.DOWNLOAD_PROGRESS="download-progress",r.UPDATE_DOWNLOADED="update-downloaded";class g{constructor(_){this.emitter=_}login(_){y(this.emitter,"login",_)}progress(_){y(this.emitter,r.DOWNLOAD_PROGRESS,_)}updateDownloaded(_){y(this.emitter,r.UPDATE_DOWNLOADED,_)}updateCancelled(_){y(this.emitter,"update-cancelled",_)}}r.UpdaterSignal=g;function y(m,_,R){m.on(_,R)}}(Dn)),Dn}var je=Vt();function mh(r){if(je.autoUpdater.logger=we,je.autoUpdater.autoDownload=!1,je.autoUpdater.autoInstallOnAppQuit=!0,process.mas){we.info("Mac App Store build detected, skipping auto-updater");return}const h=()=>{je.autoUpdater.checkForUpdates().catch(c=>{we.error("Error checking for updates:",c)})};h(),setInterval(h,4*60*60*1e3),je.autoUpdater.on("checking-for-update",()=>{we.info("Checking for updates..."),r.webContents.send("update:checking")}),je.autoUpdater.on("update-available",c=>{we.info("Update available:",c),r.webContents.send("update:available",c)}),je.autoUpdater.on("update-not-available",c=>{we.info("Update not available:",c),r.webContents.send("update:not-available")}),je.autoUpdater.on("error",c=>{we.error("Update error:",c),r.webContents.send("update:error",c.message)}),je.autoUpdater.on("download-progress",c=>{we.info(`Download progress: ${c.percent}%`),r.webContents.send("update:progress",c)}),je.autoUpdater.on("update-downloaded",c=>{we.info("Update downloaded:",c),r.webContents.send("update:downloaded",c)}),r.webContents.ipc.handle("update:start-download",()=>{je.autoUpdater.downloadUpdate().catch(c=>{we.error("Error downloading update:",c)})}),r.webContents.ipc.handle("update:install",()=>{je.autoUpdater.quitAndInstall()})}var ut=(r=>(r.PRINTER_UTILS_USB_PRINT="PRINTER_UTILS_USB_PRINT",r.PRINTER_UTILS_USB_PRINT_TEST="PRINTER_UTILS_USB_PRINT_TEST",r.PRINTER_UTILS_USB_TEST="PRINTER_UTILS_USB_TEST",r.MINIMIZE_WINDOW="MINIMIZE_WINDOW",r.MAXIMIZE_WINDOW="MAXIMIZE_WINDOW",r.EXIT_WINDOW="EXIT_WINDOW",r.RELOAD_WINDOW="RELOAD_WINDOW",r.OPEN_DEV_TOOLS="OPEN_DEV_TOOLS",r.WINDOW_XY_AXIS="WINDOW_XY_AXIS",r.CHECK_FOR_UPDATES="CHECK_FOR_UPDATES",r.START_UPDATE="START_UPDATE",r.INSTALL_UPDATE="INSTALL_UPDATE",r))(ut||{});function gh(r){be.ipcMain.on(ut.OPEN_DEV_TOOLS,()=>{r==null||r.webContents.openDevTools()}),be.ipcMain.on(ut.RELOAD_WINDOW,()=>{r==null||r.reload()}),be.ipcMain.on(ut.MINIMIZE_WINDOW,()=>{r==null||r.minimize()}),be.ipcMain.on(ut.WINDOW_XY_AXIS,(h,c)=>{if(typeof c.x=="number"&&typeof c.y=="number"&&!isNaN(c.x)&&!isNaN(c.y))try{const[d,f]=r.getPosition();r.setPosition(Math.round(d+c.x),Math.round(f+c.y),!0),console.log(`Window moved by ${c.x}, ${c.y} to [${d+c.x}, ${f+c.y}]`)}catch(d){console.error("Error moving window:",d)}}),be.ipcMain.on(ut.EXIT_WINDOW,()=>{r==null||r.close()}),be.ipcMain.on(ut.MAXIMIZE_WINDOW,()=>{r!=null&&r.isMaximized()?r==null||r.unmaximize():r==null||r.maximize()}),be.ipcMain.handle("app:get-version",()=>process.env.npm_package_version),be.ipcMain.handle("app:get-path",(h,c)=>r.webContents.session.getPath(c)),be.ipcMain.handle(ut.CHECK_FOR_UPDATES,async()=>{try{we.info("Manually checking for updates...");const h=await je.autoUpdater.checkForUpdates();return we.info("Update check result:",h),h}catch(h){throw we.error("Error checking for updates:",h),h}}),be.ipcMain.handle(ut.START_UPDATE,async()=>{try{we.info("Starting update download...");const h=await je.autoUpdater.downloadUpdate();return we.info("Update download complete:",h),h}catch(h){throw we.error("Error downloading update:",h),h}}),be.ipcMain.handle(ut.INSTALL_UPDATE,()=>{we.info("Installing update..."),je.autoUpdater.quitAndInstall(!1,!0)})}we.transports.file.level="info";we.info("App starting...");je.autoUpdater.logger=we;const yh=Hf({directory:"dist",scheme:"app"}),vh=(be.app.isPackaged,be.app.getAppPath());process.env.DIST=Qe.join(vh,"dist");process.env.VITE_PUBLIC=process.env.DIST;require("fs").existsSync(process.env.DIST)||(we.warn(`DIST path ${process.env.DIST} not found using app.getAppPath(). Trying relative path...`),process.env.DIST=Qe.join(__dirname,"../dist"),process.env.VITE_PUBLIC=process.env.DIST,require("fs").existsSync(process.env.DIST)||we.error(`CRITICAL: Cannot find dist directory at ${process.env.DIST}. Please check build output and packaging structure.`));we.info(`DIST path set to: ${process.env.DIST}`);we.info(`VITE_PUBLIC path set to: ${process.env.VITE_PUBLIC}`);let ke,Ne;const{VITE_DEV_SERVER_URL:Du}=process.env;function Eh(){const r=Qe.join(__dirname,"..","electron","loader.html"),h=Qe.join(__dirname,"loader.html");if(require("fs").existsSync(r))return we.info("Using development loader path:",r),r;if(require("fs").existsSync(h))return we.info("Using production loader path:",h),h;throw we.error("Loader file not found in either location:",{devPath:r,prodPath:h}),new Error("Loader file not found")}function mt(r,h){Ne&&!Ne.isDestroyed()&&Ne.webContents.send("loading-progress",{progress:r,status:h})}async function wh(){Ne=new be.BrowserWindow({width:400,height:300,frame:!1,transparent:!0,webPreferences:{nodeIntegration:!0,contextIsolation:!1},show:!1,center:!0});try{const r=Eh();return await Ne.loadFile(r),Ne.show(),Ne}catch(r){throw we.error("Failed to create loader window:",r),Ne&&!Ne.isDestroyed()&&(Ne.close(),Ne=null),r}}async function _h(r){const h=new Promise((c,d)=>{setTimeout(()=>{n()},500);let f=!1;const n=()=>{we.info("Window is ready to be show"),f||(f=!0,c())};r.once("ready-to-show",n),r.webContents.once("did-finish-load",n),r.webContents.once("did-fail-load",(e,i,t)=>{f||(f=!0,d(new Error(`Failed to load window: ${t} (${i})`)))}),r.webContents.once("crashed",()=>{f||(f=!0,d(new Error("Window crashed during setup")))})});try{we.info("Setting up IPC..."),gh(r),we.info("Setting up auto-updater..."),mh(r),await h}catch(c){throw we.error("Error during window setup:",c),c}}async function wc(){try{await wh(),mt(10,"Initializing application..."),ke=new be.BrowserWindow({fullscreenable:!0,icon:Qe.join(process.env.VITE_PUBLIC,"electron-vite.svg"),show:!1,hasShadow:!1,darkTheme:!1,autoHideMenuBar:!0,webPreferences:{preload:Qe.join(__dirname,"preload.js"),nodeIntegration:!0,sandbox:!1,allowRunningInsecureContent:!0},frame:!0,simpleFullscreen:!0}),ke.on("closed",()=>{ke=null,Ne&&!Ne.isDestroyed()&&(Ne.close(),Ne=null)}),mt(30,"Loading resources...");try{Du?(mt(50,"Connecting to development server..."),await ke.loadURL(Du)):(mt(50,"Loading application content..."),await yh(ke))}catch(r){throw we.error("Failed to load window content:",r),r}if(!ke||ke.isDestroyed())throw new Error("Window was destroyed during content load");if(mt(70,"Setting up features..."),await _h(ke),mt(90,"Preparing display..."),ke&&!ke.isDestroyed())try{const{screen:r}=require("electron"),h=r.getPrimaryDisplay(),{width:c,height:d}=h.workAreaSize;ke.setBounds({x:0,y:0,width:c,height:d}),ke.webContents.setWindowOpenHandler(({url:f})=>(we.info(`Opening external URL: ${f}`),be.shell.openExternal(f),{action:"deny"})),mt(95,"Finalizing application setup..."),we.info("Waiting for 5 seconds before showing main window..."),await new Promise(f=>setTimeout(f,5e3)),mt(100,"Ready!"),ke.isDestroyed()||(ke.show(),ke.focus(),we.info("Main window displayed successfully")),setTimeout(()=>{Ne&&!Ne.isDestroyed()&&(Ne.close(),Ne=null)},500)}catch(r){throw we.error("Error preparing window for display:",r),r}}catch(r){const h=r;throw we.error("Error during window creation or setup:",h),mt(100,`Error: ${h.message||"Failed to load application"}`),Ne&&!Ne.isDestroyed()&&(Ne.webContents.send("loading-progress",{progress:100,status:`Error: ${h.message||"Failed to load application"}`,error:!0}),setTimeout(()=>{Ne&&!Ne.isDestroyed()&&(Ne.close(),Ne=null)},3e3)),ke&&!ke.isDestroyed()&&(ke.destroy(),ke=null),h}}be.app.on("activate",()=>{be.BrowserWindow.getAllWindows().length===0&&(we.info("App activated with no windows open, creating new window."),wc())});be.app.whenReady().then(async()=>{try{await wc()}catch(r){const h=r;we.error("Error during app initialization:",h)}});be.app.on("window-all-closed",()=>{we.info("All windows closed."),process.platform!=="darwin"&&(we.info("Quitting app (non-macOS)."),be.app.quit())});be.app.on("ready",()=>{we.info("App ready event (checking for updates)."),be.app.isPackaged?process.mas?we.info("Mac App Store build detected, skipping auto-updater."):je.autoUpdater.checkForUpdatesAndNotify():we.warn("Skipping update check in development mode.")});
